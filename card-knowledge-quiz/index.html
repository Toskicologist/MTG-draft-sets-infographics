<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MTG Card Knowledge Quiz - Custom Mode</title>
  <style>
    /* ===== Base / Reset ===== */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0f0f13;
      --surface: #1a1a24;
      --surface-hover: #222233;
      --border: #2a2a3a;
      --text: #e0e0e8;
      --text-muted: #8888aa;
      --accent: #6c63ff;
      --accent-hover: #7f78ff;
      --correct: #22c55e;
      --correct-bg: rgba(34,197,94,0.12);
      --wrong: #ef4444;
      --wrong-bg: rgba(239,68,68,0.12);
      --gold: #f59e0b;
      --white-mana: #f9faf4;
      --blue-mana: #0e68ab;
      --black-mana: #150b00;
      --red-mana: #d3202a;
      --green-mana: #00733e;
      --colorless-mana: #9ea0a1;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.5;
    }

    /* ===== LOCAL VERSION BANNER ===== */
    .local-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
      color: white;
      text-align: center;
      padding: 12px;
      font-weight: 900;
      font-size: 1.2rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      z-index: 9999;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.5);
      border-bottom: 3px solid #7f1d1d;
    }
    .local-banner-spacer {
      height: 52px;
    }

    /* ===== Layout ===== */
    .app-container {
      max-width: 720px;
      margin: 0 auto;
      padding: 16px;
    }

    /* ===== Header ===== */
    .header {
      text-align: center;
      padding: 24px 0 16px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 20px;
    }
    .header h1 {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }
    .header .subtitle {
      color: var(--text-muted);
      font-size: 0.85rem;
      margin-top: 4px;
    }
    .header .api-badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.7rem;
      background: rgba(108,99,255,0.15);
      color: #9b94ff;
      margin-top: 6px;
    }

    /* ===== Score Bar ===== */
    .score-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px 18px;
      margin-bottom: 16px;
      flex-wrap: wrap;
      gap: 8px;
    }
    .score-item {
      text-align: center;
    }
    .score-label {
      font-size: 0.7rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .score-value {
      font-size: 1.2rem;
      font-weight: 700;
    }
    .score-value.streak { color: var(--gold); }
    .score-value.accuracy { color: var(--accent); }

    /* ===== Filters ===== */
    .filters {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    .filter-select {
      flex: 1;
      min-width: 120px;
      padding: 8px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--surface);
      color: var(--text);
      font-size: 0.85rem;
      cursor: pointer;
      appearance: none;
      -webkit-appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%238888aa' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 10px center;
    }
    .filter-select:hover { border-color: var(--accent); }

    /* ===== Question Mode Selector ===== */
    .question-mode-selector {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
      padding: 12px;
      background: var(--surface);
      border-radius: 8px;
      border: 1px solid var(--border);
    }

    .mode-label {
      font-weight: 600;
      color: var(--text);
      margin: 0;
      font-size: 0.9rem;
    }

    .mode-option {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      border: 2px solid var(--border);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
      background: var(--surface);
    }

    .mode-option.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    .mode-option input[type="radio"] {
      margin: 0;
      cursor: pointer;
    }

    .mode-option span {
      font-weight: 500;
      font-size: 0.9rem;
    }

    .mode-option:hover {
      border-color: var(--accent);
    }

    /* ===== Card Source Selector ===== */
    .card-source-selector {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }

    .source-tab {
      flex: 1;
      padding: 12px 8px;
      border: 2px solid var(--border);
      border-radius: 10px;
      background: var(--surface);
      color: var(--text);
      cursor: pointer;
      transition: all 0.15s;
      text-align: center;
    }

    .source-tab:hover:not(.active) {
      border-color: var(--accent);
      background: var(--surface-hover);
    }

    .source-tab.active {
      background: rgba(108, 99, 255, 0.15);
      border-color: var(--accent);
    }

    .source-tab-label {
      font-size: 0.9rem;
      font-weight: 700;
      margin-bottom: 2px;
    }

    .source-tab.active .source-tab-label {
      color: var(--accent);
    }

    .source-tab-desc {
      font-size: 0.7rem;
      color: var(--text-muted);
      line-height: 1.3;
    }

    @media (max-width: 480px) {
      .card-source-selector {
        flex-direction: column;
      }
    }

    /* ===== Source Sub-sections ===== */
    .source-presets {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 12px;
    }

    .source-lists {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 12px;
    }

    .list-btn {
      padding: 12px 16px;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: var(--surface);
      color: var(--text);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .list-btn:hover:not(.active):not(:disabled) {
      border-color: var(--accent);
      background: var(--surface-hover);
    }

    .list-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }

    .list-btn:disabled {
      opacity: 0.6;
      cursor: wait;
    }

    .list-btn-count {
      font-size: 0.75rem;
      color: var(--text-muted);
      font-weight: 400;
    }

    .list-btn.active .list-btn-count {
      color: rgba(255,255,255,0.7);
    }

    /* ===== Preset Toggle Bar (kept for preset buttons) ===== */
    .preset-toggle-bar {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }

    .preset-primary {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      flex: 1;
    }

    .preset-btn {
      padding: 8px 16px;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: var(--surface);
      color: var(--text);
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .preset-btn:hover:not(.active):not(:disabled) {
      border-color: var(--accent);
      background: var(--surface-hover);
    }

    .preset-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }

    .preset-btn:disabled {
      opacity: 0.6;
      cursor: wait;
    }

    .spinner-mini {
      display: inline-block;
      width: 12px;
      height: 12px;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ===== Search Field ===== */
    .search-field-container {
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
      flex-wrap: wrap;
    }

    .search-input {
      flex: 1;
      min-width: 300px;
      padding: 10px 14px;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: var(--bg);
      color: var(--text);
      font-size: 0.9rem;
      font-family: 'Courier New', monospace;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--accent);
    }

    .search-btn {
      padding: 10px 20px;
      border: 2px solid var(--accent);
      border-radius: 8px;
      background: var(--accent);
      color: #fff;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s;
      white-space: nowrap;
    }

    .search-btn:hover {
      background: #5850e0;
      border-color: #5850e0;
    }

    .search-hint {
      font-size: 0.75rem;
      color: var(--text-muted);
      flex-basis: 100%;
      margin-top: -4px;
    }

    .search-hint a {
      color: var(--accent);
      text-decoration: none;
    }

    .search-hint a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      .search-input {
        min-width: 100%;
      }
      .search-btn {
        width: 100%;
      }
    }

    /* ===== Custom List ===== */
    .custom-list-container {
      margin-bottom: 16px;
    }

    .custom-list-textarea {
      width: 100%;
      padding: 10px 14px;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: var(--bg);
      color: var(--text);
      font-size: 0.85rem;
      font-family: 'Segoe UI', sans-serif;
      resize: vertical;
      line-height: 1.5;
      box-sizing: border-box;
    }

    .custom-list-textarea:focus {
      outline: none;
      border-color: var(--accent);
    }

    .custom-list-textarea::placeholder {
      color: var(--text-muted);
      opacity: 0.6;
    }

    /* ===== Config Panel ===== */
    .config-panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .config-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }

    .config-header h3 {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--accent);
    }

    .config-toggle-btn {
      padding: 6px 14px;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: var(--bg);
      color: var(--text-muted);
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.15s;
    }

    .config-toggle-btn:hover {
      border-color: var(--accent);
      color: var(--text);
    }

    .field-config-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 16px;
    }

    .field-config-table th,
    .field-config-table td {
      padding: 12px 8px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .field-config-table th {
      background: rgba(108, 99, 255, 0.1);
      color: var(--accent);
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.75rem;
      letter-spacing: 0.05em;
    }

    .field-config-table input[type="checkbox"],
    .field-config-table input[type="radio"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: var(--accent);
    }

    .field-config-table input:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .difficulty-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .difficulty-0 { background: rgba(128, 128, 128, 0.2); color: #999; }
    .difficulty-1 { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
    .difficulty-2 { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
    .difficulty-3 { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
    .difficulty-4 { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
    .difficulty-5 { background: rgba(168, 85, 247, 0.2); color: #a855f7; }

    /* ===== Question Container ===== */
    .question-container {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .question-type-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 16px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 12px;
      background: rgba(108, 99, 255, 0.15);
      color: var(--accent);
    }

    .question-text {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 20px;
      line-height: 1.4;
    }

    /* ===== Scryfall Card Display ===== */
    .scryfall-card-display {
      background: #171717;
      border: 1px solid #333;
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 24px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }

    .scryfall-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid #333;
    }

    .scryfall-name {
      font-size: 1.2rem;
      font-weight: 700;
      color: #fff;
    }

    .scryfall-mana-cost {
      font-size: 1rem;
      font-family: 'Courier New', monospace;
      color: #aaa;
    }

    .scryfall-art {
      width: 100%;
      border-radius: 8px;
      margin-bottom: 12px;
    }

    @media (min-width: 600px) {
      .scryfall-art {
        float: left;
        width: 250px;
        margin-right: 16px;
        margin-bottom: 8px;
      }
      .scryfall-card-display::after {
        content: '';
        display: table;
        clear: both;
      }
    }

    .scryfall-type {
      font-size: 0.9rem;
      font-style: italic;
      color: #bbb;
      margin-bottom: 12px;
    }

    .scryfall-oracle {
      font-size: 0.95rem;
      line-height: 1.6;
      color: #ddd;
      margin-bottom: 12px;
      white-space: pre-wrap;
    }

    .scryfall-pt {
      text-align: right;
      font-size: 1.1rem;
      font-weight: 700;
      color: #fff;
    }

    .redacted {
      background: #555;
      color: transparent;
      border-radius: 4px;
      user-select: none;
      position: relative;
      display: inline-block;
    }

    .redacted::after {
      content: '█████';
      position: absolute;
      left: 0;
      color: #555;
    }

    /* ===== Answer Choices ===== */
    .answer-choices {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    @media (max-width: 480px) {
      .answer-choices {
        grid-template-columns: 1fr;
      }
    }

    /* Compact layout for short answers */
    .answer-choices-compact {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 8px;
    }

    .answer-choices-compact .answer-btn {
      flex: 1 1 auto;
      min-width: 80px;
      max-width: 150px;
    }

    .answer-btn {
      padding: 12px 16px;
      border: 2px solid var(--border);
      border-radius: 10px;
      background: var(--surface);
      color: var(--text);
      font-size: 0.95rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
      text-align: center;
      position: relative;
      word-break: break-word;
    }

    .answer-btn:hover:not(:disabled) {
      border-color: var(--accent);
      background: var(--surface-hover);
    }

    .answer-btn:disabled {
      cursor: not-allowed;
    }

    .answer-btn.selected {
      border-color: var(--accent);
      background: rgba(108, 99, 255, 0.1);
    }

    .answer-btn.correct {
      border-color: var(--correct);
      background: var(--correct-bg);
    }

    .answer-btn.wrong {
      border-color: var(--wrong);
      background: var(--wrong-bg);
    }

    .answer-btn.short-answer {
      font-size: 1.5rem;
      font-weight: 700;
      padding: 16px 12px;
    }

    .answer-btn-image {
      padding: 4px;
      height: auto;
    }

    .answer-art {
      width: 100%;
      max-width: 200px;
      border-radius: 8px;
      display: block;
      margin: 0 auto;
    }

    .answer-group-compact .answer-art {
      max-width: 120px;
    }

    /* ===== Feedback ===== */
    .feedback {
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
    }

    .feedback.correct {
      border-color: var(--correct);
      background: var(--correct-bg);
    }

    .feedback.wrong {
      border-color: var(--wrong);
      background: var(--wrong-bg);
    }

    .feedback-header {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .feedback.correct .feedback-header {
      color: var(--correct);
    }

    .feedback.wrong .feedback-header {
      color: var(--wrong);
    }

    .feedback-details {
      font-size: 0.95rem;
      color: var(--text);
      margin-bottom: 16px;
    }

    .next-btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      background: var(--accent);
      color: #fff;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s;
    }

    .next-btn:hover {
      background: var(--accent-hover);
    }

    /* ===== Inline Feedback (replaces answer choices) ===== */
    .feedback-inline {
      margin-top: 24px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      align-items: center;
    }

    @media (min-width: 1000px) {
      .feedback-inline {
        flex-direction: row;
        align-items: flex-start;
        justify-content: center;
        flex-wrap: wrap;
      }
    }

    .feedback-result {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 20px 24px;
      border-radius: 12px;
      width: 100%;
      max-width: 500px;
      border: 2px solid;
    }

    .feedback-result.correct {
      background: var(--correct-bg);
      border-color: var(--correct);
    }

    .feedback-result.wrong {
      background: var(--wrong-bg);
      border-color: var(--wrong);
    }

    .feedback-icon {
      font-size: 2.5rem;
      line-height: 1;
      font-weight: 900;
    }

    .feedback-result.correct .feedback-icon {
      color: var(--correct);
    }

    .feedback-result.wrong .feedback-icon {
      color: var(--wrong);
    }

    .feedback-text {
      flex: 1;
      color: var(--text);
    }

    .feedback-text strong {
      font-size: 1.1rem;
    }

    .full-card-reveal {
      width: 100%;
      max-width: 300px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      margin: 0 auto;
    }

    @media (max-width: 599px) {
      .full-card-reveal {
        max-width: 100%;
      }
    }

    @media (min-width: 600px) {
      .full-card-reveal {
        max-width: 250px;
      }
    }

    .full-card-reveal img {
      width: 100%;
      height: auto;
      display: block;
    }

    .next-btn-large {
      padding: 16px 48px;
      border: none;
      border-radius: 12px;
      background: var(--accent);
      color: #fff;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 12px rgba(108, 99, 255, 0.3);
      width: 100%;
      max-width: 400px;
    }

    .next-btn-large:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(108, 99, 255, 0.4);
    }

    .next-btn-large:active {
      transform: translateY(0);
    }

    /* ===== Full Card Reveal Section ===== */
    .full-card-reveal-section {
      margin-top: 24px;
      padding: 24px;
      background: var(--surface);
      border-radius: 12px;
      text-align: center;
    }

    .feedback-header {
      margin-bottom: 16px;
    }

    .card-name-link {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--accent);
      text-decoration: none;
    }

    .card-name-link:hover {
      text-decoration: underline;
    }

    .next-question-container {
      margin-top: 24px;
    }

    .next-question-btn {
      padding: 16px 32px;
      font-size: 1.1rem;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 2px 8px rgba(108, 99, 255, 0.3);
      transition: all 0.2s;
    }

    .next-question-btn:hover {
      background: rgba(108, 99, 255, 0.9);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(108, 99, 255, 0.4);
    }

    .next-question-btn:focus {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
    }

    /* Reset History Button */
    .history-controls {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-top: 16px;
      padding: 12px;
      background: var(--card-bg);
      border-radius: 8px;
      flex-wrap: wrap;
    }

    .reset-history-btn {
      padding: 10px 16px;
      font-size: 0.95rem;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
      box-shadow: 0 2px 6px rgba(108, 99, 255, 0.2);
    }

    .reset-history-btn:hover {
      background: rgba(108, 99, 255, 0.9);
      transform: translateY(-1px);
      box-shadow: 0 3px 8px rgba(108, 99, 255, 0.3);
    }

    .reset-history-btn:active {
      transform: translateY(0);
    }

    .history-status {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-style: italic;
    }

    /* Hide answer buttons when feedback is shown */
    .feedback-shown .answer-choices {
      display: none;
    }

    /* ===== History Section ===== */
    .history-section {
      margin-top: 40px;
      padding: 24px;
      background: rgba(108, 99, 255, 0.05);
      border: 1px solid rgba(108, 99, 255, 0.2);
      border-radius: 12px;
    }

    .history-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .history-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--accent);
    }

    .history-clear-btn {
      padding: 6px 14px;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: var(--surface);
      color: var(--text-muted);
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.15s;
    }

    .history-clear-btn:hover {
      border-color: var(--wrong);
      color: var(--wrong);
    }

    .history-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }

    .history-table th {
      background: rgba(108, 99, 255, 0.1);
      padding: 8px 10px;
      text-align: left;
      color: var(--accent);
      font-weight: 600;
      border-bottom: 2px solid rgba(108, 99, 255, 0.2);
      white-space: nowrap;
    }

    .history-table td {
      padding: 8px 10px;
      border-bottom: 1px solid var(--border);
      color: var(--text);
    }

    .history-correct {
      color: var(--correct);
      font-weight: 700;
      font-size: 1.1rem;
    }

    .history-wrong {
      color: var(--wrong);
      font-weight: 700;
      font-size: 1.1rem;
    }

    .history-table-wrapper {
      overflow-x: auto;
    }

    /* ===== Streak Popup ===== */
    .streak-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, var(--gold), #ff8800);
      color: #fff;
      padding: 32px 48px;
      border-radius: 16px;
      font-size: 2.5rem;
      font-weight: 900;
      box-shadow: 0 8px 24px rgba(245, 158, 11, 0.5);
      z-index: 10000;
      animation: popBounce 0.6s ease-out;
    }

    @keyframes popBounce {
      0% { transform: translate(-50%, -50%) scale(0); }
      50% { transform: translate(-50%, -50%) scale(1.2); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }

    /* ===== Loading / Error States ===== */
    .loading-container {
      text-align: center;
      padding: 40px;
    }

    .spinner {
      width: 48px;
      height: 48px;
      border: 4px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }

    .error-container {
      background: var(--wrong-bg);
      border: 2px solid var(--wrong);
      border-radius: 12px;
      padding: 24px;
      text-align: center;
    }

    .error-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--wrong);
      margin-bottom: 12px;
    }

    .error-message {
      font-size: 0.95rem;
      color: var(--text);
    }

    /* ===== Utility ===== */
    .text-center { text-align: center; }
    .mb-16 { margin-bottom: 16px; }
  </style>
</head>
<body>
  <div class="local-banner">LIVE VERSION</div>
  <div class="local-banner-spacer"></div>

  <div id="root"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect, useCallback, useRef } = React;

    // ===================================================================
    // VERSION & CHANGELOG
    // ===================================================================
    /*
     * MTG Card Knowledge Quiz - Custom Mode Only
     * Version: 2.13.5
     * Last Updated: 2026-02-19 13:30 UTC
     *
     * CHANGELOG:
     * v2.13.5 (2026-02-19) - Fix critical runtime error: config.isApplicable is not a function
     *   - BUG: TypeError when toggling shown fields - called config.isApplicable on quiz config object
     *   - FIX: Added isApplicable method to powerToughness field config for single-card applicability checks
     *   - Impact: Field toggling and question regeneration now work correctly
     *
     * v2.13.4 (2026-02-19) - Fix critical bug: undefined askField variable breaking question generation
     *   - FIX: ReferenceError in generateCustomQuestion - used undefined 'askField' instead of 'updatedConfig.askField'
     *   - Impact: Questions could not generate due to missing variable reference
     *   - Result: All question generation now works correctly
     *   - VERIFIED: Single/Multiple mode checkbox behavior works correctly (handleFieldToggle logic confirmed)
     *
     * v2.13.3 (2026-02-19) - Simplify question modes: Single Type vs Multiple Types (random)
     *   - REMOVED: "Rotate through all types" mode (replaced with simpler default behavior)
     *   - NEW: Two-mode system: Single Type (pick one type) vs Multiple Types (default)
     *   - Multiple Types mode: All 8 question types enabled by default, randomly selected
     *   - Single Type mode: Only ONE type can be checked at a time
     *   - Default: Start with Multiple Types mode, all fields enabled
     *   - Question selection: Always random from enabled types (no rotation logic)
     *   - Simplified state: removed lastAskedField tracking, removed rotation logic
     *
     * v2.13.2 (2026-02-19) - Bug fixes: Toggle regeneration and auto-scroll
     *   - FIX: Toggling question type fields (Name, Type, Mana Value, etc.) now regenerates question
     *   - Problem: When clicking toggle buttons, enabledFields changed but question wasn't regenerated
     *   - Solution: Added useEffect to regenerate question using same card when shownFields change
     *   - NEW: Auto-scroll to quiz container when new question appears
     *   - Behavior: After answering a question and clicking Next, page auto-scrolls to new question
     *   - Smooth scroll animation makes it clear that question has changed
     *   - Especially useful on mobile/narrow screens where quiz might be off-screen
     *
     * v2.13.1 (2026-02-19) - Bug fix: Prepopulated list switching
     *   - FIX: Switching to "Card Lists" tab now loads the highlighted list immediately
     *   - Previous logic: Only loaded if cardPool was empty, or if activePreset was already a prepopulated list
     *   - New logic: Checks if activePreset is a valid prepopulated list; if not, loads the first available list
     *   - Result: No need to click another list then back to make selection work
     *
     * v2.13.0 (2026-02-19) - Major feature update: 7 new features
     *   - NEW: Question rotation mode - cycle through all enabled question types instead of random
     *   - NEW: Casting Cost replaces Mana Value - shows full mana symbols (e.g., {2}{U}{U})
     *   - NEW: Compact answer layout - short answers displayed in horizontal row
     *   - FIXED: Image answers now show actual card art instead of URLs
     *   - NEW: Question history tracking - prevents duplicate card+question combinations
     *   - NEW: Background fetching - automatically loads more cards when running low in search mode
     *   - NEW: Pre-cached Modern & Standard lists - 107 modern + 100 standard cards (instant load)
     *   - NEW: Improved quiz flow - card name as Scryfall link, auto-scroll, focused Next button
     *   - Reset History button to clear asked questions
     *
     * v2.12.0 (2026-02-18) - Pre-cached card data for prepopulated lists
     *   - Pauper card data now embedded in page (50 cards, ~25KB)
     *   - Clicking "Pauper Top Cards" loads instantly — no Scryfall API call needed
     *   - Fallback to API fetch still available for lists without pre-cached data
     *   - Future prepopulated lists can use either cardData (instant) or cards (API fetch)
     *
     * v2.11.1 (2026-02-18) - Bug fixes from testing
     *   - FIX: Stale question no longer shown when switching card source or loading new pool
     *   - FIX: Cards with blank oracle text filtered out when asking about text box
     *   - FIX: Card name redaction now handles split/double-faced cards
     *   - FIX: Custom list parsing now strips quantity prefixes (4x), set codes (FDN), collector numbers
     *   - FIX: Small pools now generate synthetic wrong answers for mana value, P/T, colors
     *   - FIX: Falls back to dynamic API when pool can't produce enough wrong answers
     *   - Removed basic lands from Pauper list, added Experimental Synthesizer, Chromatic Star, etc.
     *   - History rows color-coded green/red, card names link to Scryfall
     *   - Full card reveal now truly full-width on mobile
     *   - Not-found card separator changed to semicolons for readability
     *
     * v2.11.0 (2026-02-18) - UI hierarchy redesign, history tracker, responsive images
     *   - NEW: Card source selector — choose between Scryfall Search, Card Lists, or Custom List
     *   - Scryfall Search shows format presets (Standard/Pioneer/Modern) + search field + filters
     *   - Card Lists shows curated lists (Pauper) with card counts and one-click loading
     *   - Custom List is now its own dedicated tab with simplified textarea interface
     *   - NEW: Question History table at bottom shows all answered questions
     *   - History displays: question number, correct/incorrect, card name, what was asked, answers
     *   - Clear History button resets both history and score
     *   - Card art in question preview: full-width on mobile, floated left with text wrap on desktop
     *   - Full card reveal: full-width on mobile, constrained to 250px on desktop
     *   - Removed old flat PresetSelector bar in favor of source tab UI
     *
     * v2.10.2 (2026-02-18) - Update Pauper list from actual tournament data
     *   - Replaced hardcoded guesses with actual top 50 Pauper cards from mtgtop8 2026-01-01 to 2026-02-14
     *   - Now loads directly from C:\Users\Johnw\ClaudeProjects\mtg\shared-data\deck-scrape\pauper-2026-01-01_to-2026-02-14-first-page-all-tournaments\cards.csv
     *   - All 50 cards now verified to exist on Scryfall
     *   - Added: Lorien Revealed, Brainstorm, Voldaren Epicure, Bojuka Bog, and many more
     *   - Removed: All invalid card names, now 100% load success rate
     *
     * v2.10.1 (2026-02-18) - Fix Pauper card list names
     *   - Replaced 10 invalid card names with correct Pauper staples
     *   - Fixed: Spymaster's Snare → Snap, Silverblade Clerics → Prismatic Strands
     *   - Fixed: Frostghost → Faerie Seer, Slingerling → Scrapyard Recombiner
     *   - Fixed: Drunau Vampire → Dusk Legion Zealot, Dusky Crypt → Dinrova Horror
     *   - Fixed: Fanatic of Hazoret → Electrickery, Flame of Keld → Spore Frog
     *   - Added: Dragon's Rage Channeler (now 50/50 cards load successfully)
     *
     * v2.10.0 (2026-02-18) - Prepopulated card lists
     *   - NEW: "Pauper" button loads a curated list of top Pauper format cards
     *   - Prepopulated lists show count and "Load Prepopulated List" button
     *   - Reusable system: add new lists by adding to PREPOPULATED_LISTS constant
     *   - List can be edited in textarea if needed
     *
     * v2.9.1 (2026-02-18) - Responsive card feedback layout
     *   - Card preview and feedback text now display side-by-side on wide screens (≥1000px)
     *   - Stacked vertically on mobile/narrow screens for better UX
     *   - Media query adjusts flex layout based on viewport width
     *
     * v2.9.0 (2026-02-18) - Custom card list feature ("My List")
     *   - NEW: "My List" button in preset bar lets you quiz on specific cards
     *   - Paste card names (one per line) into textarea, click "Load Cards"
     *   - Uses Scryfall /cards/collection API (batches of 75 for efficiency)
     *   - Shows which card names weren't found (in red)
     *   - List text persisted to localStorage across sessions
     *   - Search/filter UI hidden when in custom list mode
     *
     * v2.8.6 (2026-02-18) - Fix stale question when switching Ask field
     *   - BUG FIX: Switching settings showed previous config's question, not current
     *   - Root cause: pre-generated cache race condition — cache invalidation useEffect
     *     hadn't applied yet when nextQuestion useEffect ran, so stale cached question was used
     *   - Fix: validate cached question matches current askField/answerFormat before using it
     *
     * v2.8.5 (2026-02-16) - Fix Show checkboxes not matching card display
     *   - BUG FIX: Card display now uses live shownFields from config, not stale question snapshot
     *   - Toggling Show checkboxes instantly updates what's visible on the current card
     *   - Root cause: question object stored shownFields at generation time, never updated
     *
     * v2.8.4 (2026-02-16) - Fix "Next Question" button crash
     *   - BUG FIX: Added missing onNext prop to QuestionDisplay component
     *   - "Next Question" button was calling undefined function, causing crash after first answer
     *   - Now properly passes nextQuestion function as onNext prop
     *
     * v2.8.3 (2026-02-16) - Fix blank page after answering
     *   - BUG FIX: Added missing pointsEarned and streakBonus props to QuestionDisplay
     *   - Page was crashing due to undefined variable references in feedback display
     *   - Props now properly passed from CardKnowledgeQuiz to QuestionDisplay component
     *
     * v2.8.2 (2026-02-16) - Don't regenerate card when shownFields changes
     *   - BUG FIX: Toggling Show checkboxes no longer regenerates the question
     *   - Card only regenerates when: askField changes, answerFormat changes, or pool changes
     *   - Removed shownFields from useEffect dependencies (lines 2218, 2226)
     *   - More efficient: changing what's visible doesn't waste API calls or card pool queries
     *
     * v2.8.1 (2026-02-15) - Fix "show all" toggle (was backwards)
     *   - BUG FIX: Added missing canShow/canAsk properties to FIELD_CONFIG
     *   - "Show all fields (except asked)" now works correctly (was showing nothing when enabled)
     *   - Root cause: Filter checked FIELD_CONFIG[key].canShow but property didn't exist
     *
     * v2.8.0 (2026-02-15) - Inline feedback + full card reveal + "show all" toggle
     *   - Answer choices replaced with feedback after answering (no separate section)
     *   - Shows full card image on feedback (reveals all hidden fields)
     *   - Large "Next Question" button with auto-focus (press Enter or click)
     *   - NEW: "Show all fields (except asked)" toggle above field table
     *   - When enabled, automatically updates shown fields when Ask changes
     *   - Auto-checks old Ask field when switching to new Ask field
     *   - Manual checkbox changes disable "show all" toggle
     *   - Feedback shows checkmark/X icon + points earned or correct answer
     *   - Works for both Multiple Choice and Text Input modes
     *   - Better UX: click answer → see result + card → hit Enter for next
     *
     * v2.7.1 (2026-02-15) - Add background pre-generation for instant "Next Question"
     *   - Questions now pre-generate in background while user reviews feedback
     *   - Clicking "Next Question" is instant (uses cached pre-generated question)
     *   - Especially beneficial for Dynamic strategy (~1s API call happens in background)
     *   - Cache invalidated when config changes (askField, answerFormat, shownFields, strategy)
     *   - Flow: Answer → Show feedback → Pre-gen next in background → Click Next (instant!)
     *
     * v2.7.0 (2026-02-15) - Add dynamic API strategy (three-way toggle)
     *   - NEW: Three strategies for generating wrong answers
     *   - Strategy A (Pool): Search cached 200-card pool by similarity (instant, good quality)
     *   - Strategy B (Hierarchical): Filter cached pool by exact attributes (instant, harder)
     *   - Strategy C (Dynamic): Real-time Scryfall API queries for maximally similar cards (~1s, hardest)
     *   - Dynamic strategy makes hierarchical API queries (Level 1-6 relaxation)
     *   - Example Dynamic query: "type:creature color:B rarity:m is:legendary -mv:4"
     *   - Searches ALL Standard cards, not just cached pool
     *   - Type line parsing: supertypes (Legendary), card types (Creature), subtypes (Phyrexian)
     *   - Default: Pool (fast), toggle in config panel
     *
     * v2.6.0 (2026-02-15) - Add hierarchical wrong answer strategy (toggle)
     *   - NEW: Two strategies for generating wrong answers (user toggle in config)
     *   - Strategy A (Similarity): Score by similarity, walk down until 3 unique values
     *   - Strategy B (Hierarchical): Progressively relax constraints (color, rarity, supertypes, subtypes)
     *   - Hierarchical finds cards matching all attributes except askField → harder questions
     *   - Type line parsing: separates supertypes (Legendary), card types (Creature), subtypes (Phyrexian)
     *   - Default: Hierarchical (better quality), can switch to Similarity (faster)
     *
     * v2.5.1 (2026-02-15) - Optimize MC generation with early exit
     *   - Walk down similarity-sorted list until 3 unique values found
     *   - Early exit optimization: processes ~15 cards typically (not all 200)
     *   - Same quality (prioritizes similar wrong answers), faster performance
     *
     * v2.5.0 (2026-02-15) - Rewrite MC wrong answer generation (MAJOR FIX)
     *   - Now searches in decreasing similarity order for unique wrong answers
     *   - Was limited to top 20 most similar (failed when duplicates)
     *   - Guarantees maximum variety in answer choices
     *   - FIX: No longer fails when similar cards have duplicate values
     *   - Example: Asking for Mana Value now shows diverse options (1,3,5,7) not just (3,3,3,4)
     *
     * v2.4.0 (2026-02-15) - Default all fields shown + fix question generation
     *   - All showable fields now checked by default on first load
     *   - When selecting new Ask field, old Ask field automatically re-checked in Show
     *   - Relaxed multiple choice requirements: accepts 2-4 answer choices (was 4 only)
     *   - Reduced minimum pool size from 4 to 3 cards
     *   - Improved wrong answer variety (samples from 20 candidates instead of 10)
     *   - FIX: "Cannot generate questions" error for valid field combinations
     *
     * v2.3.0 (2026-02-15) - UI improvements and remove field restrictions
     *   - Moved Answer Format (Multiple Choice / Text Input) to top of config
     *   - Removed all incompatibility filtering (except can't show asked field)
     *   - Card Art field still viewable when checked in Show
     *   - Simplified field interactions
     *
     * v2.2.0 (2026-02-15) - Remove Card Image field
     *   - Removed cardImage field from config (full Scryfall card display)
     *   - Kept Card Art field (art_crop only)
     *   - Simplified to 7 fields total
     *   - Removed cardImage from incompatibleWith arrays
     *
     * v2.1.1 (2026-02-15) - Fix Show/Ask field behavior
     *   - FIX: Asking for a field now properly removes it from shown fields
     *   - FIX: Switching ask fields auto-toggles: old → shown, new → hidden
     *   - FIX: CardDisplay correctly filters out asked field
     *   - FIX: Asked field never appears in card display
     *
     * v2.1.0 (2026-02-15) - Custom-only version
     *   - Removed ALL predefined question code
     *   - Simplified to custom mode only
     *   - Kept all 8 field types with Scryfall card display
     *   - Kept preset system (Standard, Pioneer, Modern)
     *   - Kept similarity-based multiple choice
     *   - Kept auto-search and auto-generation
     */

    // ===================================================================
    // CONSTANTS
    // ===================================================================

    const SCRYFALL_API_BASE = 'https://api.scryfall.com';
    const SCRYFALL_DELAY = 100;

    const STORAGE_KEYS = {
      SCORE: 'card_quiz_score_v2',
      HISTORY: 'card_quiz_history_v2',
      CONFIG: 'card_quiz_custom_config',
    };

    const COLOR_MAP = {
      W: 'White',
      U: 'Blue',
      B: 'Black',
      R: 'Red',
      G: 'Green',
    };

    const DIFFICULTY_WEIGHTS = {
      0: 1,    // N/A
      1: 1,    // Easy
      2: 1.25, // Medium
      3: 1.5,  // Hard
      4: 2,    // Very Hard
      5: 2.5,  // Expert
    };

    const DIFFICULTY_LABELS = {
      0: 'N/A',
      1: 'Easy',
      2: 'Medium',
      3: 'Hard',
      4: 'Very Hard',
      5: 'Expert',
    };

    // Field configuration - all 8 field types
    const FIELD_CONFIG = {
      cardName: {
        id: 'cardName',
        label: 'Card Name',
        difficulty: 3,
        canShow: true,
        canAsk: true,
        requiresApplicability: false,
        extractValue: (card) => card.name,
        formatDisplay: (name) => name,
        incompatibleWith: [],
      },
      castingCost: {
        id: 'castingCost',
        label: 'Casting Cost',
        difficulty: 2,
        canShow: true,
        canAsk: true,
        requiresApplicability: false,
        extractValue: (card) => card.manaCost || '',
        formatDisplay: (cost) => cost || '{0}',
        incompatibleWith: [],
      },
      colors: {
        id: 'colors',
        label: 'Colors',
        difficulty: 2,
        canShow: true,
        canAsk: true,
        requiresApplicability: false,
        extractValue: (card) => card.colors,
        formatDisplay: (colors) => colors.length ? colors.join('') : 'Colorless',
        incompatibleWith: [],
      },
      typeLine: {
        id: 'typeLine',
        label: 'Type Line',
        difficulty: 2,
        canShow: true,
        canAsk: true,
        requiresApplicability: false,
        extractValue: (card) => card.typeLine,
        formatDisplay: (tl) => tl,
        incompatibleWith: [],
      },
      powerToughness: {
        id: 'powerToughness',
        label: 'Power / Toughness',
        difficulty: 3,
        canShow: true,
        canAsk: true,
        requiresApplicability: true,
        checkApplicability: (pool) => pool.filter(c => c.isCreature && c.power && c.toughness).length >= 4,
        isApplicable: (card) => card.isCreature && card.power && card.toughness,
        extractValue: (card) => `${card.power}/${card.toughness}`,
        formatDisplay: (pt) => pt,
        incompatibleWith: [],
      },
      oracleText: {
        id: 'oracleText',
        label: 'Text Box',
        difficulty: 4,
        canShow: true,
        canAsk: true,
        requiresApplicability: false,
        extractValue: (card) => card.oracleText || '',
        formatDisplay: (text) => text,
        incompatibleWith: ['cardArt'],
      },
      cardArt: {
        id: 'cardArt',
        label: 'Card Art',
        difficulty: 5,
        canShow: true,
        canAsk: true,
        requiresApplicability: false,
        extractValue: (card) => card.imageUris?.art_crop || '',
        formatDisplay: (url) => url,
        incompatibleWith: ['cardName'],
      },
    };

    const PRESET_DEFINITIONS = {
      standard: {
        label: 'Standard',
        query: 'format:standard game:paper -type:land',
        ttl: 7 * 24 * 60 * 60 * 1000,
        preCache: true,
      },
      pioneer: {
        label: 'Pioneer',
        query: 'format:pioneer game:paper -type:land',
        ttl: 30 * 24 * 60 * 60 * 1000,
        preCache: true,
      },
      modern: {
        label: 'Modern',
        query: 'format:modern game:paper -type:land',
        ttl: 30 * 24 * 60 * 60 * 1000,
        preCache: true,
      },
    };

    // Top Pauper cards for prepopulated lists (pre-cached from Scryfall)
/* PREPOPULATED_LISTS WITH PAUPER, MODERN, AND STANDARD - Auto-generated by combine-lists.py */
        const PREPOPULATED_LISTS = {
          pauper: {
            label: 'Pauper Top Cards',
            cardData: [
              {name:"Pyroblast",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Choose one \u00e2\u20ac\u201d\n\u00e2\u20ac\u00a2 Counter target spell if it's blue.\n\u00e2\u20ac\u00a2 Destroy target permanent if it's blue.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/0/b029eb9a-dd7a-40c2-96c4-0063d9cc002c.jpg?1580014621",normal:"https://cards.scryfall.io/normal/front/b/0/b029eb9a-dd7a-40c2-96c4-0063d9cc002c.jpg?1580014621"}},
              {name:"Blue Elemental Blast",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Choose one \u00e2\u20ac\u201d\n\u00e2\u20ac\u00a2 Counter target red spell.\n\u00e2\u20ac\u00a2 Destroy target red permanent.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/f/2f51f88f-f662-4572-a371-9a77718ed079.jpg?1562434032",normal:"https://cards.scryfall.io/normal/front/2/f/2f51f88f-f662-4572-a371-9a77718ed079.jpg?1562434032"}},
              {name:"Relic of Progenitus",manaValue:1,typeLine:"Artifact",oracleText:"{T}: Target player exiles a card from their graveyard.\n{1}, Exile this artifact: Exile all graveyards. Draw a card.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/3/436cd66c-0622-43cd-8748-af4d21a2db3f.jpg?1580015265",normal:"https://cards.scryfall.io/normal/front/4/3/436cd66c-0622-43cd-8748-af4d21a2db3f.jpg?1580015265"}},
              {name:"Hydroblast",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Choose one \u00e2\u20ac\u201d\n\u00e2\u20ac\u00a2 Counter target spell if it's red.\n\u00e2\u20ac\u00a2 Destroy target permanent if it's red.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/c/4c9c9b16-5567-4473-95e6-622292f77336.jpg?1580013995",normal:"https://cards.scryfall.io/normal/front/4/c/4c9c9b16-5567-4473-95e6-622292f77336.jpg?1580013995"}},
              {name:"Red Elemental Blast",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Choose one \u00e2\u20ac\u201d\n\u00e2\u20ac\u00a2 Counter target blue spell.\n\u00e2\u20ac\u00a2 Destroy target blue permanent.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/0/70a45e9b-699e-425a-9f3d-267274830d3e.jpg?1562436618",normal:"https://cards.scryfall.io/normal/front/7/0/70a45e9b-699e-425a-9f3d-267274830d3e.jpg?1562436618"}},
              {name:"Lightning Bolt",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Lightning Bolt deals 3 damage to any target.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/7/77c6fa74-5543-42ac-9ead-0e890b188e99.jpg?1706239968",normal:"https://cards.scryfall.io/normal/front/7/7/77c6fa74-5543-42ac-9ead-0e890b188e99.jpg?1706239968"}},
              {name:"Nihil Spellbomb",manaValue:1,colorIdentity:["B"],typeLine:"Artifact",oracleText:"{T}, Sacrifice this artifact: Exile target player's graveyard.\nWhen this artifact is put into a graveyard from the battlefield, you may pay {B}. If you do, draw a card.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/5/e5892a23-efae-4731-9b8f-41c87960fe93.jpg?1562442193",normal:"https://cards.scryfall.io/normal/front/e/5/e5892a23-efae-4731-9b8f-41c87960fe93.jpg?1562442193"}},
              {name:"Counterspell",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target spell.",manaCost:"{U}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/f/4f616706-ec97-4923-bb1e-11a69fbaa1f8.jpg?1751282477",normal:"https://cards.scryfall.io/normal/front/4/f/4f616706-ec97-4923-bb1e-11a69fbaa1f8.jpg?1751282477"}},
              {name:"L\u00c3\u00b3rien Revealed",manaValue:5,colors:["U"],colorIdentity:["U"],typeLine:"Sorcery",oracleText:"Draw three cards.\nIslandcycling {1} ({1}, Discard this card: Search your library for an Island card, reveal it, put it into your hand, then shuffle.)",manaCost:"{3}{U}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/c/0ce44270-a684-4489-9077-521456e6dfaa.jpg?1687210977",normal:"https://cards.scryfall.io/normal/front/0/c/0ce44270-a684-4489-9077-521456e6dfaa.jpg?1687210977"}},
              {name:"Cast Down",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"Destroy target nonlegendary creature.",manaCost:"{1}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/b/aba79021-39af-4e74-beb5-f2f508c865b2.jpg?1674136020",normal:"https://cards.scryfall.io/normal/front/a/b/aba79021-39af-4e74-beb5-f2f508c865b2.jpg?1674136020"}},
              {name:"Voldaren Epicure",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Creature \u00e2\u20ac\u201d Vampire",oracleText:"When this creature enters, it deals 1 damage to each opponent. Create a Blood token. (It's an artifact with \"{1}, {T}, Discard a card, Sacrifice this token: Draw a card.\")",manaCost:"{R}",power:"1",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/8/e8fe855c-fe94-4de7-a033-9892a9d6ee0e.jpg?1736468269",normal:"https://cards.scryfall.io/normal/front/e/8/e8fe855c-fe94-4de7-a033-9892a9d6ee0e.jpg?1736468269"}},
              {name:"Cast into the Fire",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Choose one \u00e2\u20ac\u201d\n\u00e2\u20ac\u00a2 Cast into the Fire deals 1 damage to each of up to two target creatures.\n\u00e2\u20ac\u00a2 Exile target artifact.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/e/2ef878cb-27b6-47d8-ad11-bd20529b0e7e.jpg?1686968832",normal:"https://cards.scryfall.io/normal/front/2/e/2ef878cb-27b6-47d8-ad11-bd20529b0e7e.jpg?1686968832"}},
              {name:"Bojuka Bog",manaValue:0,colorIdentity:["B"],typeLine:"Land",oracleText:"This land enters tapped.\nWhen this land enters, exile target player's graveyard.\n{T}: Add {B}.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/0/b0c6fb5e-07e2-4d22-be19-60592f00584a.jpg?1752945235",normal:"https://cards.scryfall.io/normal/front/b/0/b0c6fb5e-07e2-4d22-be19-60592f00584a.jpg?1752945235"}},
              {name:"Brainstorm",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Draw three cards, then put two cards from your hand on top of your library in any order.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/b/8beb987c-1b67-4a4e-ae71-58547afad2a0.jpg?1726284649",normal:"https://cards.scryfall.io/normal/front/8/b/8beb987c-1b67-4a4e-ae71-58547afad2a0.jpg?1726284649"}},
              {name:"Fanatical Offering",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"As an additional cost to cast this spell, sacrifice an artifact or creature.\nDraw two cards and create a Map token. (It's an artifact with \"{1}, {T}, Sacrifice this token: Target creature you control explores. Activate only as a sorcery.\")",manaCost:"{1}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/8/d896dd52-b134-4b55-ab91-ccb05ecc50f4.jpg?1699044130",normal:"https://cards.scryfall.io/normal/front/d/8/d896dd52-b134-4b55-ab91-ccb05ecc50f4.jpg?1699044130"}},
              {name:"Annul",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target artifact or enchantment spell.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/f/4feeebea-aa55-4599-ab5a-4e41a54d0dfd.jpg?1752946732",normal:"https://cards.scryfall.io/normal/front/4/f/4feeebea-aa55-4599-ab5a-4e41a54d0dfd.jpg?1752946732"}},
              {name:"Weather the Storm",manaValue:2,colors:["G"],colorIdentity:["G"],typeLine:"Instant",oracleText:"You gain 3 life.\nStorm (When you cast this spell, copy it for each spell cast before it this turn.)",manaCost:"{1}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/6/f6a9fa51-78c3-42e6-8c2e-39658f59ed87.jpg?1562202265",normal:"https://cards.scryfall.io/normal/front/f/6/f6a9fa51-78c3-42e6-8c2e-39658f59ed87.jpg?1562202265"}},
              {name:"Dispel",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target instant spell.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/c/bceab6b3-6b64-4964-a501-ce806a6c13ad.jpg?1562939587",normal:"https://cards.scryfall.io/normal/front/b/c/bceab6b3-6b64-4964-a501-ce806a6c13ad.jpg?1562939587"}},
              {name:"Breath Weapon",manaValue:3,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Breath Weapon deals 2 damage to each non-Dragon creature.",manaCost:"{2}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/1/0174e40a-0ef5-4439-91e6-3fc39f482520.jpg?1674136462",normal:"https://cards.scryfall.io/normal/front/0/1/0174e40a-0ef5-4439-91e6-3fc39f482520.jpg?1674136462"}},
              {name:"Ichor Wellspring",manaValue:2,typeLine:"Artifact",oracleText:"When this artifact enters or is put into a graveyard from the battlefield, draw a card.",manaCost:"{2}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/c/1ccdb407-ac8f-4736-89d3-ab0d086096ea.jpg?1625978684",normal:"https://cards.scryfall.io/normal/front/1/c/1ccdb407-ac8f-4736-89d3-ab0d086096ea.jpg?1625978684"}},
              {name:"Faerie Macabre",manaValue:3,colors:["B"],colorIdentity:["B"],typeLine:"Creature \u00e2\u20ac\u201d Faerie Rogue",oracleText:"Flying\nDiscard this card: Exile up to two target cards from graveyards.",manaCost:"{1}{B}{B}",power:"2",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/2/62103ceb-b16d-48ea-af42-d3df88d1ee4c.jpg?1562918100",normal:"https://cards.scryfall.io/normal/front/6/2/62103ceb-b16d-48ea-af42-d3df88d1ee4c.jpg?1562918100"}},
              {name:"Sneaky Snacker",manaValue:2,colors:["B", "U"],colorIdentity:["B", "U"],typeLine:"Creature \u00e2\u20ac\u201d Faerie Rogue",oracleText:"Flying\nWhen you draw your third card in a turn, return this card from your graveyard to the battlefield tapped.",manaCost:"{U}{B}",power:"2",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/e/0e3aedae-e4bb-48e3-9f8b-bea0430df306.jpg?1717332127",normal:"https://cards.scryfall.io/normal/front/0/e/0e3aedae-e4bb-48e3-9f8b-bea0430df306.jpg?1717332127"}},
              {name:"Duress",manaValue:1,colors:["B"],colorIdentity:["B"],typeLine:"Sorcery",oracleText:"Target opponent reveals their hand. You choose a noncreature, nonland card from it. That player discards that card.",manaCost:"{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/4/34c3a894-ee75-4db9-a69f-711bb3cc150a.jpg?1730490899",normal:"https://cards.scryfall.io/normal/front/3/4/34c3a894-ee75-4db9-a69f-711bb3cc150a.jpg?1730490899"}},
              {name:"Avenging Hunter",manaValue:5,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u00e2\u20ac\u201d Dragon Ranger",oracleText:"Trample\nWhen this creature enters, you take the initiative.",manaCost:"{4}{G}",power:"5",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/4/f4072640-0f9b-4f0a-84cc-eda415cc92e7.jpg?1674136957",normal:"https://cards.scryfall.io/normal/front/f/4/f4072640-0f9b-4f0a-84cc-eda415cc92e7.jpg?1674136957"}},
              {name:"End the Festivities",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"End the Festivities deals 1 damage to each opponent and each creature and planeswalker they control.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/e/bec748e6-7245-4a71-aeee-cefed8346948.jpg?1643591154",normal:"https://cards.scryfall.io/normal/front/b/e/bec748e6-7245-4a71-aeee-cefed8346948.jpg?1643591154"}},
              {name:"Lembas",manaValue:2,typeLine:"Artifact \u00e2\u20ac\u201d Food",oracleText:"When this artifact enters, scry 1, then draw a card.\n{2}, {T}, Sacrifice this artifact: You gain 3 life.\nWhen this artifact is put into a graveyard from the battlefield, its owner shuffles it into their library.",manaCost:"{2}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/b/3b46aacf-b31a-4380-9e4b-82795fbaba3b.jpg?1686970202",normal:"https://cards.scryfall.io/normal/front/3/b/3b46aacf-b31a-4380-9e4b-82795fbaba3b.jpg?1686970202"}},
              {name:"Eviscerator's Insight",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"As an additional cost to cast this spell, sacrifice an artifact or creature.\nDraw two cards.\nFlashback {4}{B} (You may cast this card from your graveyard for its flashback cost and any additional costs. Then exile it.)",manaCost:"{1}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/0/b00573bd-5bbb-4531-a0bb-a40f62b92b88.jpg?1717011960",normal:"https://cards.scryfall.io/normal/front/b/0/b00573bd-5bbb-4531-a0bb-a40f62b92b88.jpg?1717011960"}},
              {name:"Generous Ent",manaValue:6,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u00e2\u20ac\u201d Treefolk",oracleText:"Reach\nWhen this creature enters, create a Food token. (It's an artifact with \"{2}, {T}, Sacrifice this token: You gain 3 life.\")\nForestcycling {1} ({1}, Discard this card: Search your library for a Forest card, reveal it, put it into your hand, then shuffle.)",manaCost:"{5}{G}",power:"5",toughness:"7",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/5/85d22d5d-3875-42ff-b51e-c6e21db201f5.jpg?1687210970",normal:"https://cards.scryfall.io/normal/front/8/5/85d22d5d-3875-42ff-b51e-c6e21db201f5.jpg?1687210970"}},
              {name:"Galvanic Blast",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Galvanic Blast deals 2 damage to any target.\nMetalcraft \u00e2\u20ac\u201d Galvanic Blast deals 4 damage instead if you control three or more artifacts.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/c/0cf8cb1e-314a-4894-82df-f9812825f52e.jpg?1599706326",normal:"https://cards.scryfall.io/normal/front/0/c/0cf8cb1e-314a-4894-82df-f9812825f52e.jpg?1599706326"}},
              {name:"Vault of Whispers",manaValue:0,colorIdentity:["B"],typeLine:"Artifact Land",oracleText:"{T}: Add {B}.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/8/e85e4098-f872-4aa4-a71a-208b6090be28.jpg?1726285577",normal:"https://cards.scryfall.io/normal/front/e/8/e85e4098-f872-4aa4-a71a-208b6090be28.jpg?1726285577"}},
              {name:"Faithless Looting",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"Draw two cards, then discard two cards.\nFlashback {2}{R} (You may cast this card from your graveyard for its flashback cost. Then exile it.)",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/4/c43aeb5a-8bdc-4aa9-89d1-156f97ac38aa.jpg?1743206665",normal:"https://cards.scryfall.io/normal/front/c/4/c43aeb5a-8bdc-4aa9-89d1-156f97ac38aa.jpg?1743206665"}},
              {name:"Grab the Prize",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"As an additional cost to cast this spell, discard a card.\nDraw two cards. If the discarded card wasn't a land card, Grab the Prize deals 2 damage to each opponent.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/0/50895202-f1a1-4840-a11a-55b78b8b5929.jpg?1726286361",normal:"https://cards.scryfall.io/normal/front/5/0/50895202-f1a1-4840-a11a-55b78b8b5929.jpg?1726286361"}},
              {name:"Fiery Temper",manaValue:3,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Fiery Temper deals 3 damage to any target.\nMadness {R} (If you discard this card, discard it into exile. When you do, cast it for its madness cost or put it into your graveyard.)",manaCost:"{1}{R}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/d/1d3a3a1d-c393-4a57-8a0e-5907d1722331.jpg?1736468138",normal:"https://cards.scryfall.io/normal/front/1/d/1d3a3a1d-c393-4a57-8a0e-5907d1722331.jpg?1736468138"}},
              {name:"Nyxborn Hydra",manaValue:1,colors:["G"],colorIdentity:["G"],typeLine:"Enchantment Creature \u00e2\u20ac\u201d Hydra",oracleText:"Bestow {X}{G}{G} (If you cast this card for its bestow cost, it's an Aura spell with enchant creature. It becomes a creature again if it's not attached.)\nReach, trample\nThis permanent enters with X +1/+1 counters on it.\nEnchanted creature gets +1/+1 for each +1/+1 counter on this Aura and has reach and trample.",manaCost:"{X}{G}",power:"0",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/0/902a969e-9f22-4e92-93eb-9d4536ca82e5.jpg?1717012540",normal:"https://cards.scryfall.io/normal/front/9/0/902a969e-9f22-4e92-93eb-9d4536ca82e5.jpg?1717012540"}},
              {name:"Highway Robbery",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"You may discard a card or sacrifice a land. If you do, draw two cards.\nPlot {1}{R} (You may pay {1}{R} and exile this card from your hand. Cast it as a sorcery on a later turn without paying its mana cost. Plot only as a sorcery.)",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/1/31a88429-9204-4a23-a7a8-babbd6bab79f.jpg?1712355775",normal:"https://cards.scryfall.io/normal/front/3/1/31a88429-9204-4a23-a7a8-babbd6bab79f.jpg?1712355775"}},
              {name:"Great Furnace",manaValue:0,colorIdentity:["R"],typeLine:"Artifact Land",oracleText:"{T}: Add {R}.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/4/74c5bb44-d72c-4c1a-a38f-86b4a8f49ae1.jpg?1752945336",normal:"https://cards.scryfall.io/normal/front/7/4/74c5bb44-d72c-4c1a-a38f-86b4a8f49ae1.jpg?1752945336"}},
              {name:"Fireblast",manaValue:6,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"You may sacrifice two Mountains rather than pay this spell's mana cost.\nFireblast deals 4 damage to any target.",manaCost:"{4}{R}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/0/a0ab67cc-b553-4451-9cda-0e5fe3303940.jpg?1763420180",normal:"https://cards.scryfall.io/normal/front/a/0/a0ab67cc-b553-4451-9cda-0e5fe3303940.jpg?1763420180"}},
              {name:"Searing Blaze",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Searing Blaze deals 1 damage to target player or planeswalker and 1 damage to target creature that player or that planeswalker's controller controls.\nLandfall \u00e2\u20ac\u201d If you had a land enter the battlefield under your control this turn, Searing Blaze deals 3 damage to that player or planeswalker and 3 damage to that creature instead.",manaCost:"{R}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/6/f659d464-13dd-49e2-a842-098dcba49659.jpg?1581708594",normal:"https://cards.scryfall.io/normal/front/f/6/f659d464-13dd-49e2-a842-098dcba49659.jpg?1581708594"}},
              {name:"Extract a Confession",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Sorcery",oracleText:"As an additional cost to cast this spell, you may collect evidence 6. (Exile cards with total mana value 6 or greater from your graveyard.)\nEach opponent sacrifices a creature of their choice. If evidence was collected, instead each opponent sacrifices a creature with the greatest power among creatures they control.",manaCost:"{1}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/5/256c8b6e-4031-458b-8eb9-bbfe58405a0c.jpg?1706241687",normal:"https://cards.scryfall.io/normal/front/2/5/256c8b6e-4031-458b-8eb9-bbfe58405a0c.jpg?1706241687"}},
              {name:"Refurbished Familiar",manaValue:4,colors:["B"],colorIdentity:["B"],typeLine:"Artifact Creature \u00e2\u20ac\u201d Zombie Rat",oracleText:"Affinity for artifacts (This spell costs {1} less to cast for each artifact you control.)\nFlying\nWhen this creature enters, each opponent discards a card. For each opponent who can't, you draw a card.",manaCost:"{3}{B}",power:"2",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/3/b338e078-629c-4cac-bd1d-e1f0a132728d.jpg?1717012055",normal:"https://cards.scryfall.io/normal/front/b/3/b338e078-629c-4cac-bd1d-e1f0a132728d.jpg?1717012055"}},
              {name:"Snuff Out",manaValue:4,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"If you control a Swamp, you may pay 4 life rather than pay this spell's mana cost.\nDestroy target nonblack creature. It can't be regenerated.",manaCost:"{3}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/5/75bbe89f-09af-494e-b58e-271f64bde4b5.jpg?1764758700",normal:"https://cards.scryfall.io/normal/front/7/5/75bbe89f-09af-494e-b58e-271f64bde4b5.jpg?1764758700"}},
              {name:"Lead the Stampede",manaValue:3,colors:["G"],colorIdentity:["G"],typeLine:"Sorcery",oracleText:"Look at the top five cards of your library. You may reveal any number of creature cards from among them and put the revealed cards into your hand. Put the rest on the bottom of your library in any order.",manaCost:"{2}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/e/9e76b676-c7a3-4de6-a78d-3059a0df83f2.jpg?1591227752",normal:"https://cards.scryfall.io/normal/front/9/e/9e76b676-c7a3-4de6-a78d-3059a0df83f2.jpg?1591227752"}},
              {name:"Murmuring Mystic",manaValue:4,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u00e2\u20ac\u201d Human Wizard",oracleText:"Whenever you cast an instant or sorcery spell, create a 1/1 blue Bird Illusion creature token with flying.",manaCost:"{3}{U}",power:"1",toughness:"5",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/e/9e68dcc2-bba4-4efa-97bb-3ed892037595.jpg?1712592825",normal:"https://cards.scryfall.io/normal/front/9/e/9e68dcc2-bba4-4efa-97bb-3ed892037595.jpg?1712592825"}},
              {name:"Winding Way",manaValue:2,colors:["G"],colorIdentity:["G"],typeLine:"Sorcery",oracleText:"Choose creature or land. Reveal the top four cards of your library. Put all cards of the chosen type revealed this way into your hand and the rest into your graveyard.",manaCost:"{1}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/3/d3340062-3071-4d8e-98f8-fd3343a011ad.jpg?1712354656",normal:"https://cards.scryfall.io/normal/front/d/3/d3340062-3071-4d8e-98f8-fd3343a011ad.jpg?1712354656"}},
              {name:"Masked Vandal",manaValue:2,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u00e2\u20ac\u201d Shapeshifter",oracleText:"Changeling (This card is every creature type.)\nWhen this creature enters, you may exile a creature card from your graveyard. If you do, exile target artifact or enchantment an opponent controls.",manaCost:"{1}{G}",power:"1",toughness:"3",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/0/f0a9c72a-e450-41e3-80e5-06f2f1171245.jpg?1631050675",normal:"https://cards.scryfall.io/normal/front/f/0/f0a9c72a-e450-41e3-80e5-06f2f1171245.jpg?1631050675"}},
              {name:"Drossforge Bridge",manaValue:0,colorIdentity:["B", "R"],typeLine:"Artifact Land",oracleText:"This land enters tapped.\nIndestructible\n{T}: Add {B} or {R}.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/b/5b46b8d8-723a-4752-b97d-29ef83bd294c.jpg?1626099621",normal:"https://cards.scryfall.io/normal/front/5/b/5b46b8d8-723a-4752-b97d-29ef83bd294c.jpg?1626099621"}},
              {name:"Experimental Synthesizer",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Artifact",oracleText:"When this artifact enters or leaves the battlefield, exile the top card of your library. Until end of turn, you may play that card.\n{2}{R}, Sacrifice this artifact: Create a 2/2 white Samurai creature token with vigilance. Activate only as a sorcery.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/4/c47931c9-685d-4b83-8299-bc347224b4e8.jpg?1654567579",normal:"https://cards.scryfall.io/normal/front/c/4/c47931c9-685d-4b83-8299-bc347224b4e8.jpg?1654567579"}},
              {name:"Chromatic Star",manaValue:1,typeLine:"Artifact",oracleText:"{1}, {T}, Sacrifice this artifact: Add one mana of any color.\nWhen this artifact is put into a graveyard from the battlefield, draw a card.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/2/c2e8d492-2c67-410b-b556-c157a14c4cec.jpg?1681724919",normal:"https://cards.scryfall.io/normal/front/c/2/c2e8d492-2c67-410b-b556-c157a14c4cec.jpg?1681724919"}},
              {name:"Makeshift Munitions",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Enchantment",oracleText:"{1}, Sacrifice an artifact or creature: This enchantment deals 1 damage to any target.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/0/60715b6d-b223-431a-85d8-27d7c05469b2.jpg?1689998038",normal:"https://cards.scryfall.io/normal/front/6/0/60715b6d-b223-431a-85d8-27d7c05469b2.jpg?1689998038"}},
              {name:"Krark-Clan Shaman",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Creature \u00e2\u20ac\u201d Goblin Shaman",oracleText:"Sacrifice an artifact: This creature deals 1 damage to each creature without flying.",manaCost:"{R}",power:"1",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/7/975f9ea8-af2c-456f-acd0-ffa9ea0d98c1.jpg?1562151699",normal:"https://cards.scryfall.io/normal/front/9/7/975f9ea8-af2c-456f-acd0-ffa9ea0d98c1.jpg?1562151699"}}
            ]
          },
          modern: {
            label: 'Modern Top 100',
            cardData: [
              {name:"Consign to Memory",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Replicate {1} (When you cast this spell, copy it for each time you paid its replicate cost. You may choose new targets for the copies.)\nCounter target triggered ability or colorless spell.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/c/bc95af55-d1dd-4fe6-adb0-3ad6db20d986.jpg?1717011640",normal:"https://cards.scryfall.io/normal/front/b/c/bc95af55-d1dd-4fe6-adb0-3ad6db20d986.jpg?1717011640"}},
              {name:"Flooded Strand",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for a Plains or Island card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/f/8f85e12c-196b-4459-b81f-0c9c854e9f57.jpg?1717012985",normal:"https://cards.scryfall.io/normal/front/8/f/8f85e12c-196b-4459-b81f-0c9c854e9f57.jpg?1717012985"}},
              {name:"Arid Mesa",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for a Mountain or Plains card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/5/25ac5405-df7b-4097-914a-022cb18e20d4.jpg?1738703645",normal:"https://cards.scryfall.io/normal/front/2/5/25ac5405-df7b-4097-914a-022cb18e20d4.jpg?1738703645"}},
              {name:"Mystical Dispute",manaValue:3,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"This spell costs {2} less to cast if it targets a blue spell.\nCounter target spell unless its controller pays {3}.",manaCost:"{2}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/b/fbe04cb8-a8b9-4241-baae-b398a2509a3a.jpg?1572489956",normal:"https://cards.scryfall.io/normal/front/f/b/fbe04cb8-a8b9-4241-baae-b398a2509a3a.jpg?1572489956"}},
              {name:"Wrath of the Skies",manaValue:2,colors:["W"],colorIdentity:["W"],typeLine:"Sorcery",oracleText:"You get X {E} (energy counters), then you may pay any amount of {E}. Destroy each artifact, creature, and enchantment with mana value less than or equal to the amount of {E} paid this way.",manaCost:"{X}{W}{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/e/4ef1882e-b422-4f30-8a6c-bd71c2601660.jpg?1717011598",normal:"https://cards.scryfall.io/normal/front/4/e/4ef1882e-b422-4f30-8a6c-bd71c2601660.jpg?1717011598"}},
              {name:"Sacred Foundry",manaValue:0,colorIdentity:["R", "W"],typeLine:"Land \u2014 Mountain Plains",oracleText:"({T}: Add {R} or {W}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/b/8b4e2642-3c87-4708-b9b4-2e7f7359ac7d.jpg?1752947600",normal:"https://cards.scryfall.io/normal/front/8/b/8b4e2642-3c87-4708-b9b4-2e7f7359ac7d.jpg?1752947600"}},
              {name:"Damping Sphere",manaValue:2,typeLine:"Artifact",oracleText:"If a land is tapped for two or more mana, it produces {C} instead of any other type and amount.\nEach spell a player casts costs {1} more to cast for each other spell that player has cast this turn.",manaCost:"{2}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/5/550860b4-887d-423a-8add-816c2a8da615.jpg?1675200943",normal:"https://cards.scryfall.io/normal/front/5/5/550860b4-887d-423a-8add-816c2a8da615.jpg?1675200943"}},
              {name:"Elegant Parlor",manaValue:0,colorIdentity:["R", "W"],typeLine:"Land \u2014 Mountain Plains",oracleText:"({T}: Add {R} or {W}.)\nThis land enters tapped.\nWhen this land enters, surveil 1. (Look at the top card of your library. You may put it into your graveyard.)",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/2/72c6d541-e2cb-4d6e-acac-90a8f53b7006.jpg?1759236525",normal:"https://cards.scryfall.io/normal/front/7/2/72c6d541-e2cb-4d6e-acac-90a8f53b7006.jpg?1759236525"}},
              {name:"Scalding Tarn",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for an Island or Mountain card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/1/71e491c5-8c07-449b-b2f1-ffa052e6d311.jpg?1738703652",normal:"https://cards.scryfall.io/normal/front/7/1/71e491c5-8c07-449b-b2f1-ffa052e6d311.jpg?1738703652"}},
              {name:"Phlage, Titan of Fire's Fury",manaValue:3,colors:["R", "W"],colorIdentity:["R", "W"],typeLine:"Legendary Creature \u2014 Elder Giant",oracleText:"When Phlage enters, sacrifice it unless it escaped.\nWhenever Phlage enters or attacks, it deals 3 damage to any target and you gain 3 life.\nEscape\u2014{R}{R}{W}{W}, Exile five other cards from your graveyard. (You may cast this card from your graveyard for its escape cost.)",manaCost:"{1}{R}{W}",power:"6",toughness:"6",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/4/e419cd0b-2449-4cc5-9ead-b9e45e271700.jpg?1717012789",normal:"https://cards.scryfall.io/normal/front/e/4/e419cd0b-2449-4cc5-9ead-b9e45e271700.jpg?1717012789"}},
              {name:"Arena of Glory",manaValue:0,colorIdentity:["R"],typeLine:"Land",oracleText:"This land enters tapped unless you control a Mountain.\n{T}: Add {R}.\n{R}, {T}, Exert this land: Add {R}{R}. If that mana is spent on a creature spell, it gains haste until end of turn. (An exerted permanent won't untap during your next untap step.)",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/d/dd148edc-9e43-41aa-bb50-f912115d3e72.jpg?1717047864",normal:"https://cards.scryfall.io/normal/front/d/d/dd148edc-9e43-41aa-bb50-f912115d3e72.jpg?1717047864"}},
              {name:"Steam Vents",manaValue:0,colorIdentity:["R", "U"],typeLine:"Land \u2014 Island Mountain",oracleText:"({T}: Add {U} or {R}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/6/b66daa94-d367-4812-9f18-f35378c1febb.jpg?1759144847",normal:"https://cards.scryfall.io/normal/front/b/6/b66daa94-d367-4812-9f18-f35378c1febb.jpg?1759144847"}},
              {name:"Vexing Bauble",manaValue:1,typeLine:"Artifact",oracleText:"Whenever a player casts a spell, if no mana was spent to cast it, counter that spell.\n{1}, {T}, Sacrifice this artifact: Draw a card.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/9/29f11089-658f-42e6-aeb0-09b512ad2479.jpg?1734350193",normal:"https://cards.scryfall.io/normal/front/2/9/29f11089-658f-42e6-aeb0-09b512ad2479.jpg?1734350193"}},
              {name:"Ragavan, Nimble Pilferer",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Legendary Creature \u2014 Monkey Pirate",oracleText:"Whenever Ragavan deals combat damage to a player, create a Treasure token and exile the top card of that player's library. Until end of turn, you may cast that card.\nDash {1}{R} (You may cast this spell for its dash cost. If you do, it gains haste, and it's returned from the battlefield to its owner's hand at the beginning of the next end step.)",manaCost:"{R}",power:"2",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/9/a9738cda-adb1-47fb-9f4c-ecd930228c4d.jpg?1681963138",normal:"https://cards.scryfall.io/normal/front/a/9/a9738cda-adb1-47fb-9f4c-ecd930228c4d.jpg?1681963138"}},
              {name:"Celestial Purge",manaValue:2,colors:["W"],colorIdentity:["W"],typeLine:"Instant",oracleText:"Exile target black or red permanent.",manaCost:"{1}{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/d/cd38afd4-d7a4-493d-bdea-72be9a1d9a07.jpg?1562267422",normal:"https://cards.scryfall.io/normal/front/c/d/cd38afd4-d7a4-493d-bdea-72be9a1d9a07.jpg?1562267422"}},
              {name:"Wooded Foothills",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for a Mountain or Forest card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/e/4e11ea8a-f895-438d-a3b7-f070238e4161.jpg?1717013111",normal:"https://cards.scryfall.io/normal/front/4/e/4e11ea8a-f895-438d-a3b7-f070238e4161.jpg?1717013111"}},
              {name:"Surgical Extraction",manaValue:1,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"({B/P} can be paid with either {B} or 2 life.)\nChoose target card in a graveyard other than a basic land card. Search its owner's graveyard, hand, and library for any number of cards with the same name as that card and exile them. Then that player shuffles.",manaCost:"{B/P}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/1/e15d76ac-1c23-4503-8225-375ac2bf2fb6.jpg?1673147668",normal:"https://cards.scryfall.io/normal/front/e/1/e15d76ac-1c23-4503-8225-375ac2bf2fb6.jpg?1673147668"}},
              {name:"High Noon",manaValue:2,colors:["W"],colorIdentity:["R", "W"],typeLine:"Enchantment",oracleText:"Each player can't cast more than one spell each turn.\n{4}{R}, Sacrifice this enchantment: It deals 5 damage to any target.",manaCost:"{1}{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/9/9995e0e6-7c9c-4fef-8fd2-8fb1622e6ec8.jpg?1712355285",normal:"https://cards.scryfall.io/normal/front/9/9/9995e0e6-7c9c-4fef-8fd2-8fb1622e6ec8.jpg?1712355285"}},
              {name:"Marsh Flats",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for a Plains or Swamp card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/d/9db3ba6d-eb7f-4f5b-9a3b-c6239c3baa42.jpg?1738703598",normal:"https://cards.scryfall.io/normal/front/9/d/9db3ba6d-eb7f-4f5b-9a3b-c6239c3baa42.jpg?1738703598"}},
              {name:"Obsidian Charmaw",manaValue:5,colors:["R"],colorIdentity:["R"],typeLine:"Creature \u2014 Dragon",oracleText:"This spell costs {1} less to cast for each land your opponents control that could produce {C}.\nFlying\nWhen this creature enters, destroy target nonbasic land an opponent controls.",manaCost:"{3}{R}{R}",power:"4",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/e/ee6d08be-a6fc-44a5-932d-b6a8705534c0.jpg?1626096898",normal:"https://cards.scryfall.io/normal/front/e/e/ee6d08be-a6fc-44a5-932d-b6a8705534c0.jpg?1626096898"}},
              {name:"Orim's Chant",manaValue:1,colors:["W"],colorIdentity:["W"],typeLine:"Instant",oracleText:"Kicker {W} (You may pay an additional {W} as you cast this spell.)\nTarget player can't cast spells this turn. If this spell was kicked, creatures can't attack this turn.",manaCost:"{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/e/ee241079-1e5a-4224-b9cb-4fd3e0da687c.jpg?1717013552",normal:"https://cards.scryfall.io/normal/front/e/e/ee241079-1e5a-4224-b9cb-4fd3e0da687c.jpg?1717013552"}},
              {name:"Thundering Falls",manaValue:0,colorIdentity:["R", "U"],typeLine:"Land \u2014 Island Mountain",oracleText:"({T}: Add {U} or {R}.)\nThis land enters tapped.\nWhen this land enters, surveil 1. (Look at the top card of your library. You may put it into your graveyard.)",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/7/17260fff-b239-4af4-9306-3236ae3fa5a5.jpg?1759236532",normal:"https://cards.scryfall.io/normal/front/1/7/17260fff-b239-4af4-9306-3236ae3fa5a5.jpg?1759236532"}},
              {name:"Galvanic Discharge",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Choose target creature or planeswalker. You get {E}{E}{E} (three energy counters), then you may pay any amount of {E}. Galvanic Discharge deals that much damage to that permanent.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/2/32aa6e33-221f-414c-9b51-850d97a7e051.jpg?1717012186",normal:"https://cards.scryfall.io/normal/front/3/2/32aa6e33-221f-414c-9b51-850d97a7e051.jpg?1717012186"}},
              {name:"Fatal Push",manaValue:1,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"Destroy target creature if it has mana value 2 or less.\nRevolt \u2014 Destroy that creature if it has mana value 4 or less instead if a permanent left the battlefield under your control this turn.",manaCost:"{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/e/6e9d8fe4-fd9b-4923-92bf-7dd6b8fa02e7.jpg?1598304715",normal:"https://cards.scryfall.io/normal/front/6/e/6e9d8fe4-fd9b-4923-92bf-7dd6b8fa02e7.jpg?1598304715"}},
              {name:"Blood Moon",manaValue:3,colors:["R"],colorIdentity:["R"],typeLine:"Enchantment",oracleText:"Nonbasic lands are Mountains.",manaCost:"{2}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/0/d072e9ca-aae7-45dc-8025-3ce590bae63f.jpg?1753711840",normal:"https://cards.scryfall.io/normal/front/d/0/d072e9ca-aae7-45dc-8025-3ce590bae63f.jpg?1753711840"}},
              {name:"Force of Negation",manaValue:3,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"If it's not your turn, you may exile a blue card from your hand rather than pay this spell's mana cost.\nCounter target noncreature spell. If that spell is countered this way, exile it instead of putting it into its owner's graveyard.",manaCost:"{1}{U}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/8/1825a719-1b2a-4af9-9cd2-7cb497cd0317.jpg?1770635208",normal:"https://cards.scryfall.io/normal/front/1/8/1825a719-1b2a-4af9-9cd2-7cb497cd0317.jpg?1770635208"}},
              {name:"Polluted Delta",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for an Island or Swamp card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/e/6e288374-2b71-4ace-b1d2-a19fee6cb4af.jpg?1717013017",normal:"https://cards.scryfall.io/normal/front/6/e/6e288374-2b71-4ace-b1d2-a19fee6cb4af.jpg?1717013017"}},
              {name:"Prismatic Ending",manaValue:1,colors:["W"],colorIdentity:["W"],typeLine:"Sorcery",oracleText:"Converge \u2014 Exile target nonland permanent if its mana value is less than or equal to the number of colors of mana spent to cast this spell.",manaCost:"{X}{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/2/825969b9-3c70-4fca-8cab-696e9ca7cdb2.jpg?1626093920",normal:"https://cards.scryfall.io/normal/front/8/2/825969b9-3c70-4fca-8cab-696e9ca7cdb2.jpg?1626093920"}},
              {name:"Guide of Souls",manaValue:1,colors:["W"],colorIdentity:["W"],typeLine:"Creature \u2014 Human Cleric",oracleText:"Whenever another creature you control enters, you gain 1 life and get {E} (an energy counter).\nWhenever you attack, you may pay {E}{E}{E}. When you do, put two +1/+1 counters and a flying counter on target attacking creature. It becomes an Angel in addition to its other types.",manaCost:"{W}",power:"1",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/6/76c3cad2-1e25-4abe-878d-9194de6fcc27.jpg?1763472842",normal:"https://cards.scryfall.io/normal/front/7/6/76c3cad2-1e25-4abe-878d-9194de6fcc27.jpg?1763472842"}},
              {name:"Ocelot Pride",manaValue:1,colors:["W"],colorIdentity:["W"],typeLine:"Creature \u2014 Cat",oracleText:"First strike, lifelink\nAscend (If you control ten or more permanents, you get the city's blessing for the rest of the game.)\nAt the beginning of your end step, if you gained life this turn, create a 1/1 white Cat creature token. Then if you have the city's blessing, for each token you control that entered this turn, create a token that's a copy of it.",manaCost:"{W}",power:"1",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/9/89cf6f57-230f-497e-a14e-ad1e8737fd42.jpg?1717011506",normal:"https://cards.scryfall.io/normal/front/8/9/89cf6f57-230f-497e-a14e-ad1e8737fd42.jpg?1717011506"}},
              {name:"Bloodstained Mire",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for a Swamp or Mountain card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/7/579743fe-f71e-4cb2-8629-d6b02ed1591d.jpg?1717012950",normal:"https://cards.scryfall.io/normal/front/5/7/579743fe-f71e-4cb2-8629-d6b02ed1591d.jpg?1717012950"}},
              {name:"Watery Grave",manaValue:0,colorIdentity:["B", "U"],typeLine:"Land \u2014 Island Swamp",oracleText:"({T}: Add {U} or {B}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/b/5b8170dc-6a90-46fc-9989-7575f3d402b5.jpg?1752947617",normal:"https://cards.scryfall.io/normal/front/5/b/5b8170dc-6a90-46fc-9989-7575f3d402b5.jpg?1752947617"}},
              {name:"Teferi, Time Raveler",manaValue:3,colors:["U", "W"],colorIdentity:["U", "W"],typeLine:"Legendary Planeswalker \u2014 Teferi",oracleText:"Each opponent can cast spells only any time they could cast a sorcery.\n+1: Until your next turn, you may cast sorcery spells as though they had flash.\n\u22123: Return up to one target artifact, creature, or enchantment to its owner's hand. Draw a card.",manaCost:"{1}{W}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/6/662fe50f-d75c-422c-8c6c-1f9b5c4ba21f.jpg?1702429729",normal:"https://cards.scryfall.io/normal/front/6/6/662fe50f-d75c-422c-8c6c-1f9b5c4ba21f.jpg?1702429729"}},
              {name:"Lightning Bolt",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Lightning Bolt deals 3 damage to any target.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/7/77c6fa74-5543-42ac-9ead-0e890b188e99.jpg?1706239968",normal:"https://cards.scryfall.io/normal/front/7/7/77c6fa74-5543-42ac-9ead-0e890b188e99.jpg?1706239968"}},
              {name:"Thraben Charm",manaValue:2,colors:["W"],colorIdentity:["W"],typeLine:"Instant",oracleText:"Choose one \u2014\n\u2022 Thraben Charm deals damage equal to twice the number of creatures you control to target creature.\n\u2022 Destroy target enchantment.\n\u2022 Exile any number of target players' graveyards.",manaCost:"{1}{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/d/dd28a646-f38f-4cdf-948c-969cd979e5e6.jpg?1717011565",normal:"https://cards.scryfall.io/normal/front/d/d/dd28a646-f38f-4cdf-948c-969cd979e5e6.jpg?1717011565"}},
              {name:"Windswept Heath",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for a Forest or Plains card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/d/bd1d13f7-fd38-4f0b-a8e0-1eac78668117.jpg?1717013102",normal:"https://cards.scryfall.io/normal/front/b/d/bd1d13f7-fd38-4f0b-a8e0-1eac78668117.jpg?1717013102"}},
              {name:"Voice of Victory",manaValue:2,colors:["W"],colorIdentity:["W"],typeLine:"Creature \u2014 Human Bard",oracleText:"Mobilize 2 (Whenever this creature attacks, create two tapped and attacking 1/1 red Warrior creature tokens. Sacrifice them at the beginning of the next end step.)\nYour opponents can't cast spells during your turn.",manaCost:"{1}{W}",power:"1",toughness:"3",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/c/ec3de5f4-bb55-4ab9-995f-f3e0dc22c1bb.jpg?1758215927",normal:"https://cards.scryfall.io/normal/front/e/c/ec3de5f4-bb55-4ab9-995f-f3e0dc22c1bb.jpg?1758215927"}},
              {name:"Boseiju, Who Endures",manaValue:0,colorIdentity:["G"],typeLine:"Legendary Land",oracleText:"{T}: Add {G}.\nChannel \u2014 {1}{G}, Discard this card: Destroy target artifact, enchantment, or nonbasic land an opponent controls. That player may search their library for a land card with a basic land type, put it onto the battlefield, then shuffle. This ability costs {1} less to activate for each legendary creature you control.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/1/2135ac5a-187b-4dc9-8f82-34e8d1603416.jpg?1654568912",normal:"https://cards.scryfall.io/normal/front/2/1/2135ac5a-187b-4dc9-8f82-34e8d1603416.jpg?1654568912"}},
              {name:"Ajani, Nacatl Pariah // Ajani, Nacatl Avenger",manaValue:2,colorIdentity:["R", "W"],typeLine:"Legendary Creature \u2014 Cat Warrior // Legendary Planeswalker \u2014 Ajani",isCreature:true,imageUris:{art_crop:"",normal:""}},
              {name:"Goblin Bombardment",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Enchantment",oracleText:"Sacrifice a creature: This enchantment deals 1 damage to any target.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/2/e262f55e-9239-4a97-a19e-9b08fb34502e.jpg?1626100483",normal:"https://cards.scryfall.io/normal/front/e/2/e262f55e-9239-4a97-a19e-9b08fb34502e.jpg?1626100483"}},
              {name:"Seasoned Pyromancer",manaValue:3,colors:["R"],colorIdentity:["R"],typeLine:"Creature \u2014 Human Shaman",oracleText:"When this creature enters, discard two cards, then draw two cards. For each nonland card discarded this way, create a 1/1 red Elemental creature token.\n{3}{R}{R}, Exile this card from your graveyard: Create two 1/1 red Elemental creature tokens.",manaCost:"{1}{R}{R}",power:"2",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/4/1427f615-8430-426e-a669-f9fe12033ac4.jpg?1673147897",normal:"https://cards.scryfall.io/normal/front/1/4/1427f615-8430-426e-a669-f9fe12033ac4.jpg?1673147897"}},
              {name:"Dismember",manaValue:3,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"({B/P} can be paid with either {B} or 2 life.)\nTarget creature gets -5/-5 until end of turn.",manaCost:"{1}{B/P}{B/P}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/d/3d286cf6-3e16-4941-9326-1818b1e06d69.jpg?1562261132",normal:"https://cards.scryfall.io/normal/front/3/d/3d286cf6-3e16-4941-9326-1818b1e06d69.jpg?1562261132"}},
              {name:"The Legend of Roku // Avatar Roku",manaValue:4,colorIdentity:["R"],typeLine:"Enchantment \u2014 Saga // Legendary Creature \u2014 Avatar",isCreature:true,imageUris:{art_crop:"",normal:""}},
              {name:"Undercity Sewers",manaValue:0,colorIdentity:["B", "U"],typeLine:"Land \u2014 Island Swamp",oracleText:"({T}: Add {U} or {B}.)\nThis land enters tapped.\nWhen this land enters, surveil 1. (Look at the top card of your library. You may put it into your graveyard.)",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/b/2b5801fb-2026-4f25-98bc-ebb2f99684b9.jpg?1759236533",normal:"https://cards.scryfall.io/normal/front/2/b/2b5801fb-2026-4f25-98bc-ebb2f99684b9.jpg?1759236533"}},
              {name:"Misty Rainforest",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for a Forest or Island card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/8/88231c0d-0cc8-44ec-bf95-81d1710ac141.jpg?1738703648",normal:"https://cards.scryfall.io/normal/front/8/8/88231c0d-0cc8-44ec-bf95-81d1710ac141.jpg?1738703648"}},
              {name:"Hallowed Fountain",manaValue:0,colorIdentity:["U", "W"],typeLine:"Land \u2014 Plains Island",oracleText:"({T}: Add {W} or {U}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/0/e056b55f-82ed-4fe0-ab0c-bb20fa4a218a.jpg?1759144845",normal:"https://cards.scryfall.io/normal/front/e/0/e056b55f-82ed-4fe0-ab0c-bb20fa4a218a.jpg?1759144845"}},
              {name:"Mishra's Bauble",manaValue:0,typeLine:"Artifact",oracleText:"{T}, Sacrifice this artifact: Look at the top card of target player's library. Draw a card at the beginning of the next turn's upkeep.",manaCost:"{0}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/5/45bbbf9b-8fee-4c32-a513-02dac6ac8a39.jpg?1669300401",normal:"https://cards.scryfall.io/normal/front/4/5/45bbbf9b-8fee-4c32-a513-02dac6ac8a39.jpg?1669300401"}},
              {name:"Thoughtseize",manaValue:1,colors:["B"],colorIdentity:["B"],typeLine:"Sorcery",oracleText:"Target player reveals their hand. You choose a nonland card from it. That player discards that card. You lose 2 life.",manaCost:"{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/2/b281a308-ab6b-47b6-bec7-632c9aaecede.jpg?1599706001",normal:"https://cards.scryfall.io/normal/front/b/2/b281a308-ab6b-47b6-bec7-632c9aaecede.jpg?1599706001"}},
              {name:"Sink into Stupor // Soporific Springs",manaValue:3,colorIdentity:["U"],typeLine:"Instant // Land",isCreature:false,imageUris:{art_crop:"",normal:""}},
              {name:"Ranger-Captain of Eos",manaValue:3,colors:["W"],colorIdentity:["W"],typeLine:"Creature \u2014 Human Soldier Ranger",oracleText:"When this creature enters, you may search your library for a creature card with mana value 1 or less, reveal it, put it into your hand, then shuffle.\nSacrifice this creature: Your opponents can't cast noncreature spells this turn.",manaCost:"{1}{W}{W}",power:"3",toughness:"3",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/f/af3928b4-813a-4120-8799-de34235d60ac.jpg?1710406366",normal:"https://cards.scryfall.io/normal/front/a/f/af3928b4-813a-4120-8799-de34235d60ac.jpg?1710406366"}},
              {name:"Meticulous Archive",manaValue:0,colorIdentity:["U", "W"],typeLine:"Land \u2014 Plains Island",oracleText:"({T}: Add {W} or {U}.)\nThis land enters tapped.\nWhen this land enters, surveil 1. (Look at the top card of your library. You may put it into your graveyard.)",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/5/652236c2-84ef-45e4-b5fc-ed6170bc3d6c.jpg?1759236529",normal:"https://cards.scryfall.io/normal/front/6/5/652236c2-84ef-45e4-b5fc-ed6170bc3d6c.jpg?1759236529"}},
              {name:"Solitude",manaValue:5,colors:["W"],colorIdentity:["W"],typeLine:"Creature \u2014 Elemental Incarnation",oracleText:"Flash\nLifelink\nWhen this creature enters, exile up to one other target creature. That creature's controller gains life equal to its power.\nEvoke\u2014Exile a white card from your hand.",manaCost:"{3}{W}{W}",power:"3",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/7/47a6234f-309f-4e03-9263-66da48b57153.jpg?1763472875",normal:"https://cards.scryfall.io/normal/front/4/7/47a6234f-309f-4e03-9263-66da48b57153.jpg?1763472875"}},
              {name:"Spell Snare",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target spell with mana value 2.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/7/b7551b61-656e-4f37-b9da-73174db983b7.jpg?1767659595",normal:"https://cards.scryfall.io/normal/front/b/7/b7551b61-656e-4f37-b9da-73174db983b7.jpg?1767659595"}},
              {name:"Tormod's Crypt",manaValue:0,typeLine:"Artifact",oracleText:"{T}, Sacrifice this artifact: Exile target player's graveyard.",manaCost:"{0}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/5/752bf493-5839-47e8-95f2-6d8201907428.jpg?1675201100",normal:"https://cards.scryfall.io/normal/front/7/5/752bf493-5839-47e8-95f2-6d8201907428.jpg?1675201100"}},
              {name:"Quantum Riddler",manaValue:5,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u2014 Sphinx",oracleText:"Flying\nWhen this creature enters, draw a card.\nAs long as you have one or fewer cards in hand, if you would draw one or more cards, you draw that many cards plus one instead.\nWarp {1}{U}",manaCost:"{3}{U}{U}",power:"4",toughness:"6",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/2/120be808-ff3b-4fca-96a1-4db6b9825856.jpg?1752946843",normal:"https://cards.scryfall.io/normal/front/1/2/120be808-ff3b-4fca-96a1-4db6b9825856.jpg?1752946843"}},
              {name:"Breeding Pool",manaValue:0,colorIdentity:["G", "U"],typeLine:"Land \u2014 Forest Island",oracleText:"({T}: Add {G} or {U}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/c/3c750d5a-f743-41ff-b5ba-02025ca0bec2.jpg?1752947580",normal:"https://cards.scryfall.io/normal/front/3/c/3c750d5a-f743-41ff-b5ba-02025ca0bec2.jpg?1752947580"}},
              {name:"Otawara, Soaring City",manaValue:0,colorIdentity:["U"],typeLine:"Legendary Land",oracleText:"{T}: Add {U}.\nChannel \u2014 {3}{U}, Discard this card: Return target artifact, creature, enchantment, or planeswalker to its owner's hand. This ability costs {1} less to activate for each legendary creature you control.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/8/486d7edc-d983-41f0-8b78-c99aecd72996.jpg?1654568960",normal:"https://cards.scryfall.io/normal/front/4/8/486d7edc-d983-41f0-8b78-c99aecd72996.jpg?1654568960"}},
              {name:"Dalkovan Encampment",manaValue:0,colorIdentity:["W"],typeLine:"Land",oracleText:"This land enters tapped unless you control a Swamp or a Mountain.\n{T}: Add {W}.\n{2}{W}, {T}: Whenever you attack this turn, create two 1/1 red Warrior creature tokens that are tapped and attacking. Sacrifice them at the beginning of the next end step.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/8/98ad5f0c-8775-4e89-8e92-84a6ade93e35.jpg?1743205000",normal:"https://cards.scryfall.io/normal/front/9/8/98ad5f0c-8775-4e89-8e92-84a6ade93e35.jpg?1743205000"}},
              {name:"Endurance",manaValue:3,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Elemental Incarnation",oracleText:"Flash\nReach\nWhen this creature enters, up to one target player puts all the cards from their graveyard on the bottom of their library in a random order.\nEvoke\u2014Exile a green card from your hand.",manaCost:"{1}{G}{G}",power:"3",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/7/b770471c-1bf7-4179-8418-dcd790ca5405.jpg?1770635221",normal:"https://cards.scryfall.io/normal/front/b/7/b770471c-1bf7-4179-8418-dcd790ca5405.jpg?1770635221"}},
              {name:"Eldrazi Temple",manaValue:0,typeLine:"Land",oracleText:"{T}: Add {C}.\n{T}: Add {C}{C}. Spend this mana only to cast colorless Eldrazi spells or activate abilities of colorless Eldrazi.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/b/cbab7e1f-305e-4733-aa70-b27285740925.jpg?1770635039",normal:"https://cards.scryfall.io/normal/front/c/b/cbab7e1f-305e-4733-aa70-b27285740925.jpg?1770635039"}},
              {name:"Kozilek's Command",manaValue:2,typeLine:"Kindred Instant \u2014 Eldrazi",oracleText:"Choose two \u2014\n\u2022 Target player creates X 0/1 colorless Eldrazi Spawn creature tokens with \"Sacrifice this token: Add {C}.\"\n\u2022 Target player scries X, then draws a card.\n\u2022 Exile target creature with mana value X or less.\n\u2022 Exile up to X target cards from graveyards.",manaCost:"{X}{C}{C}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/2/92585587-cfdc-406a-9114-4f6dd8802c37.jpg?1740308391",normal:"https://cards.scryfall.io/normal/front/9/2/92585587-cfdc-406a-9114-4f6dd8802c37.jpg?1740308391"}},
              {name:"Urza's Saga",manaValue:0,typeLine:"Enchantment Land \u2014 Urza's Saga",oracleText:"(As this Saga enters and after your draw step, add a lore counter. Sacrifice after III.)\nI \u2014 This Saga gains \"{T}: Add {C}.\"\nII \u2014 This Saga gains \"{2}, {T}: Create a 0/0 colorless Construct artifact creature token with 'This token gets +1/+1 for each artifact you control.'\"\nIII \u2014 Search your library for an artifact card with mana cost {0} or {1}, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/1/c1e0f201-42cb-46a1-901a-65bb4fc18f6c.jpg?1667318301",normal:"https://cards.scryfall.io/normal/front/c/1/c1e0f201-42cb-46a1-901a-65bb4fc18f6c.jpg?1667318301"}},
              {name:"Subtlety",manaValue:4,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u2014 Elemental Incarnation",oracleText:"Flash\nFlying\nWhen this creature enters, choose up to one target creature spell or planeswalker spell. Its owner puts it on their choice of the top or bottom of their library.\nEvoke\u2014Exile a blue card from your hand.",manaCost:"{2}{U}{U}",power:"3",toughness:"3",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/0/701256d5-1389-48b7-9581-d6037209bd06.jpg?1717470483",normal:"https://cards.scryfall.io/normal/front/7/0/701256d5-1389-48b7-9581-d6037209bd06.jpg?1717470483"}},
              {name:"Force of Vigor",manaValue:4,colors:["G"],colorIdentity:["G"],typeLine:"Instant",oracleText:"If it's not your turn, you may exile a green card from your hand rather than pay this spell's mana cost.\nDestroy up to two target artifacts and/or enchantments.",manaCost:"{2}{G}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/1/017c415b-d635-43c6-92b8-8c95d1c4ff8d.jpg?1770635204",normal:"https://cards.scryfall.io/normal/front/0/1/017c415b-d635-43c6-92b8-8c95d1c4ff8d.jpg?1770635204"}},
              {name:"Hedge Maze",manaValue:0,colorIdentity:["G", "U"],typeLine:"Land \u2014 Forest Island",oracleText:"({T}: Add {G} or {U}.)\nThis land enters tapped.\nWhen this land enters, surveil 1. (Look at the top card of your library. You may put it into your graveyard.)",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/2/5260f8ae-805b-4eae-badf-62de0f768867.jpg?1759236526",normal:"https://cards.scryfall.io/normal/front/5/2/5260f8ae-805b-4eae-badf-62de0f768867.jpg?1759236526"}},
              {name:"Orcish Bowmasters",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Creature \u2014 Orc Archer",oracleText:"Flash\nWhen this creature enters and whenever an opponent draws a card except the first one they draw in each of their draw steps, this creature deals 1 damage to any target. Then amass Orcs 1.",manaCost:"{1}{B}",power:"1",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/c/7c024bae-5631-4e20-ac69-df392ac9e109.jpg?1745319944",normal:"https://cards.scryfall.io/normal/front/7/c/7c024bae-5631-4e20-ac69-df392ac9e109.jpg?1745319944"}},
              {name:"Meltdown",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"Destroy each artifact with mana value X or less.",manaCost:"{X}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/7/173369d2-dc39-4bfe-a602-b47156570365.jpg?1717013684",normal:"https://cards.scryfall.io/normal/front/1/7/173369d2-dc39-4bfe-a602-b47156570365.jpg?1717013684"}},
              {name:"Harbinger of the Seas",manaValue:3,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u2014 Merfolk Wizard",oracleText:"Nonbasic lands are Islands.",manaCost:"{1}{U}{U}",power:"2",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/0/00212714-a410-4cbc-bf1c-f90d7d77378c.jpg?1770635212",normal:"https://cards.scryfall.io/normal/front/0/0/00212714-a410-4cbc-bf1c-f90d7d77378c.jpg?1770635212"}},
              {name:"Verdant Catacombs",manaValue:0,typeLine:"Land",oracleText:"{T}, Pay 1 life, Sacrifice this land: Search your library for a Swamp or Forest card, put it onto the battlefield, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/4/94c229ea-90da-4aa0-bfda-b162fb3b5b8b.jpg?1738703665",normal:"https://cards.scryfall.io/normal/front/9/4/94c229ea-90da-4aa0-bfda-b162fb3b5b8b.jpg?1738703665"}},
              {name:"Fiery Islet",manaValue:0,colorIdentity:["R", "U"],typeLine:"Land",oracleText:"{T}, Pay 1 life: Add {U} or {R}.\n{1}, {T}, Sacrifice this land: Draw a card.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/3/a3aab13c-9d9d-4507-ae5d-da979990ae1b.jpg?1562202552",normal:"https://cards.scryfall.io/normal/front/a/3/a3aab13c-9d9d-4507-ae5d-da979990ae1b.jpg?1562202552"}},
              {name:"Sunbaked Canyon",manaValue:0,colorIdentity:["R", "W"],typeLine:"Land",oracleText:"{T}, Pay 1 life: Add {R} or {W}.\n{1}, {T}, Sacrifice this land: Draw a card.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/3/c36820fa-ee86-4206-9a0d-737a67cf5208.jpg?1562202603",normal:"https://cards.scryfall.io/normal/front/c/3/c36820fa-ee86-4206-9a0d-737a67cf5208.jpg?1562202603"}},
              {name:"Ugin's Labyrinth",manaValue:0,typeLine:"Land",oracleText:"Imprint \u2014 When this land enters, you may exile a colorless card with mana value 7 or greater from your hand.\n{T}: Add {C}. If a card is exiled with this land, add {C}{C} instead.\n{T}: Return the exiled card to its owner's hand.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/2/020e1348-1a35-4cc8-bad6-9fbddfa79277.jpg?1717013086",normal:"https://cards.scryfall.io/normal/front/0/2/020e1348-1a35-4cc8-bad6-9fbddfa79277.jpg?1717013086"}},
              {name:"Nihil Spellbomb",manaValue:1,colorIdentity:["B"],typeLine:"Artifact",oracleText:"{T}, Sacrifice this artifact: Exile target player's graveyard.\nWhen this artifact is put into a graveyard from the battlefield, you may pay {B}. If you do, draw a card.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/5/e5892a23-efae-4731-9b8f-41c87960fe93.jpg?1562442193",normal:"https://cards.scryfall.io/normal/front/e/5/e5892a23-efae-4731-9b8f-41c87960fe93.jpg?1562442193"}},
              {name:"Malevolent Rumble",manaValue:2,colors:["G"],colorIdentity:["G"],typeLine:"Sorcery",oracleText:"Reveal the top four cards of your library. You may put a permanent card from among them into your hand. Put the rest into your graveyard. Create a 0/1 colorless Eldrazi Spawn creature token with \"Sacrifice this token: Add {C}.\"",manaCost:"{1}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/1/a178cfe8-f9fa-4255-88d0-54a0bed079f5.jpg?1717012517",normal:"https://cards.scryfall.io/normal/front/a/1/a178cfe8-f9fa-4255-88d0-54a0bed079f5.jpg?1717012517"}},
              {name:"Unholy Heat",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Unholy Heat deals 2 damage to target creature or planeswalker.\nDelirium \u2014 Unholy Heat deals 6 damage instead if there are four or more card types among cards in your graveyard.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/e/4e879386-b1f8-4f2a-9820-6e1291746f88.jpg?1727263711",normal:"https://cards.scryfall.io/normal/front/4/e/4e879386-b1f8-4f2a-9820-6e1291746f88.jpg?1727263711"}},
              {name:"Gemstone Caverns",manaValue:0,typeLine:"Legendary Land",oracleText:"If this card is in your opening hand and you're not the starting player, you may begin the game with Gemstone Caverns on the battlefield with a luck counter on it. If you do, exile a card from your hand.\n{T}: Add {C}. If Gemstone Caverns has a luck counter on it, instead add one mana of any color.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/f/7f273641-c5f3-48bc-b89e-3cff52d26a0b.jpg?1619399338",normal:"https://cards.scryfall.io/normal/front/7/f/7f273641-c5f3-48bc-b89e-3cff52d26a0b.jpg?1619399338"}},
              {name:"Ephemerate",manaValue:1,colors:["W"],colorIdentity:["W"],typeLine:"Instant",oracleText:"Exile target creature you control, then return it to the battlefield under its owner's control.\nRebound (If you cast this spell from your hand, exile it as it resolves. At the beginning of your next upkeep, you may cast this card from exile without paying its mana cost.)",manaCost:"{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/d/2da5f3f8-5eef-498f-ba2c-2f3fbc3745aa.jpg?1562201088",normal:"https://cards.scryfall.io/normal/front/2/d/2da5f3f8-5eef-498f-ba2c-2f3fbc3745aa.jpg?1562201088"}},
              {name:"Devourer of Destiny",manaValue:7,typeLine:"Creature \u2014 Eldrazi",oracleText:"You may reveal this card from your opening hand. If you do, at the beginning of your first upkeep, look at the top four cards of your library. You may put one of those cards back on top of your library. Exile the rest.\nWhen you cast this spell, exile target permanent that's one or more colors.",manaCost:"{5}{C}{C}",power:"6",toughness:"6",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/6/560debcd-feb4-4534-991e-a7aa1cca2409.jpg?1740308386",normal:"https://cards.scryfall.io/normal/front/5/6/560debcd-feb4-4534-991e-a7aa1cca2409.jpg?1740308386"}},
              {name:"Engineered Explosives",manaValue:0,typeLine:"Artifact",oracleText:"Sunburst (This artifact enters with a charge counter on it for each color of mana spent to cast it.)\n{2}, Sacrifice this artifact: Destroy each nonland permanent with mana value equal to the number of charge counters on this artifact.",manaCost:"{X}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/2/420bf1e9-f2ec-4dff-b540-e64de71e58be.jpg?1599709112",normal:"https://cards.scryfall.io/normal/front/4/2/420bf1e9-f2ec-4dff-b540-e64de71e58be.jpg?1599709112"}},
              {name:"Walking Ballista",manaValue:0,typeLine:"Artifact Creature \u2014 Construct",oracleText:"This creature enters with X +1/+1 counters on it.\n{4}: Put a +1/+1 counter on this creature.\nRemove a +1/+1 counter from this creature: It deals 1 damage to any target.",manaCost:"{X}{X}",power:"0",toughness:"0",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/2/5272436e-74f0-44c4-a291-ea8ebc3f1525.jpg?1599710252",normal:"https://cards.scryfall.io/normal/front/5/2/5272436e-74f0-44c4-a291-ea8ebc3f1525.jpg?1599710252"}},
              {name:"Godless Shrine",manaValue:0,colorIdentity:["B", "W"],typeLine:"Land \u2014 Plains Swamp",oracleText:"({T}: Add {W} or {B}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/c/8c542ea4-98c3-4c2d-9066-205ab7aa697a.jpg?1752947593",normal:"https://cards.scryfall.io/normal/front/8/c/8c542ea4-98c3-4c2d-9066-205ab7aa697a.jpg?1752947593"}},
              {name:"Counterspell",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target spell.",manaCost:"{U}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/f/4f616706-ec97-4923-bb1e-11a69fbaa1f8.jpg?1751282477",normal:"https://cards.scryfall.io/normal/front/4/f/4f616706-ec97-4923-bb1e-11a69fbaa1f8.jpg?1751282477"}},
              {name:"Ashiok, Dream Render",manaValue:3,colors:["B", "U"],colorIdentity:["B", "U"],typeLine:"Legendary Planeswalker \u2014 Ashiok",oracleText:"Spells and abilities your opponents control can't cause their controller to search their library.\n\u22121: Target player mills four cards. Then exile each opponent's graveyard.",manaCost:"{1}{U/B}{U/B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/2/f2df3258-c053-48a8-974f-d80899b2cd93.jpg?1557577343",normal:"https://cards.scryfall.io/normal/front/f/2/f2df3258-c053-48a8-974f-d80899b2cd93.jpg?1557577343"}},
              {name:"Grafdigger's Cage",manaValue:1,typeLine:"Artifact",oracleText:"Creature cards in graveyards and libraries can't enter the battlefield.\nPlayers can't cast spells from graveyards or libraries.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/a/0a135e09-b534-4836-9a10-3a9a4a9f8c53.jpg?1592517646",normal:"https://cards.scryfall.io/normal/front/0/a/0a135e09-b534-4836-9a10-3a9a4a9f8c53.jpg?1592517646"}},
              {name:"Trinisphere",manaValue:3,typeLine:"Artifact",oracleText:"As long as this artifact is untapped, each spell that would cost less than three mana to cast costs three mana to cast. (Additional mana in the cost may be paid with any color of mana or colorless mana. For example, a spell that would cost {1}{B} to cast costs {2}{B} to cast instead.)",manaCost:"{3}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/1/316caa4e-a53a-460b-978c-5f0fba7bc549.jpg?1745319935",normal:"https://cards.scryfall.io/normal/front/3/1/316caa4e-a53a-460b-978c-5f0fba7bc549.jpg?1745319935"}},
              {name:"Spell Pierce",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target noncreature spell unless its controller pays {2}.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/d/8dd4374f-0301-4b2e-bc99-2cd19568cb3b.jpg?1738359138",normal:"https://cards.scryfall.io/normal/front/8/d/8dd4374f-0301-4b2e-bc99-2cd19568cb3b.jpg?1738359138"}},
              {name:"Pithing Needle",manaValue:1,typeLine:"Artifact",oracleText:"As this artifact enters, choose a card name.\nActivated abilities of sources with the chosen name can't be activated unless they're mana abilities.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/7/776899f8-e977-42b7-8b54-6f726a349e3c.jpg?1673149414",normal:"https://cards.scryfall.io/normal/front/7/7/776899f8-e977-42b7-8b54-6f726a349e3c.jpg?1673149414"}},
              {name:"Phelia, Exuberant Shepherd",manaValue:2,colors:["W"],colorIdentity:["W"],typeLine:"Legendary Creature \u2014 Dog",oracleText:"Flash\nWhenever Phelia attacks, exile up to one other target nonland permanent. At the beginning of the next end step, return that card to the battlefield under its owner's control. If it entered under your control, put a +1/+1 counter on Phelia.",manaCost:"{1}{W}",power:"2",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/5/55707746-da6e-46e5-a5ca-7ac843fdc38e.jpg?1717011522",normal:"https://cards.scryfall.io/normal/front/5/5/55707746-da6e-46e5-a5ca-7ac843fdc38e.jpg?1717011522"}},
              {name:"Glaring Fleshraker",manaValue:3,typeLine:"Creature \u2014 Eldrazi Drone",oracleText:"Whenever you cast a colorless spell, create a 0/1 colorless Eldrazi Spawn creature token with \"Sacrifice this token: Add {C}.\"\nWhenever another colorless creature you control enters, this creature deals 1 damage to each opponent.",manaCost:"{2}{C}",power:"2",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/0/80c2a3c7-1486-4ff9-88ec-79ec67a437f8.jpg?1717011246",normal:"https://cards.scryfall.io/normal/front/8/0/80c2a3c7-1486-4ff9-88ec-79ec67a437f8.jpg?1717011246"}},
              {name:"Formidable Speaker",manaValue:3,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Elf Druid",oracleText:"When this creature enters, you may discard a card. If you do, search your library for a creature card, reveal it, put it into your hand, then shuffle.\n{1}, {T}: Untap another target permanent.",manaCost:"{2}{G}",power:"2",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/6/265522eb-4f6a-40e7-b374-3833fa63c80b.jpg?1765118668",normal:"https://cards.scryfall.io/normal/front/2/6/265522eb-4f6a-40e7-b374-3833fa63c80b.jpg?1765118668"}},
              {name:"Valakut Awakening // Valakut Stoneforge",manaValue:3,colorIdentity:["R"],typeLine:"Instant // Land",isCreature:false,imageUris:{art_crop:"",normal:""}},
              {name:"Overgrown Tomb",manaValue:0,colorIdentity:["B", "G"],typeLine:"Land \u2014 Swamp Forest",oracleText:"({T}: Add {B} or {G}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/5/45b92924-baa1-4c9b-9932-9a5eda8f3446.jpg?1759144847",normal:"https://cards.scryfall.io/normal/front/4/5/45b92924-baa1-4c9b-9932-9a5eda8f3446.jpg?1759144847"}},
              {name:"Soulless Jailer",manaValue:2,typeLine:"Artifact Creature \u2014 Phyrexian Golem",oracleText:"Permanent cards in graveyards can't enter the battlefield.\nPlayers can't cast noncreature spells from graveyards or exile.",manaCost:"{2}",power:"0",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/f/bf9991fd-ea6a-4ed7-b5f1-46a95f8d0634.jpg?1675957252",normal:"https://cards.scryfall.io/normal/front/b/f/bf9991fd-ea6a-4ed7-b5f1-46a95f8d0634.jpg?1675957252"}},
              {name:"Manamorphose",manaValue:2,colors:["G", "R"],colorIdentity:["G", "R"],typeLine:"Instant",oracleText:"Add two mana in any combination of colors.\nDraw a card.",manaCost:"{1}{R/G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/a/faf9070e-14be-4ce5-a19a-6addc79359c1.jpg?1599708170",normal:"https://cards.scryfall.io/normal/front/f/a/faf9070e-14be-4ce5-a19a-6addc79359c1.jpg?1599708170"}},
              {name:"Thought-Knot Seer",manaValue:4,typeLine:"Creature \u2014 Eldrazi",oracleText:"({C} represents colorless mana.)\nWhen this creature enters, target opponent reveals their hand. You choose a nonland card from it and exile that card.\nWhen this creature leaves the battlefield, target opponent draws a card.",manaCost:"{3}{C}",power:"4",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/f/bffc360e-db41-48f3-9365-680d55046e04.jpg?1562933598",normal:"https://cards.scryfall.io/normal/front/b/f/bffc360e-db41-48f3-9365-680d55046e04.jpg?1562933598"}},
              {name:"Disruptor Flute",manaValue:2,typeLine:"Artifact",oracleText:"Flash\nAs this artifact enters, choose a card name.\nSpells with the chosen name cost {3} more to cast.\nActivated abilities of sources with the chosen name can't be activated unless they're mana abilities.",manaCost:"{2}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/c/5cad8671-4761-4014-a8a3-af45627e6e79.jpg?1717470370",normal:"https://cards.scryfall.io/normal/front/5/c/5cad8671-4761-4014-a8a3-af45627e6e79.jpg?1717470370"}},
              {name:"Desperate Ritual",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Instant \u2014 Arcane",oracleText:"Add {R}{R}{R}.\nSplice onto Arcane {1}{R} (As you cast an Arcane spell, you may reveal this card from your hand and pay its splice cost. If you do, add this card's effects to that spell.)",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/8/3825b85d-07df-43b9-a8d8-930863262d83.jpg?1547517210",normal:"https://cards.scryfall.io/normal/front/3/8/3825b85d-07df-43b9-a8d8-930863262d83.jpg?1547517210"}},
              {name:"Pyretic Ritual",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Add {R}{R}{R}.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/e/1e577638-a7ed-4bcc-90fb-0cffe87d5a28.jpg?1562452888",normal:"https://cards.scryfall.io/normal/front/1/e/1e577638-a7ed-4bcc-90fb-0cffe87d5a28.jpg?1562452888"}},
              {name:"Ruby Medallion",manaValue:2,typeLine:"Artifact",oracleText:"Red spells you cast cost {1} less to cast.",manaCost:"{2}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/3/630febf5-58ff-4dab-a5a8-575ebc5435a6.jpg?1717013787",normal:"https://cards.scryfall.io/normal/front/6/3/630febf5-58ff-4dab-a5a8-575ebc5435a6.jpg?1717013787"}},
              {name:"Consult the Star Charts",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Kicker {1}{U} (You may pay an additional {1}{U} as you cast this spell.)\nLook at the top X cards of your library, where X is the number of lands you control. Put one of those cards into your hand. If this spell was kicked, put two of those cards into your hand instead. Put the rest on the bottom of your library in a random order.",manaCost:"{1}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/1/a16a6555-2e3a-4587-aacd-0307d696b26c.jpg?1752946753",normal:"https://cards.scryfall.io/normal/front/a/1/a16a6555-2e3a-4587-aacd-0307d696b26c.jpg?1752946753"}},
              {name:"Grapeshot",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"Grapeshot deals 1 damage to any target.\nStorm (When you cast this spell, copy it for each spell cast before it this turn. You may choose new targets for the copies.)",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/2/923e1291-3999-4f81-ade4-073fb982143f.jpg?1675200032",normal:"https://cards.scryfall.io/normal/front/9/2/923e1291-3999-4f81-ade4-073fb982143f.jpg?1675200032"}},
              {name:"Blood Crypt",manaValue:0,colorIdentity:["B", "R"],typeLine:"Land \u2014 Swamp Mountain",oracleText:"({T}: Add {B} or {R}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/d/6da63cc5-4624-4491-abd9-9b600c3fefe2.jpg?1759144844",normal:"https://cards.scryfall.io/normal/front/6/d/6da63cc5-4624-4491-abd9-9b600c3fefe2.jpg?1759144844"}},
              {name:"Ensnaring Bridge",manaValue:3,typeLine:"Artifact",oracleText:"Creatures with power greater than the number of cards in your hand can't attack.",manaCost:"{3}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/f/cf825a56-4870-463a-a2ef-eec86be891db.jpg?1599709144",normal:"https://cards.scryfall.io/normal/front/c/f/cf825a56-4870-463a-a2ef-eec86be891db.jpg?1599709144"}},
              {name:"Temple Garden",manaValue:0,colorIdentity:["G", "W"],typeLine:"Land \u2014 Forest Plains",oracleText:"({T}: Add {G} or {W}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/c/6cdd2a74-63b3-4ff2-9c5a-a85dee63c3c9.jpg?1759144838",normal:"https://cards.scryfall.io/normal/front/6/c/6cdd2a74-63b3-4ff2-9c5a-a85dee63c3c9.jpg?1759144838"}},
              {name:"Past in Flames",manaValue:4,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"Each instant and sorcery card in your graveyard gains flashback until end of turn. The flashback cost is equal to its mana cost.\nFlashback {4}{R} (You may cast this card from your graveyard for its flashback cost. Then exile it.)",manaCost:"{3}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/b/2b7472f4-37b0-439f-b4ac-80706d40d191.jpg?1593813533",normal:"https://cards.scryfall.io/normal/front/2/b/2b7472f4-37b0-439f-b4ac-80706d40d191.jpg?1593813533"}},
              {name:"Ral, Monsoon Mage // Ral, Leyline Prodigy",manaValue:2,colorIdentity:["R", "U"],typeLine:"Legendary Creature \u2014 Human Wizard // Legendary Planeswalker \u2014 Ral",isCreature:true,imageUris:{art_crop:"",normal:""}},
              {name:"Reckless Impulse",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"Exile the top two cards of your library. Until the end of your next turn, you may play those cards.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/9/6943c07f-ab0d-4f5a-bbe9-c0a83dc98546.jpg?1643591880",normal:"https://cards.scryfall.io/normal/front/6/9/6943c07f-ab0d-4f5a-bbe9-c0a83dc98546.jpg?1643591880"}}
            ]
          },
          standard: {
            label: 'Standard Top 100',
            cardData: [
              {name:"Soul-Guide Lantern",manaValue:1,typeLine:"Artifact",oracleText:"When this artifact enters, exile target card from a graveyard.\n{T}, Sacrifice this artifact: Exile each opponent's graveyard.\n{1}, {T}, Sacrifice this artifact: Draw a card.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/4/f4907e7b-d6d5-4e9b-968f-bce34ae4a577.jpg?1752945184",normal:"https://cards.scryfall.io/normal/front/f/4/f4907e7b-d6d5-4e9b-968f-bce34ae4a577.jpg?1752945184"}},
              {name:"Multiversal Passage",manaValue:0,typeLine:"Land",oracleText:"As this land enters, choose a basic land type. Then you may pay 2 life. If you don't, it enters tapped.\nThis land is the chosen type.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/5/f5fb426a-5618-4dd4-9c51-0cc847be8c1d.jpg?1757378140",normal:"https://cards.scryfall.io/normal/front/f/5/f5fb426a-5618-4dd4-9c51-0cc847be8c1d.jpg?1757378140"}},
              {name:"Spell Snare",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target spell with mana value 2.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/7/b7551b61-656e-4f37-b9da-73174db983b7.jpg?1767659595",normal:"https://cards.scryfall.io/normal/front/b/7/b7551b61-656e-4f37-b9da-73174db983b7.jpg?1767659595"}},
              {name:"Disdainful Stroke",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target spell with mana value 4 or greater.",manaCost:"{1}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/8/588c6217-c460-417e-98bf-de5475780baf.jpg?1693867173",normal:"https://cards.scryfall.io/normal/front/5/8/588c6217-c460-417e-98bf-de5475780baf.jpg?1693867173"}},
              {name:"Annul",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target artifact or enchantment spell.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/f/4feeebea-aa55-4599-ab5a-4e41a54d0dfd.jpg?1752946732",normal:"https://cards.scryfall.io/normal/front/4/f/4feeebea-aa55-4599-ab5a-4e41a54d0dfd.jpg?1752946732"}},
              {name:"Steam Vents",manaValue:0,colorIdentity:["R", "U"],typeLine:"Land \u2014 Island Mountain",oracleText:"({T}: Add {U} or {R}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/6/b66daa94-d367-4812-9f18-f35378c1febb.jpg?1759144847",normal:"https://cards.scryfall.io/normal/front/b/6/b66daa94-d367-4812-9f18-f35378c1febb.jpg?1759144847"}},
              {name:"Sear",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Sear deals 4 damage to target creature or planeswalker.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/e/aeb4612c-758b-4492-ba03-eb6741b4176e.jpg?1767658325",normal:"https://cards.scryfall.io/normal/front/a/e/aeb4612c-758b-4492-ba03-eb6741b4176e.jpg?1767658325"}},
              {name:"Quantum Riddler",manaValue:5,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u2014 Sphinx",oracleText:"Flying\nWhen this creature enters, draw a card.\nAs long as you have one or fewer cards in hand, if you would draw one or more cards, you draw that many cards plus one instead.\nWarp {1}{U}",manaCost:"{3}{U}{U}",power:"4",toughness:"6",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/2/120be808-ff3b-4fca-96a1-4db6b9825856.jpg?1752946843",normal:"https://cards.scryfall.io/normal/front/1/2/120be808-ff3b-4fca-96a1-4db6b9825856.jpg?1752946843"}},
              {name:"Requiting Hex",manaValue:1,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"As an additional cost to cast this spell, you may blight 1. (You may put a -1/-1 counter on a creature you control.)\nDestroy target creature with mana value 2 or less. If this spell's additional cost was paid, you gain 2 life.",manaCost:"{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/2/f21b0fb7-91b6-403f-a81a-562665961276.jpg?1767732705",normal:"https://cards.scryfall.io/normal/front/f/2/f21b0fb7-91b6-403f-a81a-562665961276.jpg?1767732705"}},
              {name:"Spell Pierce",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target noncreature spell unless its controller pays {2}.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/d/8dd4374f-0301-4b2e-bc99-2cd19568cb3b.jpg?1738359138",normal:"https://cards.scryfall.io/normal/front/8/d/8dd4374f-0301-4b2e-bc99-2cd19568cb3b.jpg?1738359138"}},
              {name:"Bitter Triumph",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"As an additional cost to cast this spell, discard a card or pay 3 life.\nDestroy target creature or planeswalker.",manaCost:"{1}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/c/5/c5333556-eea2-41ae-833e-007b9d540700.jpg?1743206444",normal:"https://cards.scryfall.io/normal/front/c/5/c5333556-eea2-41ae-833e-007b9d540700.jpg?1743206444"}},
              {name:"Pyroclasm",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery",oracleText:"Pyroclasm deals 2 damage to each creature.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/3/4391b0af-2f26-4a45-9e2a-5bd8e9838107.jpg?1726286406",normal:"https://cards.scryfall.io/normal/front/4/3/4391b0af-2f26-4a45-9e2a-5bd8e9838107.jpg?1726286406"}},
              {name:"Spirebluff Canal",manaValue:0,colorIdentity:["R", "U"],typeLine:"Land",oracleText:"This land enters tapped unless you control two or fewer other lands.\n{T}: Add {U} or {R}.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/9/59a04e16-a767-4112-ab01-6ca1b09c286c.jpg?1712356382",normal:"https://cards.scryfall.io/normal/front/5/9/59a04e16-a767-4112-ab01-6ca1b09c286c.jpg?1712356382"}},
              {name:"Watery Grave",manaValue:0,colorIdentity:["B", "U"],typeLine:"Land \u2014 Island Swamp",oracleText:"({T}: Add {U} or {B}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/b/5b8170dc-6a90-46fc-9989-7575f3d402b5.jpg?1752947617",normal:"https://cards.scryfall.io/normal/front/5/b/5b8170dc-6a90-46fc-9989-7575f3d402b5.jpg?1752947617"}},
              {name:"Duress",manaValue:1,colors:["B"],colorIdentity:["B"],typeLine:"Sorcery",oracleText:"Target opponent reveals their hand. You choose a noncreature, nonland card from it. That player discards that card.",manaCost:"{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/4/34c3a894-ee75-4db9-a69f-711bb3cc150a.jpg?1730490899",normal:"https://cards.scryfall.io/normal/front/3/4/34c3a894-ee75-4db9-a69f-711bb3cc150a.jpg?1730490899"}},
              {name:"Gloomlake Verge",manaValue:0,colorIdentity:["B", "U"],typeLine:"Land",oracleText:"{T}: Add {U}.\n{T}: Add {B}. Activate only if you control an Island or a Swamp.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/3/83f510b7-4cbd-4883-9c26-c8824bc668ac.jpg?1726286844",normal:"https://cards.scryfall.io/normal/front/8/3/83f510b7-4cbd-4883-9c26-c8824bc668ac.jpg?1726286844"}},
              {name:"Riverpyre Verge",manaValue:0,colorIdentity:["R", "U"],typeLine:"Land",oracleText:"{T}: Add {R}.\n{T}: Add {U}. Activate only if you control an Island or a Mountain.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/7/57a93a71-d77c-417f-85d0-cd420f573331.jpg?1738356929",normal:"https://cards.scryfall.io/normal/front/5/7/57a93a71-d77c-417f-85d0-cd420f573331.jpg?1738356929"}},
              {name:"Starting Town",manaValue:0,typeLine:"Land \u2014 Town",oracleText:"This land enters tapped unless it's your first, second, or third turn of the game.\n{T}: Add {C}.\n{T}, Pay 1 life: Add one mana of any color.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/c/fc7d1912-7e27-49ef-bd98-375d975a42b0.jpg?1748706861",normal:"https://cards.scryfall.io/normal/front/f/c/fc7d1912-7e27-49ef-bd98-375d975a42b0.jpg?1748706861"}},
              {name:"Wan Shi Tong, Librarian",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Legendary Creature \u2014 Bird Spirit",oracleText:"Flash\nFlying, vigilance\nWhen Wan Shi Tong enters, put X +1/+1 counters on him. Then draw half X cards, rounded down.\nWhenever an opponent searches their library, put a +1/+1 counter on Wan Shi Tong and draw a card.",manaCost:"{X}{U}{U}",power:"1",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/2/e20da6b5-1057-4a28-9e85-07de714e262f.jpg?1764120524",normal:"https://cards.scryfall.io/normal/front/e/2/e20da6b5-1057-4a28-9e85-07de714e262f.jpg?1764120524"}},
              {name:"Tishana's Tidebinder",manaValue:3,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u2014 Merfolk Wizard",oracleText:"Flash\nWhen this creature enters, counter up to one target activated or triggered ability. If an ability of an artifact, creature, or planeswalker is countered this way, that permanent loses all abilities for as long as this creature remains on the battlefield. (Mana abilities can't be targeted.)",manaCost:"{2}{U}",power:"3",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/0/907b3d1d-8c85-4707-80b5-c4d832df9846.jpg?1699043973",normal:"https://cards.scryfall.io/normal/front/9/0/907b3d1d-8c85-4707-80b5-c4d832df9846.jpg?1699043973"}},
              {name:"Restless Reef",manaValue:0,colorIdentity:["B", "U"],typeLine:"Land",oracleText:"This land enters tapped.\n{T}: Add {U} or {B}.\n{2}{U}{B}: Until end of turn, this land becomes a 4/4 blue and black Shark creature with deathtouch. It's still a land.\nWhenever this land attacks, target player mills four cards.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/a/8a8121c9-2480-419c-aa9c-5b8b55f65014.jpg?1699044703",normal:"https://cards.scryfall.io/normal/front/8/a/8a8121c9-2480-419c-aa9c-5b8b55f65014.jpg?1699044703"}},
              {name:"Negate",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target noncreature spell.",manaCost:"{1}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/2/52d58fe4-6070-4022-9cd7-c35a11b44525.jpg?1771342360",normal:"https://cards.scryfall.io/normal/front/5/2/52d58fe4-6070-4022-9cd7-c35a11b44525.jpg?1771342360"}},
              {name:"Stock Up",manaValue:3,colors:["U"],colorIdentity:["U"],typeLine:"Sorcery",oracleText:"Look at the top five cards of your library. Put two of them into your hand and the rest on the bottom of your library in any order.",manaCost:"{2}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/a/0a786855-6eb4-42c0-a528-4842db46809d.jpg?1738356263",normal:"https://cards.scryfall.io/normal/front/0/a/0a786855-6eb4-42c0-a528-4842db46809d.jpg?1738356263"}},
              {name:"Shoot the Sheriff",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Instant",oracleText:"Destroy target non-outlaw creature. (Assassins, Mercenaries, Pirates, Rogues, and Warlocks are outlaws. Everyone else is fair game.)",manaCost:"{1}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/8/180d6528-c524-4bb8-8a72-b3775cd2c177.jpg?1712355672",normal:"https://cards.scryfall.io/normal/front/1/8/180d6528-c524-4bb8-8a72-b3775cd2c177.jpg?1712355672"}},
              {name:"Llanowar Elves",manaValue:1,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Elf Druid",oracleText:"{T}: Add {G}.",manaCost:"{G}",power:"1",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/a/6a0b230b-d391-4998-a3f7-7b158a0ec2cd.jpg?1731652605",normal:"https://cards.scryfall.io/normal/front/6/a/6a0b230b-d391-4998-a3f7-7b158a0ec2cd.jpg?1731652605"}},
              {name:"Torpor Orb",manaValue:2,typeLine:"Artifact",oracleText:"Creatures entering don't cause abilities to trigger.",manaCost:"{2}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/b/dbf02a38-d10d-463e-ab99-e7fd848a1bd3.jpg?1770090426",normal:"https://cards.scryfall.io/normal/front/d/b/dbf02a38-d10d-463e-ab99-e7fd848a1bd3.jpg?1770090426"}},
              {name:"Ral, Crackling Wit",manaValue:4,colors:["R", "U"],colorIdentity:["R", "U"],typeLine:"Legendary Planeswalker \u2014 Ral",oracleText:"Whenever you cast a noncreature spell, put a loyalty counter on Ral.\n+1: Create a 1/1 blue and red Otter creature token with prowess.\n\u22123: Draw three cards, then discard two cards.\n\u221210: Draw three cards. You get an emblem with \"Instant and sorcery spells you cast have storm.\" (Whenever you cast an instant or sorcery spell, copy it for each spell cast before it this turn.)",manaCost:"{2}{U}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/c/acfde780-899a-4c5b-a39b-f4a3ff129103.jpg?1721427178",normal:"https://cards.scryfall.io/normal/front/a/c/acfde780-899a-4c5b-a39b-f4a3ff129103.jpg?1721427178"}},
              {name:"Ba Sing Se",manaValue:0,colorIdentity:["G"],typeLine:"Land",oracleText:"This land enters tapped unless you control a basic land.\n{T}: Add {G}.\n{2}{G}, {T}: Earthbend 2. Activate only as a sorcery. (Target land you control becomes a 0/0 creature with haste that's still a land. Put two +1/+1 counters on it. When it dies or is exiled, return it to the battlefield tapped.)",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/d/bdf3b2be-d0cd-4a3c-a10e-82d32c12d3bd.jpg?1764121955",normal:"https://cards.scryfall.io/normal/front/b/d/bdf3b2be-d0cd-4a3c-a10e-82d32c12d3bd.jpg?1764121955"}},
              {name:"Spider-Sense",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Web-slinging {U} (You may cast this spell for {U} if you also return a tapped creature you control to its owner's hand.)\nCounter target instant spell, sorcery spell, or triggered ability.",manaCost:"{1}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/4/4499a25b-f4a5-4f2c-9ebd-bc68c7840b39.jpg?1757377036",normal:"https://cards.scryfall.io/normal/front/4/4/4499a25b-f4a5-4f2c-9ebd-bc68c7840b39.jpg?1757377036"}},
              {name:"Badgermole Cub",manaValue:2,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Badger Mole",oracleText:"When this creature enters, earthbend 1. (Target land you control becomes a 0/0 creature with haste that's still a land. Put a +1/+1 counter on it. When it dies or is exiled, return it to the battlefield tapped.)\nWhenever you tap a creature for mana, add an additional {G}.",manaCost:"{1}{G}",power:"2",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/4/340c5799-4964-44dd-8c48-8f3f3aba5211.jpg?1764121140",normal:"https://cards.scryfall.io/normal/front/3/4/340c5799-4964-44dd-8c48-8f3f3aba5211.jpg?1764121140"}},
              {name:"Winternight Stories",manaValue:3,colors:["U"],colorIdentity:["U"],typeLine:"Sorcery",oracleText:"Draw three cards. Then discard two cards unless you discard a creature card.\nHarmonize {4}{U} (You may cast this card from your graveyard for its harmonize cost. You may tap a creature you control to reduce that cost by {X}, where X is its power. Then exile this spell.)",manaCost:"{2}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/4/64d9367c-f50c-4568-aa63-6760c44ecaeb.jpg?1743204229",normal:"https://cards.scryfall.io/normal/front/6/4/64d9367c-f50c-4568-aa63-6760c44ecaeb.jpg?1743204229"}},
              {name:"Deceit",manaValue:6,colors:["B", "U"],colorIdentity:["B", "U"],typeLine:"Creature \u2014 Elemental Incarnation",oracleText:"When this creature enters, if {U}{U} was spent to cast it, return up to one other target nonland permanent to its owner's hand.\nWhen this creature enters, if {B}{B} was spent to cast it, target opponent reveals their hand. You choose a nonland card from it. That player discards that card.\nEvoke {U/B}{U/B}",manaCost:"{4}{U/B}{U/B}",power:"5",toughness:"5",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/d/bd82c9e4-9871-4e6d-b691-ee00b4b9a3c6.jpg?1759144842",normal:"https://cards.scryfall.io/normal/front/b/d/bd82c9e4-9871-4e6d-b691-ee00b4b9a3c6.jpg?1759144842"}},
              {name:"Fabled Passage",manaValue:0,typeLine:"Land",oracleText:"{T}, Sacrifice this land: Search your library for a basic land card, put it onto the battlefield tapped, then shuffle. Then if you control four or more lands, untap that land.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/c/7c787c6b-b6c7-47a0-8f8d-761629f5568e.jpg?1771424596",normal:"https://cards.scryfall.io/normal/front/7/c/7c787c6b-b6c7-47a0-8f8d-761629f5568e.jpg?1771424596"}},
              {name:"Burst Lightning",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Kicker {4} (You may pay an additional {4} as you cast this spell.)\nBurst Lightning deals 2 damage to any target. If this spell was kicked, it deals 4 damage instead.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/e/aec5d380-d354-4750-931a-6c91853e2edc.jpg?1730489309",normal:"https://cards.scryfall.io/normal/front/a/e/aec5d380-d354-4750-931a-6c91853e2edc.jpg?1730489309"}},
              {name:"Three Steps Ahead",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Spree (Choose one or more additional costs.)\n+ {1}{U} \u2014 Counter target spell.\n+ {3} \u2014 Create a token that's a copy of target artifact or creature you control.\n+ {2} \u2014 Draw two cards, then discard a card.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/f/8fffd839-2337-4a14-9312-cee085a17f4b.jpg?1712860611",normal:"https://cards.scryfall.io/normal/front/8/f/8fffd839-2337-4a14-9312-cee085a17f4b.jpg?1712860611"}},
              {name:"Escape Tunnel",manaValue:0,typeLine:"Land",oracleText:"{T}, Sacrifice this land: Search your library for a basic land card, put it onto the battlefield tapped, then shuffle.\n{T}, Sacrifice this land: Target creature with power 2 or less can't be blocked this turn.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/d/5df90940-15ea-418c-8547-6c75d69ec6d3.jpg?1771424732",normal:"https://cards.scryfall.io/normal/front/5/d/5df90940-15ea-418c-8547-6c75d69ec6d3.jpg?1771424732"}},
              {name:"Icetill Explorer",manaValue:4,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Insect Scout",oracleText:"You may play an additional land on each of your turns.\nYou may play lands from your graveyard.\nLandfall \u2014 Whenever a land you control enters, mill a card.",manaCost:"{2}{G}{G}",power:"2",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/9/d9482aab-6ddf-48e1-84fa-b13d5ff81e69.jpg?1752947338",normal:"https://cards.scryfall.io/normal/front/d/9/d9482aab-6ddf-48e1-84fa-b13d5ff81e69.jpg?1752947338"}},
              {name:"Agna Qel'a",manaValue:0,colorIdentity:["U"],typeLine:"Land",oracleText:"This land enters tapped unless you control a basic land.\n{T}: Add {U}.\n{2}{U}, {T}: Draw a card, then discard a card.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/b/6b885829-a323-4f7d-87c9-aa4615dcbe5c.jpg?1764121943",normal:"https://cards.scryfall.io/normal/front/6/b/6b885829-a323-4f7d-87c9-aa4615dcbe5c.jpg?1764121943"}},
              {name:"Mightform Harmonizer",manaValue:4,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Insect Druid",oracleText:"Landfall \u2014 Whenever a land you control enters, double the power of target creature you control until end of turn.\nWarp {2}{G} (You may cast this card from your hand for its warp cost. Exile this creature at the beginning of the next end step, then you may cast it from exile on a later turn.)",manaCost:"{2}{G}{G}",power:"4",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/3/f32302f1-b54f-4489-9d0b-9b771e59da06.jpg?1752947370",normal:"https://cards.scryfall.io/normal/front/f/3/f32302f1-b54f-4489-9d0b-9b771e59da06.jpg?1752947370"}},
              {name:"Intimidation Tactics",manaValue:1,colors:["B"],colorIdentity:["B"],typeLine:"Sorcery",oracleText:"Target opponent reveals their hand. You choose an artifact or creature card from it. Exile that card.\nCycling {3} ({3}, Discard this card: Draw a card.)",manaCost:"{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/b/9b4e6022-44d2-4dfe-8f7a-51581e298f23.jpg?1738356324",normal:"https://cards.scryfall.io/normal/front/9/b/9b4e6022-44d2-4dfe-8f7a-51581e298f23.jpg?1738356324"}},
              {name:"Abandon Attachments",manaValue:2,colors:["R", "U"],colorIdentity:["R", "U"],typeLine:"Instant \u2014 Lesson",oracleText:"You may discard a card. If you do, draw two cards.",manaCost:"{1}{U/R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/4/74ca45a4-97ab-4255-9129-884e8b42b984.jpg?1764121430",normal:"https://cards.scryfall.io/normal/front/7/4/74ca45a4-97ab-4255-9129-884e8b42b984.jpg?1764121430"}},
              {name:"The Unagi of Kyoshi Island",manaValue:5,colors:["U"],colorIdentity:["U"],typeLine:"Legendary Creature \u2014 Serpent",oracleText:"Flash\nWard\u2014Waterbend {4}. (Whenever this creature becomes the target of a spell or ability an opponent controls, counter it unless that player pays {4}. They can tap their artifacts and creatures to help. Each one pays for {1}.)\nWhenever an opponent draws their second card each turn, you draw two cards.",manaCost:"{3}{U}{U}",power:"5",toughness:"5",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/0/e/0ecd8b38-9ee5-41a5-9b93-21c33fc1a6ff.jpg?1764120514",normal:"https://cards.scryfall.io/normal/front/0/e/0ecd8b38-9ee5-41a5-9b93-21c33fc1a6ff.jpg?1764120514"}},
              {name:"Earthbender Ascension",manaValue:3,colors:["G"],colorIdentity:["G"],typeLine:"Enchantment",oracleText:"When this enchantment enters, earthbend 2. Then search your library for a basic land card, put it onto the battlefield tapped, then shuffle.\nLandfall \u2014 Whenever a land you control enters, put a quest counter on this enchantment. When you do, if it has four or more quest counters on it, put a +1/+1 counter on target creature you control. It gains trample until end of turn.",manaCost:"{2}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/9/590a58ab-5e98-4031-8aa6-ce396dc1429f.jpg?1764121189",normal:"https://cards.scryfall.io/normal/front/5/9/590a58ab-5e98-4031-8aa6-ce396dc1429f.jpg?1764121189"}},
              {name:"Floodpits Drowner",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u2014 Merfolk",oracleText:"Flash\nVigilance\nWhen this creature enters, tap target creature an opponent controls and put a stun counter on it.\n{1}{U}, {T}: Shuffle this creature and target creature with a stun counter on it into their owners' libraries.",manaCost:"{1}{U}",power:"2",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/6/a6a62aa3-8edb-4000-8ebd-15ec4b00eed7.jpg?1726286073",normal:"https://cards.scryfall.io/normal/front/a/6/a6a62aa3-8edb-4000-8ebd-15ec4b00eed7.jpg?1726286073"}},
              {name:"Boomerang Basics",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Sorcery \u2014 Lesson",oracleText:"Return target nonland permanent to its owner's hand. If you controlled that permanent, draw a card.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/7/17ab958a-abc6-472e-ad6a-97c731d89c74.jpg?1764120201",normal:"https://cards.scryfall.io/normal/front/1/7/17ab958a-abc6-472e-ad6a-97c731d89c74.jpg?1764120201"}},
              {name:"Enduring Curiosity",manaValue:4,colors:["U"],colorIdentity:["U"],typeLine:"Enchantment Creature \u2014 Cat Glimmer",oracleText:"Flash\nWhenever a creature you control deals combat damage to a player, draw a card.\nWhen Enduring Curiosity dies, if it was a creature, return it to the battlefield under its owner's control. It's an enchantment. (It's not a creature.)",manaCost:"{2}{U}{U}",power:"4",toughness:"3",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/6/8616629e-08f9-41ad-bfec-f86c8096f1cb.jpg?1726286044",normal:"https://cards.scryfall.io/normal/front/8/6/8616629e-08f9-41ad-bfec-f86c8096f1cb.jpg?1726286044"}},
              {name:"Soulstone Sanctuary",manaValue:0,typeLine:"Land",oracleText:"{T}: Add {C}.\n{4}: This land becomes a 3/3 creature with vigilance and all creature types. It's still a land.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/4/642553a7-6d0f-483d-a873-3a703786db42.jpg?1730489100",normal:"https://cards.scryfall.io/normal/front/6/4/642553a7-6d0f-483d-a873-3a703786db42.jpg?1730489100"}},
              {name:"Flashfreeze",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target red or green spell.",manaCost:"{1}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/1/91e37a7e-6093-4ef5-b6e4-4aa800ddfc1b.jpg?1730490842",normal:"https://cards.scryfall.io/normal/front/9/1/91e37a7e-6093-4ef5-b6e4-4aa800ddfc1b.jpg?1730490842"}},
              {name:"Stormchaser's Talent",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Enchantment \u2014 Class",oracleText:"(Gain the next level as a sorcery to add its ability.)\nWhen this Class enters, create a 1/1 blue and red Otter creature token with prowess.\n{3}{U}: Level 2\nWhen this Class becomes level 2, return target instant or sorcery card from your graveyard to your hand.\n{5}{U}: Level 3\nWhenever you cast an instant or sorcery spell, create a 1/1 blue and red Otter creature token with prowess.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/3/a36e682d-b43d-4e08-bf5b-70d7e924dbe5.jpg?1739650074",normal:"https://cards.scryfall.io/normal/front/a/3/a36e682d-b43d-4e08-bf5b-70d7e924dbe5.jpg?1739650074"}},
              {name:"Monument to Endurance",manaValue:3,typeLine:"Artifact",oracleText:"Whenever you discard a card, choose one that hasn't been chosen this turn \u2014\n\u2022 Draw a card.\n\u2022 Create a Treasure token.\n\u2022 Each opponent loses 3 life.",manaCost:"{3}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/2/d21433ba-0a14-42bc-ad0b-a4ef823a3295.jpg?1738400354",normal:"https://cards.scryfall.io/normal/front/d/2/d21433ba-0a14-42bc-ad0b-a4ef823a3295.jpg?1738400354"}},
              {name:"Superior Spider-Man",manaValue:4,colors:["B", "U"],colorIdentity:["B", "U"],typeLine:"Legendary Creature \u2014 Spider Human Hero",oracleText:"Mind Swap \u2014 You may have Superior Spider-Man enter as a copy of any creature card in a graveyard, except his name is Superior Spider-Man and he's a 4/4 Spider Human Hero in addition to his other types. When you do, exile that card.",manaCost:"{2}{U}{B}",power:"4",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/d/ad4adc3e-ec41-4406-8ff2-59ba8067cf4e.jpg?1758203859",normal:"https://cards.scryfall.io/normal/front/a/d/ad4adc3e-ec41-4406-8ff2-59ba8067cf4e.jpg?1758203859"}},
              {name:"Strategic Betrayal",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Sorcery",oracleText:"Target opponent exiles a creature they control and their graveyard.",manaCost:"{1}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/5/95617742-548d-464a-bb89-a858ffa9018f.jpg?1743204340",normal:"https://cards.scryfall.io/normal/front/9/5/95617742-548d-464a-bb89-a858ffa9018f.jpg?1743204340"}},
              {name:"Ghost Vacuum",manaValue:1,typeLine:"Artifact",oracleText:"{T}: Exile target card from a graveyard.\n{6}, {T}, Sacrifice this artifact: Put each creature card exiled with this artifact onto the battlefield under your control with a flying counter on it. Each of them is a 1/1 Spirit in addition to its other types. Activate only as a sorcery.",manaCost:"{1}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/a/8ac39c01-127f-4471-bc74-11a90c48e306.jpg?1726286797",normal:"https://cards.scryfall.io/normal/front/8/a/8ac39c01-127f-4471-bc74-11a90c48e306.jpg?1726286797"}},
              {name:"Sapling Nursery",manaValue:8,colors:["G"],colorIdentity:["G"],typeLine:"Enchantment",oracleText:"Affinity for Forests (This spell costs {1} less to cast for each Forest you control.)\nLandfall \u2014 Whenever a land you control enters, create a 3/4 green Treefolk creature token with reach.\n{1}{G}, Exile this enchantment: Treefolk and Forests you control gain indestructible until end of turn.",manaCost:"{6}{G}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/1/3199bea9-fef7-45fe-8777-2103d84a9347.jpg?1767862603",normal:"https://cards.scryfall.io/normal/front/3/1/3199bea9-fef7-45fe-8777-2103d84a9347.jpg?1767862603"}},
              {name:"Breeding Pool",manaValue:0,colorIdentity:["G", "U"],typeLine:"Land \u2014 Forest Island",oracleText:"({T}: Add {G} or {U}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/c/3c750d5a-f743-41ff-b5ba-02025ca0bec2.jpg?1752947580",normal:"https://cards.scryfall.io/normal/front/3/c/3c750d5a-f743-41ff-b5ba-02025ca0bec2.jpg?1752947580"}},
              {name:"Essence Scatter",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Counter target creature spell.",manaCost:"{1}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/d/dd05c850-f91e-4ffb-b4cc-8418d49dad90.jpg?1730489174",normal:"https://cards.scryfall.io/normal/front/d/d/dd05c850-f91e-4ffb-b4cc-8418d49dad90.jpg?1730489174"}},
              {name:"Accumulate Wisdom",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant \u2014 Lesson",oracleText:"Look at the top three cards of your library. Put one of those cards into your hand and the rest on the bottom of your library in any order. Put each of those cards into your hand instead if there are three or more Lesson cards in your graveyard.",manaCost:"{1}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/6/a6335319-6c92-40d4-ab2d-c06c79049c30.jpg?1764120188",normal:"https://cards.scryfall.io/normal/front/a/6/a6335319-6c92-40d4-ab2d-c06c79049c30.jpg?1764120188"}},
              {name:"Combustion Technique",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Instant \u2014 Lesson",oracleText:"Combustion Technique deals damage equal to 2 plus the number of Lesson cards in your graveyard to target creature. If that creature would die this turn, exile it instead.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/d/fdcca576-2ef2-44cc-9944-a92bd146444a.jpg?1764120881",normal:"https://cards.scryfall.io/normal/front/f/d/fdcca576-2ef2-44cc-9944-a92bd146444a.jpg?1764120881"}},
              {name:"Firebending Lesson",manaValue:1,colors:["R"],colorIdentity:["R"],typeLine:"Instant \u2014 Lesson",oracleText:"Kicker {4} (You may pay an additional {4} as you cast this spell.)\nFirebending Lesson deals 2 damage to target creature. If this spell was kicked, it deals 5 damage to that creature instead.",manaCost:"{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/a/fa940e68-010e-4b68-be8a-555d7068f7b4.jpg?1764120947",normal:"https://cards.scryfall.io/normal/front/f/a/fa940e68-010e-4b68-be8a-555d7068f7b4.jpg?1764120947"}},
              {name:"It'll Quench Ya!",manaValue:2,colors:["U"],colorIdentity:["U"],typeLine:"Instant \u2014 Lesson",oracleText:"Counter target spell unless its controller pays {2}.",manaCost:"{1}{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/7/47c25e41-f43c-4447-81b5-b9631448bd29.jpg?1764120308",normal:"https://cards.scryfall.io/normal/front/4/7/47c25e41-f43c-4447-81b5-b9631448bd29.jpg?1764120308"}},
              {name:"Gran-Gran",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Legendary Creature \u2014 Human Peasant Ally",oracleText:"Whenever Gran-Gran becomes tapped, draw a card, then discard a card.\nNoncreature spells you cast cost {1} less to cast as long as there are three or more Lesson cards in your graveyard.",manaCost:"{U}",power:"1",toughness:"2",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/f/a/fa434b41-e5f7-4989-865a-95db67b05cb1.jpg?1764120269",normal:"https://cards.scryfall.io/normal/front/f/a/fa434b41-e5f7-4989-865a-95db67b05cb1.jpg?1764120269"}},
              {name:"Artist's Talent",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Enchantment \u2014 Class",oracleText:"(Gain the next level as a sorcery to add its ability.)\nWhenever you cast a noncreature spell, you may discard a card. If you do, draw a card.\n{2}{R}: Level 2\nNoncreature spells you cast cost {1} less to cast.\n{2}{R}: Level 3\nIf a source you control would deal noncombat damage to an opponent or a permanent an opponent controls, it deals that much damage plus 2 instead.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/b/8b9e51d9-189b-4dd6-87cb-628ea6373e81.jpg?1721426571",normal:"https://cards.scryfall.io/normal/front/8/b/8b9e51d9-189b-4dd6-87cb-628ea6373e81.jpg?1721426571"}},
              {name:"Wistfulness",manaValue:5,colors:["G", "U"],colorIdentity:["G", "U"],typeLine:"Creature \u2014 Elemental Incarnation",oracleText:"When this creature enters, if {G}{G} was spent to cast it, exile target artifact or enchantment an opponent controls.\nWhen this creature enters, if {U}{U} was spent to cast it, draw two cards, then discard a card.\nEvoke {G/U}{G/U} (You may cast this spell for its evoke cost. If you do, it's sacrificed when it enters.)",manaCost:"{3}{G/U}{G/U}",power:"6",toughness:"5",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/b/db9aa986-ac2a-44bb-a88b-04c5d0d502b2.jpg?1767749668",normal:"https://cards.scryfall.io/normal/front/d/b/db9aa986-ac2a-44bb-a88b-04c5d0d502b2.jpg?1767749668"}},
              {name:"Origin of Metalbending",manaValue:2,colors:["G"],colorIdentity:["G"],typeLine:"Instant \u2014 Lesson",oracleText:"Choose one \u2014\n\u2022 Destroy target artifact or enchantment.\n\u2022 Put a +1/+1 counter on target creature you control. It gains indestructible until end of turn. (Damage and effects that say \"destroy\" don't destroy it.)",manaCost:"{1}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/5/25749f9a-260d-4bdc-bd28-429c12faa4a5.jpg?1764121273",normal:"https://cards.scryfall.io/normal/front/2/5/25749f9a-260d-4bdc-bd28-429c12faa4a5.jpg?1764121273"}},
              {name:"Get Lost",manaValue:2,colors:["W"],colorIdentity:["W"],typeLine:"Instant",oracleText:"Destroy target creature, enchantment, or planeswalker. Its controller creates two Map tokens. (They're artifacts with \"{1}, {T}, Sacrifice this token: Target creature you control explores. Activate only as a sorcery.\")",manaCost:"{1}{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/2/522aa72b-2b8c-484c-872b-f082101cee35.jpg?1699043186",normal:"https://cards.scryfall.io/normal/front/5/2/522aa72b-2b8c-484c-872b-f082101cee35.jpg?1699043186"}},
              {name:"Rest in Peace",manaValue:2,colors:["W"],colorIdentity:["W"],typeLine:"Enchantment",oracleText:"When this enchantment enters, exile all graveyards.\nIf a card or token would be put into a graveyard from anywhere, exile it instead.",manaCost:"{1}{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/1/d108c2b1-236e-4b8d-8445-d9749ccc4fea.jpg?1739804156",normal:"https://cards.scryfall.io/normal/front/d/1/d108c2b1-236e-4b8d-8445-d9749ccc4fea.jpg?1739804156"}},
              {name:"Cavern of Souls",manaValue:0,typeLine:"Land",oracleText:"As this land enters, choose a creature type.\n{T}: Add {C}.\n{T}: Add one mana of any color. Spend this mana only to cast a creature spell of the chosen type, and that spell can't be countered.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/a/3aad15a2-8a1b-4460-9b06-e85863081878.jpg?1706884128",normal:"https://cards.scryfall.io/normal/front/3/a/3aad15a2-8a1b-4460-9b06-e85863081878.jpg?1706884128"}},
              {name:"Sazh's Chocobo",manaValue:1,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Bird",oracleText:"Landfall \u2014 Whenever a land you control enters, put a +1/+1 counter on this creature.",manaCost:"{G}",power:"0",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/d/dda6b4d0-1b60-46b0-b321-b9ffe15afff4.jpg?1748706509",normal:"https://cards.scryfall.io/normal/front/d/d/dda6b4d0-1b60-46b0-b321-b9ffe15afff4.jpg?1748706509"}},
              {name:"Bounce Off",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Return target creature or Vehicle to its owner's hand.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/b/7b3c8dda-2405-4879-8dd1-e790a833c42d.jpg?1738356198",normal:"https://cards.scryfall.io/normal/front/7/b/7b3c8dda-2405-4879-8dd1-e790a833c42d.jpg?1738356198"}},
              {name:"Meltstrider's Resolve",manaValue:1,colors:["G"],colorIdentity:["G"],typeLine:"Enchantment \u2014 Aura",oracleText:"Enchant creature you control\nWhen this Aura enters, enchanted creature fights up to one target creature an opponent controls. (Each deals damage equal to its power to the other.)\nEnchanted creature gets +0/+2 and can't be blocked by more than one creature.",manaCost:"{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/3/53c08af4-b975-4d9d-baba-73e6727f2778.jpg?1752947367",normal:"https://cards.scryfall.io/normal/front/5/3/53c08af4-b975-4d9d-baba-73e6727f2778.jpg?1752947367"}},
              {name:"Undercity Sewers",manaValue:0,colorIdentity:["B", "U"],typeLine:"Land \u2014 Island Swamp",oracleText:"({T}: Add {U} or {B}.)\nThis land enters tapped.\nWhen this land enters, surveil 1. (Look at the top card of your library. You may put it into your graveyard.)",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/2/b/2b5801fb-2026-4f25-98bc-ebb2f99684b9.jpg?1759236533",normal:"https://cards.scryfall.io/normal/front/2/b/2b5801fb-2026-4f25-98bc-ebb2f99684b9.jpg?1759236533"}},
              {name:"Kaito, Bane of Nightmares",manaValue:4,colors:["B", "U"],colorIdentity:["B", "U"],typeLine:"Legendary Planeswalker \u2014 Kaito",oracleText:"Ninjutsu {1}{U}{B} ({1}{U}{B}, Return an unblocked attacker you control to hand: Put this card onto the battlefield from your hand tapped and attacking.)\nDuring your turn, as long as Kaito has one or more loyalty counters on him, he's a 3/4 Ninja creature and has hexproof.\n+1: You get an emblem with \"Ninjas you control get +1/+1.\"\n0: Surveil 2. Then draw a card for each opponent who lost life this turn.\n\u22122: Tap target creature. Put two stun counters on it.",manaCost:"{2}{U}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/5/55a14f30-4ff9-4472-90a6-c3139f1c18e5.jpg?1726286689",normal:"https://cards.scryfall.io/normal/front/5/5/55a14f30-4ff9-4472-90a6-c3139f1c18e5.jpg?1726286689"}},
              {name:"Harvester of Misery",manaValue:5,colors:["B"],colorIdentity:["B"],typeLine:"Creature \u2014 Spirit",oracleText:"Menace\nWhen this creature enters, other creatures get -2/-2 until end of turn.\n{1}{B}, Discard this card: Target creature gets -2/-2 until end of turn.",manaCost:"{3}{B}{B}",power:"5",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/a/3/a3012af9-621d-4fae-b00d-079a89ae35fe.jpg?1739804174",normal:"https://cards.scryfall.io/normal/front/a/3/a3012af9-621d-4fae-b00d-079a89ae35fe.jpg?1739804174"}},
              {name:"Into the Flood Maw",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Gift a tapped Fish (You may promise an opponent a gift as you cast this spell. If you do, they create a tapped 1/1 blue Fish creature token before its other effects.)\nReturn target creature an opponent controls to its owner's hand. If the gift was promised, instead return target nonland permanent an opponent controls to its owner's hand.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097",normal:"https://cards.scryfall.io/normal/front/5/0/50b9575a-53d9-4df7-b86c-cda021107d3f.jpg?1721426097"}},
              {name:"Broadside Barrage",manaValue:3,colors:["R", "U"],colorIdentity:["R", "U"],typeLine:"Instant",oracleText:"Broadside Barrage deals 5 damage to target creature or planeswalker. Draw a card, then discard a card.",manaCost:"{1}{U}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/0/d086e4e5-98fa-437e-85aa-d8849c94ce94.jpg?1738356591",normal:"https://cards.scryfall.io/normal/front/d/0/d086e4e5-98fa-437e-85aa-d8849c94ce94.jpg?1738356591"}},
              {name:"Cecil, Dark Knight // Cecil, Redeemed Paladin",manaValue:1,colorIdentity:["B", "W"],typeLine:"Legendary Creature \u2014 Human Knight // Legendary Creature \u2014 Human Knight",isCreature:true,imageUris:{art_crop:"",normal:""}},
              {name:"Mossborn Hydra",manaValue:3,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Elemental Hydra",oracleText:"Trample (This creature can deal excess combat damage to the player or planeswalker it's attacking.)\nThis creature enters with a +1/+1 counter on it.\nLandfall \u2014 Whenever a land you control enters, double the number of +1/+1 counters on this creature.",manaCost:"{2}{G}",power:"0",toughness:"0",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/0/7054a0d7-396f-40b4-ab24-db591c3b08f0.jpg?1730488992",normal:"https://cards.scryfall.io/normal/front/7/0/7054a0d7-396f-40b4-ab24-db591c3b08f0.jpg?1730488992"}},
              {name:"Floodfarm Verge",manaValue:0,colorIdentity:["U", "W"],typeLine:"Land",oracleText:"{T}: Add {W}.\n{T}: Add {U}. Activate only if you control a Plains or an Island.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/5/d53ed0db-1199-44b3-8eda-8189dfcf53d1.jpg?1726286841",normal:"https://cards.scryfall.io/normal/front/d/5/d53ed0db-1199-44b3-8eda-8189dfcf53d1.jpg?1726286841"}},
              {name:"Hallowed Fountain",manaValue:0,colorIdentity:["U", "W"],typeLine:"Land \u2014 Plains Island",oracleText:"({T}: Add {W} or {U}.)\nAs this land enters, you may pay 2 life. If you don't, it enters tapped.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/0/e056b55f-82ed-4fe0-ab0c-bb20fa4a218a.jpg?1759144845",normal:"https://cards.scryfall.io/normal/front/e/0/e056b55f-82ed-4fe0-ab0c-bb20fa4a218a.jpg?1759144845"}},
              {name:"Fecund Greenshell",manaValue:5,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Elemental Turtle",oracleText:"Reach\nAs long as you control ten or more lands, creatures you control get +2/+2.\nWhenever this creature or another creature you control with toughness greater than its power enters, look at the top card of your library. If it's a land card, you may put it onto the battlefield tapped. Otherwise, put it into your hand.",manaCost:"{3}{G}{G}",power:"4",toughness:"6",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/0/80b3e815-0e2e-4325-b1d5-5531b7b92da6.jpg?1721426804",normal:"https://cards.scryfall.io/normal/front/8/0/80b3e815-0e2e-4325-b1d5-5531b7b92da6.jpg?1721426804"}},
              {name:"Deadly Cover-Up",manaValue:5,colors:["B"],colorIdentity:["B"],typeLine:"Sorcery",oracleText:"As an additional cost to cast this spell, you may collect evidence 6.\nDestroy all creatures. If evidence was collected, exile a card from an opponent's graveyard. Then search its owner's graveyard, hand, and library for any number of cards with that name and exile them. That player shuffles, then draws a card for each card exiled from their hand this way.",manaCost:"{3}{B}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/8/3876aa0f-b199-43f5-8a91-c2d620b8ef84.jpg?1706241687",normal:"https://cards.scryfall.io/normal/front/3/8/3876aa0f-b199-43f5-8a91-c2d620b8ef84.jpg?1706241687"}},
              {name:"Deep-Cavern Bat",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Creature \u2014 Bat",oracleText:"Flying, lifelink\nWhen this creature enters, look at target opponent's hand. You may exile a nonland card from it until this creature leaves the battlefield.",manaCost:"{1}{B}",power:"1",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/9/69c68c95-b788-43b1-9f22-1b22c5a00b25.jpg?1699044121",normal:"https://cards.scryfall.io/normal/front/6/9/69c68c95-b788-43b1-9f22-1b22c5a00b25.jpg?1699044121"}},
              {name:"Spyglass Siren",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u2014 Siren Pirate",oracleText:"Flying\nWhen this creature enters, create a Map token. (It's an artifact with \"{1}, {T}, Sacrifice this token: Target creature you control explores. Activate only as a sorcery.\")",manaCost:"{U}",power:"1",toughness:"1",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/1/41e54343-95e5-4dc4-9f18-e4a415fe5e0a.jpg?1699043946",normal:"https://cards.scryfall.io/normal/front/4/1/41e54343-95e5-4dc4-9f18-e4a415fe5e0a.jpg?1699043946"}},
              {name:"Surrak, Elusive Hunter",manaValue:3,colors:["G"],colorIdentity:["G"],typeLine:"Legendary Creature \u2014 Human Warrior",oracleText:"This spell can't be countered.\nTrample\nWhenever a creature you control or a creature spell you control becomes the target of a spell or ability an opponent controls, draw a card.",manaCost:"{2}{G}",power:"4",toughness:"3",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/4/e4775a26-0b66-40e9-8f64-41d9308ca032.jpg?1743204609",normal:"https://cards.scryfall.io/normal/front/e/4/e4775a26-0b66-40e9-8f64-41d9308ca032.jpg?1743204609"}},
              {name:"Vivien Reid",manaValue:5,colors:["G"],colorIdentity:["G"],typeLine:"Legendary Planeswalker \u2014 Vivien",oracleText:"+1: Look at the top four cards of your library. You may reveal a creature or land card from among them and put it into your hand. Put the rest on the bottom of your library in a random order.\n\u22123: Destroy target artifact, enchantment, or creature with flying.\n\u22128: You get an emblem with \"Creatures you control get +2/+2 and have vigilance, trample, and indestructible.\"",manaCost:"{3}{G}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/3/8/38769247-42a1-4571-9071-6d59fe28650a.jpg?1730489472",normal:"https://cards.scryfall.io/normal/front/3/8/38769247-42a1-4571-9071-6d59fe28650a.jpg?1730489472"}},
              {name:"Voice of Victory",manaValue:2,colors:["W"],colorIdentity:["W"],typeLine:"Creature \u2014 Human Bard",oracleText:"Mobilize 2 (Whenever this creature attacks, create two tapped and attacking 1/1 red Warrior creature tokens. Sacrifice them at the beginning of the next end step.)\nYour opponents can't cast spells during your turn.",manaCost:"{1}{W}",power:"1",toughness:"3",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/c/ec3de5f4-bb55-4ab9-995f-f3e0dc22c1bb.jpg?1758215927",normal:"https://cards.scryfall.io/normal/front/e/c/ec3de5f4-bb55-4ab9-995f-f3e0dc22c1bb.jpg?1758215927"}},
              {name:"Seam Rip",manaValue:1,colors:["W"],colorIdentity:["W"],typeLine:"Enchantment",oracleText:"When this enchantment enters, exile target nonland permanent an opponent controls with mana value 2 or less until this enchantment leaves the battlefield.",manaCost:"{W}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/9/d/9d298847-2d02-4593-b4d3-c5b722edac1e.jpg?1752946687",normal:"https://cards.scryfall.io/normal/front/9/d/9d298847-2d02-4593-b4d3-c5b722edac1e.jpg?1752946687"}},
              {name:"Sunderflock",manaValue:9,colors:["U"],colorIdentity:["U"],typeLine:"Creature \u2014 Elemental",oracleText:"This spell costs {X} less to cast, where X is the greatest mana value among Elementals you control.\nFlying\nWhen this creature enters, if you cast it, return all non-Elemental creatures to their owners' hands.",manaCost:"{7}{U}{U}",power:"5",toughness:"5",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/5/e5b6221e-cb22-45e4-bb98-2b960afc614c.jpg?1767732544",normal:"https://cards.scryfall.io/normal/front/e/5/e5b6221e-cb22-45e4-bb98-2b960afc614c.jpg?1767732544"}},
              {name:"Archdruid's Charm",manaValue:3,colors:["G"],colorIdentity:["G"],typeLine:"Instant",oracleText:"Choose one \u2014\n\u2022 Search your library for a creature or land card and reveal it. Put it onto the battlefield tapped if it's a land card. Otherwise, put it into your hand. Then shuffle.\n\u2022 Put a +1/+1 counter on target creature you control. It deals damage equal to its power to target creature you don't control.\n\u2022 Exile target artifact or enchantment.",manaCost:"{G}{G}{G}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/c/5caae5ae-845f-42c2-b1ae-956df2739433.jpg?1706241943",normal:"https://cards.scryfall.io/normal/front/5/c/5caae5ae-845f-42c2-b1ae-956df2739433.jpg?1706241943"}},
              {name:"Willowrush Verge",manaValue:0,colorIdentity:["G", "U"],typeLine:"Land",oracleText:"{T}: Add {U}.\n{T}: Add {G}. Activate only if you control a Forest or an Island.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/7/5/758d93d5-3f66-4395-a928-000485396c87.jpg?1738356975",normal:"https://cards.scryfall.io/normal/front/7/5/758d93d5-3f66-4395-a928-000485396c87.jpg?1738356975"}},
              {name:"Keen-Eyed Curator",manaValue:2,colors:["G"],colorIdentity:["G"],typeLine:"Creature \u2014 Raccoon Scout",oracleText:"As long as there are four or more card types among cards exiled with this creature, it gets +4/+4 and has trample.\n{1}: Exile target card from a graveyard.",manaCost:"{G}{G}",power:"3",toughness:"3",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/8/c/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add.jpg?1721426856",normal:"https://cards.scryfall.io/normal/front/8/c/8cf33d80-0704-4dc4-8e8d-1dcbcbc35add.jpg?1721426856"}},
              {name:"Fountainport",manaValue:0,typeLine:"Land",oracleText:"{T}: Add {C}.\n{2}, {T}, Sacrifice a token: Draw a card.\n{3}, {T}, Pay 1 life: Create a 1/1 blue Fish creature token.\n{4}, {T}: Create a Treasure token.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323",normal:"https://cards.scryfall.io/normal/front/6/5/658cfcb7-81b7-48c6-9dd2-1663d06108cf.jpg?1721427323"}},
              {name:"Promising Vein",manaValue:0,typeLine:"Land \u2014 Cave",oracleText:"{T}: Add {C}.\n{1}, {T}, Sacrifice this land: Search your library for a basic land card, put it onto the battlefield tapped, then shuffle.",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/e/9/e9681a54-6413-4ff4-b6b1-ee4decb25bfa.jpg?1699044695",normal:"https://cards.scryfall.io/normal/front/e/9/e9681a54-6413-4ff4-b6b1-ee4decb25bfa.jpg?1699044695"}},
              {name:"Day of Black Sun",manaValue:2,colors:["B"],colorIdentity:["B"],typeLine:"Sorcery",oracleText:"Each creature with mana value X or less loses all abilities until end of turn. Destroy those creatures.",manaCost:"{X}{B}{B}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/d/0/d0e24797-3e45-4c2b-b4b0-1ef44d42eaee.jpg?1764120649",normal:"https://cards.scryfall.io/normal/front/d/0/d0e24797-3e45-4c2b-b4b0-1ef44d42eaee.jpg?1764120649"}},
              {name:"Abrade",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Instant",oracleText:"Choose one \u2014\n\u2022 Abrade deals 3 damage to target creature.\n\u2022 Destroy target artifact.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/4/c/4c2a1b4e-858c-47a3-be89-9275e48d5475.jpg?1743206610",normal:"https://cards.scryfall.io/normal/front/4/c/4c2a1b4e-858c-47a3-be89-9275e48d5475.jpg?1743206610"}},
              {name:"Ashling, Rekindled // Ashling, Rimebound",manaValue:2,colorIdentity:["R", "U"],typeLine:"Legendary Creature \u2014 Elemental Sorcerer // Legendary Creature \u2014 Elemental Wizard",isCreature:true,imageUris:{art_crop:"",normal:""}},
              {name:"Vibrance",manaValue:5,colors:["G", "R"],colorIdentity:["G", "R"],typeLine:"Creature \u2014 Elemental Incarnation",oracleText:"When this creature enters, if {R}{R} was spent to cast it, this creature deals 3 damage to any target.\nWhen this creature enters, if {G}{G} was spent to cast it, search your library for a land card, reveal it, put it into your hand, then shuffle. You gain 2 life.\nEvoke {R/G}{R/G}",manaCost:"{3}{R/G}{R/G}",power:"4",toughness:"4",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/9/b9f71c3b-0840-475f-9c17-fdacbc7f3213.jpg?1767658560",normal:"https://cards.scryfall.io/normal/front/b/9/b9f71c3b-0840-475f-9c17-fdacbc7f3213.jpg?1767658560"}},
              {name:"Opt",manaValue:1,colors:["U"],colorIdentity:["U"],typeLine:"Instant",oracleText:"Scry 1. (Look at the top card of your library. You may put that card on the bottom.)\nDraw a card.",manaCost:"{U}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/b/b/bbc99a51-1501-4525-a3cc-f48249b64bed.jpg?1743206354",normal:"https://cards.scryfall.io/normal/front/b/b/bbc99a51-1501-4525-a3cc-f48249b64bed.jpg?1743206354"}},
              {name:"Doomsday Excruciator",manaValue:6,colors:["B"],colorIdentity:["B"],typeLine:"Creature \u2014 Demon",oracleText:"Flying\nWhen this creature enters, if it was cast, each player exiles all but the bottom six cards of their library face down.\nAt the beginning of your upkeep, draw a card.",manaCost:"{B}{B}{B}{B}{B}{B}",power:"6",toughness:"6",isCreature:true,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/5/4/542c89b6-48c6-4fcb-8a4c-b5ed2fa1d384.jpg?1726286201",normal:"https://cards.scryfall.io/normal/front/5/4/542c89b6-48c6-4fcb-8a4c-b5ed2fa1d384.jpg?1726286201"}},
              {name:"Iroh's Demonstration",manaValue:2,colors:["R"],colorIdentity:["R"],typeLine:"Sorcery \u2014 Lesson",oracleText:"Choose one \u2014\n\u2022 Iroh's Demonstration deals 1 damage to each creature your opponents control.\n\u2022 Iroh's Demonstration deals 4 damage to target creature.",manaCost:"{1}{R}",isCreature:false,imageUris:{art_crop:"https://cards.scryfall.io/art_crop/front/1/8/18d15fed-1f8f-4407-a221-a47ce75001a8.jpg?1764120967",normal:"https://cards.scryfall.io/normal/front/1/8/18d15fed-1f8f-4407-a221-a47ce75001a8.jpg?1764120967"}}
            ]
          }
        };
    



    // ===================================================================
    // UTILITY FUNCTIONS
    // ===================================================================

    function shuffle(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function pickRandom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function formatColors(colors) {
      if (!colors || colors.length === 0) return 'Colorless';
      return colors.map(c => COLOR_MAP[c] || c).join(', ');
    }

    function colorsMatch(a, b) {
      if (!a || !b) return false;
      if (a.length !== b.length) return false;
      const sortedA = [...a].sort().join('');
      const sortedB = [...b].sort().join('');
      return sortedA === sortedB;
    }

    /**
     * Calculate similarity score between two cards
     * Higher score = more similar cards (better for wrong answers)
     */
    function cardSimilarity(card1, card2, excludeFieldId) {
      let score = 0;

      // Type Line similarity (highest weight) - unless testing typeLine
      if (excludeFieldId !== 'typeLine') {
        if (card1.typeLine === card2.typeLine) score += 10;
        else if (card1.typeLine && card2.typeLine) {
          const types1 = card1.typeLine.toLowerCase().split(/[\s—-]+/);
          const types2 = card2.typeLine.toLowerCase().split(/[\s—-]+/);
          const overlap = types1.filter(t => types2.includes(t)).length;
          score += overlap * 3;
        }
      }

      // Color identity match - unless testing colors
      if (excludeFieldId !== 'colors') {
        const colors1 = (card1.colors || []).sort().join('');
        const colors2 = (card2.colors || []).sort().join('');
        if (colors1 === colors2) score += 5;
      }

      // Mana value proximity - unless testing manaValue
      if (excludeFieldId !== 'manaValue') {
        const mvDiff = Math.abs((card1.manaValue || 0) - (card2.manaValue || 0));
        if (mvDiff === 0) score += 3;
        else if (mvDiff === 1) score += 2;
        else if (mvDiff === 2) score += 1;
      }

      // Power/Toughness similarity - unless testing powerToughness
      if (excludeFieldId !== 'powerToughness') {
        if (card1.isCreature && card2.isCreature) {
          if (card1.power === card2.power) score += 2;
          if (card1.toughness === card2.toughness) score += 2;
        }
      }

      return score;
    }

    /**
     * Redact card name from text (smart replacement)
     */
    function redactCardName(text, cardName) {
      if (!text || !cardName) return text;
      // Redact full card name
      const pattern = new RegExp(cardName.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
      let result = text.replace(pattern, '[REDACTED]');
      // For split/double-faced cards, also redact each face name
      if (cardName.includes(' // ')) {
        cardName.split(' // ').forEach(face => {
          const facePattern = new RegExp(face.trim().replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
          result = result.replace(facePattern, '[REDACTED]');
        });
      }
      return result;
    }

    // ===================================================================
    // SCRYFALL API CLIENT
    // ===================================================================

    class ScryfallClient {
      constructor() {
        this.cache = new Map();
        this.lastRequestTime = 0;
      }

      async rateLimit() {
        const now = Date.now();
        const elapsed = now - this.lastRequestTime;
        if (elapsed < SCRYFALL_DELAY) {
          await new Promise(resolve => setTimeout(resolve, SCRYFALL_DELAY - elapsed));
        }
        this.lastRequestTime = Date.now();
      }

      getCacheKey(query) {
        return `scryfall_query_${query}`;
      }

      getCachedPool(key) {
        const cached = localStorage.getItem(this.getCacheKey(key));
        if (!cached) return null;

        try {
          const data = JSON.parse(cached);
          return data;
        } catch {
          return null;
        }
      }

      setCachedPool(key, cards) {
        try {
          const data = {
            cards,
            timestamp: Date.now(),
          };
          localStorage.setItem(this.getCacheKey(key), JSON.stringify(data));
        } catch (err) {
          console.error('Failed to cache pool:', err);
        }
      }

      isExpired(cachedData) {
        const ttl = 24 * 60 * 60 * 1000; // 24 hours default
        return Date.now() - cachedData.timestamp > ttl;
      }

      async fetchByQuery(query, limit = 50) {
        await this.rateLimit();

        const url = `${SCRYFALL_API_BASE}/cards/search?q=${encodeURIComponent(query)}&unique=cards&order=name`;
        const response = await fetch(url);

        if (!response.ok) {
          throw new Error(`Scryfall API error: ${response.status}`);
        }

        const data = await response.json();
        const cards = data.data.slice(0, limit).map(this.normalizeCard);
        return cards;
      }

      /**
       * Fetch cards similar to a given card with progressive relaxation
       * Used for dynamic wrong answer generation
       */
      async fetchSimilarCards(correctCard, askField, excludeName) {
        const queries = this.buildSimilarityQueries(correctCard, askField, excludeName);

        const allCards = [];
        const seenNames = new Set();

        // Try each query level until we have enough cards
        for (const query of queries) {
          if (allCards.length >= 50) break; // Stop when we have enough

          try {
            const cards = await this.fetchByQuery(query, 20);

            // Deduplicate by card name
            for (const card of cards) {
              if (!seenNames.has(card.name)) {
                seenNames.add(card.name);
                allCards.push(card);
              }
            }
          } catch (err) {
            console.warn(`Query failed: ${query}`, err);
            continue; // Try next level
          }
        }

        return allCards;
      }

      /**
       * Build hierarchical queries from most to least specific
       */
      buildSimilarityQueries(card, askField, excludeName) {
        const queries = [];
        const type = parseTypeLine(card.typeLine);
        const colors = (card.colors || []).sort().join('');
        const rarity = card.rarity;
        const mv = card.manaValue;

        // Build color query part
        const colorQuery = colors ? `color:${colors}` : 'colorless';

        // Build type query parts
        const supertypeQuery = type.supertypes.length > 0
          ? type.supertypes.map(t => `type:${t}`).join(' ')
          : '';
        const cardTypeQuery = type.cardTypes.length > 0
          ? type.cardTypes.map(t => `type:${t}`).join(' ')
          : '';
        const subtypeQuery = type.subtypes.length > 0
          ? type.subtypes.map(t => `type:${t}`).join(' ')
          : '';

        // Base exclude (never include the correct card)
        const excludeQuery = `-name:"${excludeName}"`;

        // Also exclude the tested value (e.g., don't show cards with same MV)
        let excludeValueQuery = '';
        if (askField === 'castingCost') {
          // Can't easily exclude by mana cost in Scryfall query, skip this filter
          excludeValueQuery = '';
        } else if (askField === 'colors') {
          excludeValueQuery = colors ? `-color:${colors}` : '';
        }

        // Level 1: Everything matches except askField
        if (supertypeQuery && cardTypeQuery && subtypeQuery) {
          queries.push(`${colorQuery} ${supertypeQuery} ${cardTypeQuery} ${subtypeQuery} rarity:${rarity} ${excludeQuery} ${excludeValueQuery}`.trim());
        }

        // Level 2: Relax subtypes
        if (supertypeQuery && cardTypeQuery) {
          queries.push(`${colorQuery} ${supertypeQuery} ${cardTypeQuery} rarity:${rarity} ${excludeQuery} ${excludeValueQuery}`.trim());
        }

        // Level 3: Relax rarity
        if (supertypeQuery && cardTypeQuery) {
          queries.push(`${colorQuery} ${supertypeQuery} ${cardTypeQuery} ${excludeQuery} ${excludeValueQuery}`.trim());
        }

        // Level 4: Relax supertypes
        if (cardTypeQuery) {
          queries.push(`${colorQuery} ${cardTypeQuery} ${excludeQuery} ${excludeValueQuery}`.trim());
        }

        // Level 5: Relax colors
        if (cardTypeQuery) {
          queries.push(`${cardTypeQuery} ${excludeQuery} ${excludeValueQuery}`.trim());
        }

        // Level 6: Just exclude the correct card
        queries.push(excludeQuery);

        return queries;
      }

      async fetchPresetPool(presetKey, useCache = true) {
        const preset = PRESET_DEFINITIONS[presetKey];
        if (!preset) throw new Error(`Unknown preset: ${presetKey}`);

        // Check cache first
        if (useCache) {
          const cached = this.getCachedPool(presetKey);
          if (cached && !this.isExpired(cached)) {
            console.log(`Using cached ${presetKey} pool`);
            return cached.cards;
          }
        }

        // Fetch fresh
        console.log(`Fetching ${presetKey} pool from Scryfall...`);
        const cards = await this.fetchByQuery(preset.query, 100);

        // Cache result
        this.setCachedPool(presetKey, cards);

        return cards;
      }

      async fetchByNames(names) {
        const BATCH_SIZE = 75;
        const allFound = [];
        const allNotFound = [];

        for (let i = 0; i < names.length; i += BATCH_SIZE) {
          await this.rateLimit();
          const batch = names.slice(i, i + BATCH_SIZE);
          const identifiers = batch.map(name => ({ name }));

          const response = await fetch(`${SCRYFALL_API_BASE}/cards/collection`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ identifiers }),
          });

          if (!response.ok) {
            throw new Error(`Scryfall collection API error: ${response.status}`);
          }

          const data = await response.json();
          allFound.push(...(data.data || []).map(card => this.normalizeCard(card)));
          allNotFound.push(...(data.not_found || []).map(nf => nf.name));
        }

        return { found: allFound, notFound: allNotFound };
      }

      normalizeCard(raw) {
        return {
          name: raw.name,
          manaValue: raw.cmc || 0,
          manaCost: raw.mana_cost || '',
          colors: raw.colors || [],
          colorIdentity: raw.color_identity || [],
          typeLine: raw.type_line || '',
          oracleText: raw.oracle_text || '',
          power: raw.power,
          toughness: raw.toughness,
          isCreature: (raw.type_line || '').includes('Creature'),
          imageUris: raw.image_uris || {},
          scryfallUri: raw.scryfall_uri,
        };
      }
    }

    // ===================================================================
    // QUESTION GENERATION - CUSTOM MODE
    // ===================================================================

    function getApplicableCards(cardPool, config) {
      const { askField } = config;
      const fieldDef = FIELD_CONFIG[askField];

      if (!fieldDef) return cardPool;

      let pool = cardPool;

      // Filter out cards with blank oracle text when asking about oracle text
      if (askField === 'oracleText') {
        pool = pool.filter(c => c.oracleText && c.oracleText.trim().length > 0);
      }

      // If field requires applicability check, filter pool
      if (fieldDef.requiresApplicability && fieldDef.checkApplicability) {
        pool = pool.filter(c => {
          if (askField === 'powerToughness') {
            return c.isCreature && c.power && c.toughness;
          }
          return true;
        });
      }

      return pool;
    }

    function validateQuizConfig(config, cardPool) {
      const errors = [];

      if (!config.askField) {
        errors.push('No "Ask" field selected');
      }

      if (config.shownFields.length === 0) {
        errors.push('At least one field must be shown');
      }

      // Check if enough applicable cards (need 3 minimum: 1 correct + 2 wrong)
      const applicable = getApplicableCards(cardPool, config);
      if (applicable.length < 3) {
        errors.push(`Not enough cards for selected field (need 3, found ${applicable.length})`);
      }

      return errors;
    }

    async function generateCustomQuestion(cardPool, config, scryfallClient, askedQuestions = new Set(), activePreset = null, handleNoAvailableCards = null) {
      if (!cardPool || cardPool.length < 2) return null;

      const updatedConfig = { ...config };
      if (!updatedConfig.askField) return null;

      const applicableCards = getApplicableCards(cardPool, updatedConfig);
      // Text input only needs 1 card, MC needs at least 3 (1 correct + 2 unique wrong values)
      // Exception: dynamic strategy can work with any pool size (fetches from API)
      const minRequired = updatedConfig.answerFormat === 'multipleChoice' && updatedConfig.wrongAnswerStrategy !== 'dynamic' ? 3 : 1;
      if (applicableCards.length < minRequired) return null;

      // Filter out already-asked card+field combinations
      const availableCards = applicableCards.filter(card => {
        const key = `${card.name}|${updatedConfig.askField}`;
        return !askedQuestions.has(key);
      });

      let correctCard;
      if (availableCards.length > 0) {
        // Use an unanswered card
        correctCard = pickRandom(availableCards);
      } else if (applicableCards.length > 0) {
        // All cards exhausted for this field, allow repeats via handler
        if (handleNoAvailableCards) {
          correctCard = handleNoAvailableCards(applicableCards, updatedConfig);
        } else {
          correctCard = pickRandom(applicableCards);
        }
      } else {
        return null;
      }
      const fieldDef = FIELD_CONFIG[updatedConfig.askField];

      // Extract correct answer
      const correctValue = fieldDef.extractValue(correctCard);
      const correctDisplay = fieldDef.formatDisplay(correctValue);

      // Build question based on answer format
      if (updatedConfig.answerFormat === 'multipleChoice') {
        return await generateMultipleChoiceQuestion(correctCard, applicableCards, updatedConfig, fieldDef, correctDisplay, scryfallClient);
      } else if (updatedConfig.answerFormat === 'textInput') {
        return generateTextInputQuestion(correctCard, updatedConfig, fieldDef, correctDisplay);
      }

      return null;
    }

    /**
     * Parse type line into components
     * "Legendary Creature — Phyrexian Praetor" → {supertypes: ["Legendary"], cardTypes: ["Creature"], subtypes: ["Phyrexian", "Praetor"]}
     */
    function parseTypeLine(typeLine) {
      if (!typeLine) return { supertypes: [], cardTypes: [], subtypes: [] };

      const [mainPart, subtypePart] = typeLine.split(/\s*[—–-]\s*/);
      const mainTypes = mainPart.trim().split(/\s+/);

      const SUPERTYPES = ['Legendary', 'Snow', 'Basic', 'World', 'Ongoing'];
      const CARD_TYPES = ['Creature', 'Artifact', 'Enchantment', 'Planeswalker', 'Instant', 'Sorcery', 'Land', 'Tribal', 'Battle'];

      const supertypes = mainTypes.filter(t => SUPERTYPES.includes(t));
      const cardTypes = mainTypes.filter(t => CARD_TYPES.includes(t));
      const subtypes = subtypePart ? subtypePart.trim().split(/\s+/) : [];

      return { supertypes, cardTypes, subtypes };
    }

    /**
     * Strategy A: Similarity-based (fast, simpler)
     * Score all cards by similarity, walk down list until 3 unique values found
     */
    function generateMCBySimilarity(correctCard, pool, config, fieldDef, correctDisplay) {
      // Score all cards by similarity (once)
      const scoredCards = pool
        .filter(c => c.name !== correctCard.name)
        .map(c => ({
          card: c,
          similarity: cardSimilarity(c, correctCard, config.askField),
        }))
        .sort((a, b) => b.similarity - a.similarity);

      // Walk down similarity-sorted list until 3 unique values found
      const uniqueWrongValues = new Set();
      const wrongAnswers = [];

      for (const { card } of scoredCards) {
        if (wrongAnswers.length >= 3) break;

        const value = fieldDef.extractValue(card);
        const display = fieldDef.formatDisplay(value);

        // Skip if same as correct answer or already used
        if (display === correctDisplay || uniqueWrongValues.has(display)) continue;

        uniqueWrongValues.add(display);
        wrongAnswers.push(display);
      }

      return wrongAnswers.length >= 2 ? wrongAnswers : null;
    }

    /**
     * Strategy B: Dynamic API queries (searches all cards, not just pool)
     * Makes real-time Scryfall queries for maximally similar cards
     */
    async function generateMCByDynamicAPI(correctCard, scryfallClient, config, fieldDef, correctDisplay) {
      // Fetch similar cards from Scryfall API
      const similarCards = await scryfallClient.fetchSimilarCards(correctCard, config.askField, correctCard.name);

      if (similarCards.length < 3) {
        console.warn('Not enough similar cards found via API');
        return null;
      }

      // Extract unique wrong values
      const uniqueWrongValues = new Set();
      const wrongAnswers = [];

      for (const card of similarCards) {
        if (wrongAnswers.length >= 3) break;

        const value = fieldDef.extractValue(card);
        const display = fieldDef.formatDisplay(value);

        // Skip if same as correct answer or already used
        if (display === correctDisplay || uniqueWrongValues.has(display)) continue;

        uniqueWrongValues.add(display);
        wrongAnswers.push(display);
      }

      return wrongAnswers.length >= 2 ? wrongAnswers : null;
    }

    /**
     * Strategy C: Hierarchical filtering within pool (filters cached 200 cards)
     * Progressively relax constraints until enough unique wrong answers found
     */
    function generateMCByHierarchy(correctCard, pool, config, fieldDef, correctDisplay) {
      const askField = config.askField;
      const otherCards = pool.filter(c => c.name !== correctCard.name);

      // Parse correct card's attributes
      const correctColors = (correctCard.colors || []).sort().join('');
      const correctRarity = correctCard.rarity;
      const correctType = parseTypeLine(correctCard.typeLine);

      // Define relaxation levels (in order of specificity)
      const relaxationLevels = [
        // Level 1: Everything matches except askField (most specific)
        (card) => {
          const cardColors = (card.colors || []).sort().join('');
          const cardType = parseTypeLine(card.typeLine);

          return cardColors === correctColors &&
                 card.rarity === correctRarity &&
                 cardType.supertypes.sort().join('') === correctType.supertypes.sort().join('') &&
                 cardType.cardTypes.sort().join('') === correctType.cardTypes.sort().join('') &&
                 cardType.subtypes.sort().join('') === correctType.subtypes.sort().join('');
        },

        // Level 2: Relax subtypes (high variance)
        (card) => {
          const cardColors = (card.colors || []).sort().join('');
          const cardType = parseTypeLine(card.typeLine);

          return cardColors === correctColors &&
                 card.rarity === correctRarity &&
                 cardType.supertypes.sort().join('') === correctType.supertypes.sort().join('') &&
                 cardType.cardTypes.sort().join('') === correctType.cardTypes.sort().join('');
        },

        // Level 3: Relax rarity (medium variance)
        (card) => {
          const cardColors = (card.colors || []).sort().join('');
          const cardType = parseTypeLine(card.typeLine);

          return cardColors === correctColors &&
                 cardType.supertypes.sort().join('') === correctType.supertypes.sort().join('') &&
                 cardType.cardTypes.sort().join('') === correctType.cardTypes.sort().join('');
        },

        // Level 4: Relax supertypes
        (card) => {
          const cardColors = (card.colors || []).sort().join('');
          const cardType = parseTypeLine(card.typeLine);

          return cardColors === correctColors &&
                 cardType.cardTypes.sort().join('') === correctType.cardTypes.sort().join('');
        },

        // Level 5: Relax colors (low variance - clusters heavily)
        (card) => {
          const cardType = parseTypeLine(card.typeLine);
          return cardType.cardTypes.sort().join('') === correctType.cardTypes.sort().join('');
        },

        // Level 6: Any card in pool (broadest)
        (card) => true,
      ];

      const uniqueWrongValues = new Set();
      const wrongAnswers = [];

      // Try each relaxation level until we have 3 unique wrong answers
      for (const filterFn of relaxationLevels) {
        if (wrongAnswers.length >= 3) break;

        const candidates = otherCards.filter(filterFn);

        // Extract unique values from this level
        for (const card of candidates) {
          if (wrongAnswers.length >= 3) break;

          const value = fieldDef.extractValue(card);
          const display = fieldDef.formatDisplay(value);

          // Skip if same as correct answer or already used
          if (display === correctDisplay || uniqueWrongValues.has(display)) continue;

          uniqueWrongValues.add(display);
          wrongAnswers.push(display);
        }
      }

      return wrongAnswers.length >= 2 ? wrongAnswers : null;
    }

    /**
     * Generate mana cost variations for wrong answers
     * Parse {2}{U}{U} → generic: 2, colors: ['U','U']
     * Variations: Change generic ±1, swap one color
     */
    function generateManaCostVariations(baseCost) {
      const variations = [];

      // Parse generic mana and color mana
      const genericMatch = baseCost.match(/\{(\d+)\}/);
      const generic = genericMatch ? parseInt(genericMatch[1]) : 0;
      const colorMatches = baseCost.match(/\{([WUBRG])\}/g) || [];
      const colors = colorMatches.map(m => m[1]);

      // Variation 1: Change generic ±1
      if (generic > 0) {
        const decreased = `{${generic-1}}${colors.map(c=>`{${c}}`).join('')}`;
        if (decreased !== baseCost) variations.push(decreased);
      }
      const increased = `{${generic+1}}${colors.map(c=>`{${c}}`).join('')}`;
      if (increased !== baseCost) variations.push(increased);

      // Variation 2: Swap one color if multiple colors present
      if (colors.length > 0) {
        const swapColors = ['W','U','B','R','G'].filter(c => !colors.includes(c));
        if (swapColors.length > 0) {
          const newColors = [...colors];
          newColors[0] = swapColors[0];
          const swapped = `{${generic}}${newColors.map(c=>`{${c}}`).join('')}`;
          if (swapped !== baseCost) variations.push(swapped);
        }
      }

      return variations;
    }

    /**
     * Generate synthetic wrong answers for fields where we can compute plausible alternatives
     */
    function generateSyntheticWrong(askField, correctCard, correctDisplay, count) {
      const answers = new Set();

      if (askField === 'castingCost') {
        const baseCost = correctCard.manaCost || '{0}';
        // Generate variations: swap colors, change generic cost ±1,2
        const variations = generateManaCostVariations(baseCost);
        variations.forEach(v => {
          if (answers.size < count && v !== correctDisplay) {
            answers.add(v);
          }
        });
      } else if (askField === 'powerToughness') {
        const [p, t] = correctDisplay.split('/');
        const pNum = parseInt(p) || 0;
        const tNum = parseInt(t) || 0;
        // Vary power and toughness by small amounts
        const variations = [
          [pNum + 1, tNum], [pNum - 1, tNum], [pNum, tNum + 1], [pNum, tNum - 1],
          [pNum + 1, tNum + 1], [pNum - 1, tNum - 1], [pNum + 2, tNum],
        ];
        for (const [vp, vt] of variations) {
          if (answers.size >= count) break;
          if (vp >= 0 && vt >= 0) {
            const display = `${vp}/${vt}`;
            if (display !== correctDisplay) answers.add(display);
          }
        }
      } else if (askField === 'colors') {
        const allColorCombos = ['W', 'U', 'B', 'R', 'G', 'WU', 'WB', 'WR', 'WG', 'UB', 'UR', 'UG', 'BR', 'BG', 'RG', 'Colorless'];
        for (const combo of shuffle(allColorCombos)) {
          if (answers.size >= count) break;
          if (combo !== correctDisplay) answers.add(combo);
        }
      }

      return [...answers].slice(0, count);
    }

    /**
     * Main MC question generator - routes to appropriate strategy
     * Falls back to synthetic wrong answers if pool-based strategies fail
     */
    async function generateMultipleChoiceQuestion(correctCard, pool, config, fieldDef, correctDisplay, scryfallClient) {
      const strategy = config.wrongAnswerStrategy || 'pool';

      let wrongAnswers;
      if (strategy === 'dynamic') {
        wrongAnswers = await generateMCByDynamicAPI(correctCard, scryfallClient, config, fieldDef, correctDisplay);
      } else if (strategy === 'hierarchical') {
        wrongAnswers = generateMCByHierarchy(correctCard, pool, config, fieldDef, correctDisplay);
      } else {
        wrongAnswers = generateMCBySimilarity(correctCard, pool, config, fieldDef, correctDisplay);
      }

      // If pool-based strategies didn't produce enough, try synthetic fallback
      if (!wrongAnswers || wrongAnswers.length < 2) {
        const needed = wrongAnswers ? 2 - wrongAnswers.length : 3;
        const existing = wrongAnswers || [];
        const synthetic = generateSyntheticWrong(config.askField, correctCard, correctDisplay, needed + 2);
        const combined = [...existing, ...synthetic.filter(s => !existing.includes(s))];
        wrongAnswers = combined.length >= 2 ? combined.slice(0, 3) : null;
      }

      // Last resort: try dynamic API if we haven't already
      if ((!wrongAnswers || wrongAnswers.length < 2) && strategy !== 'dynamic') {
        try {
          wrongAnswers = await generateMCByDynamicAPI(correctCard, scryfallClient, config, fieldDef, correctDisplay);
        } catch (e) {
          console.warn('Dynamic API fallback failed:', e);
        }
      }

      if (!wrongAnswers || wrongAnswers.length < 2) return null;

      const choices = shuffle([correctDisplay, ...wrongAnswers.slice(0, 3)]);

      // Detect if all answers are short enough for compact layout
      const allAnswers = [correctDisplay, ...wrongAnswers.slice(0, 3)];
      const maxLength = Math.max(...allAnswers.map(a => String(a).length));
      const isCompact = maxLength <= 15 && allAnswers.length <= 4;

      return {
        type: 'custom',
        card: correctCard,
        questionText: `What is the ${fieldDef.label} of this card?`,
        choices,
        correctAnswer: correctDisplay,
        answerFormat: 'multipleChoice',
        shownFields: config.shownFields,
        askField: config.askField,
        difficulty: fieldDef.difficulty,
        isCompact,
      };
    }

    function generateTextInputQuestion(correctCard, config, fieldDef, correctDisplay) {
      return {
        type: 'custom',
        card: correctCard,
        questionText: `What is the ${fieldDef.label} of this card?`,
        correctAnswer: correctDisplay,
        answerFormat: 'textInput',
        shownFields: config.shownFields,
        askField: config.askField,
        difficulty: fieldDef.difficulty,
      };
    }

    // ===================================================================
    // STORAGE
    // ===================================================================

    function loadStorage(key, defaultValue) {
      try {
        const stored = localStorage.getItem(key);
        return stored ? JSON.parse(stored) : defaultValue;
      } catch {
        return defaultValue;
      }
    }

    function saveStorage(key, value) {
      try {
        localStorage.setItem(key, JSON.stringify(value));
      } catch (err) {
        console.error('Failed to save to localStorage:', err);
      }
    }

    // ===================================================================
    // REACT COMPONENTS
    // ===================================================================

    function CardSourceSelector({ cardSource, onSourceChange }) {
      const sources = [
        { key: 'scryfall', label: 'Scryfall Search', desc: 'Search by format, type, color, or Scryfall syntax' },
        { key: 'prepopulated', label: 'Card Lists', desc: 'Curated lists for specific formats' },
        { key: 'custom', label: 'Custom List', desc: 'Paste your own card names' },
      ];

      return (
        <div className="card-source-selector">
          {sources.map(s => (
            <button
              key={s.key}
              className={`source-tab ${cardSource === s.key ? 'active' : ''}`}
              onClick={() => onSourceChange(s.key)}
            >
              <div className="source-tab-label">{s.label}</div>
              <div className="source-tab-desc">{s.desc}</div>
            </button>
          ))}
        </div>
      );
    }

    function SearchField({ value, onChange, onSearch }) {
      return (
        <div className="search-field-container">
          <input
            type="text"
            className="search-input"
            placeholder="format:standard type:creature"
            value={value}
            onChange={(e) => onChange(e.target.value)}
          />
          <button className="search-btn" onClick={() => onSearch(value)}>
            Search
          </button>
          <div className="search-hint">
            Use <a href="https://scryfall.com/docs/syntax" target="_blank" rel="noopener">Scryfall syntax</a>
          </div>
        </div>
      );
    }

    function CustomListInput({ value, onChange, onLoad, loading, notFound }) {
      return (
        <div className="custom-list-container">
          <textarea
            className="custom-list-textarea"
            placeholder={"Enter card names, one per line:\nLightning Bolt\nCounterspell\nSwords to Plowshares"}
            value={value}
            onChange={(e) => onChange(e.target.value)}
            rows={8}
          />
          <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginTop: '8px' }}>
            <button
              className="search-btn"
              onClick={onLoad}
              disabled={loading || !value.trim()}
            >
              {loading ? 'Loading...' : 'Load Cards'}
            </button>
            <span style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>
              {value.trim() ? `${value.trim().split('\n').filter(l => l.trim()).length} names entered` : ''}
            </span>
          </div>
          {notFound && notFound.length > 0 && (
            <div style={{
              marginTop: '8px',
              padding: '8px 12px',
              background: 'rgba(239, 68, 68, 0.1)',
              border: '1px solid rgba(239, 68, 68, 0.3)',
              borderRadius: '8px',
              fontSize: '0.8rem',
            }}>
              <div style={{ color: '#ef4444', fontWeight: 600, marginBottom: '4px' }}>
                Not found ({notFound.length}):
              </div>
              <div style={{ color: '#f87171' }}>
                {notFound.join('; ')}
              </div>
            </div>
          )}
        </div>
      );
    }

    function FilterBar({ colorFilter, rarityFilter, onColorChange, onRarityChange }) {
      return (
        <div className="filters">
          <select className="filter-select" value={colorFilter} onChange={(e) => onColorChange(e.target.value)}>
            <option value="">All Colors</option>
            <option value="W">White</option>
            <option value="U">Blue</option>
            <option value="B">Black</option>
            <option value="R">Red</option>
            <option value="G">Green</option>
            <option value="C">Colorless</option>
          </select>
          <select className="filter-select" value={rarityFilter} onChange={(e) => onRarityChange(e.target.value)}>
            <option value="">All Rarities</option>
            <option value="common">Common</option>
            <option value="uncommon">Uncommon</option>
            <option value="rare">Rare</option>
            <option value="mythic">Mythic</option>
          </select>
        </div>
      );
    }

    function ConfigPanel({ config, onConfigChange, cardPool, questionMode, onFieldToggle }) {
      const [collapsed, setCollapsed] = useState(false);

      const handleShowToggle = (fieldId) => {
        // Use the parent's mode-aware toggle handler
        onFieldToggle(fieldId);
        // Disable "show all except asked" when manually toggling individual fields
        onConfigChange({ ...config, showAllExceptAsked: false });
      };

      const handleAskChange = (fieldId) => {
        let newShownFields;

        // If "show all except asked" is enabled, update to show all except new askField
        if (config.showAllExceptAsked) {
          newShownFields = Object.keys(FIELD_CONFIG)
            .filter(key => FIELD_CONFIG[key].canShow && key !== fieldId);
        } else {
          // Otherwise, just remove new askField from shownFields, add old askField to shownFields
          newShownFields = config.shownFields.filter(f => f !== fieldId);
          const oldAskField = config.askField;

          // Add old asked field back to shown (if it exists and can be shown)
          if (oldAskField && FIELD_CONFIG[oldAskField]?.canShow && !newShownFields.includes(oldAskField)) {
            newShownFields.push(oldAskField);
          }
        }

        onConfigChange({
          ...config,
          askField: fieldId,
          shownFields: newShownFields
        });
      };

      const isFieldDisabled = (fieldId, mode) => {
        if (mode === 'show') {
          // Can't show the field you're asking about
          if (fieldId === config.askField) return true;
        }

        // No other restrictions
        return false;
      };

      const errors = validateQuizConfig(config, cardPool);

      return (
        <div className="config-panel">
          <div className="config-header">
            <h3>Quiz Configuration</h3>
            <button className="config-toggle-btn" onClick={() => setCollapsed(!collapsed)}>
              {collapsed ? 'Show' : 'Hide'}
            </button>
          </div>

          {!collapsed && (
            <>
              <div style={{ marginBottom: '16px' }}>
                <label style={{ fontSize: '0.9rem', color: 'var(--text-muted)', fontWeight: '600' }}>
                  Answer Format:
                </label>
                <div style={{ display: 'flex', gap: '16px', marginTop: '8px' }}>
                  <label>
                    <input
                      type="radio"
                      name="answerFormat"
                      value="multipleChoice"
                      checked={config.answerFormat === 'multipleChoice'}
                      onChange={() => onConfigChange({ ...config, answerFormat: 'multipleChoice' })}
                    />
                    {' '}Multiple Choice
                  </label>
                  <label>
                    <input
                      type="radio"
                      name="answerFormat"
                      value="textInput"
                      checked={config.answerFormat === 'textInput'}
                      onChange={() => onConfigChange({ ...config, answerFormat: 'textInput' })}
                    />
                    {' '}Text Input
                  </label>
                </div>
              </div>

              {config.answerFormat === 'multipleChoice' && (
                <div style={{ marginBottom: '16px' }}>
                  <label style={{ fontSize: '0.9rem', color: 'var(--text-muted)', fontWeight: '600' }}>
                    Wrong Answer Strategy:
                  </label>
                  <div style={{ display: 'flex', gap: '16px', marginTop: '8px', flexWrap: 'wrap' }}>
                    <label>
                      <input
                        type="radio"
                        name="wrongAnswerStrategy"
                        value="pool"
                        checked={config.wrongAnswerStrategy === 'pool' || !config.wrongAnswerStrategy}
                        onChange={() => onConfigChange({ ...config, wrongAnswerStrategy: 'pool' })}
                      />
                      {' '}Pool (fast)
                    </label>
                    <label>
                      <input
                        type="radio"
                        name="wrongAnswerStrategy"
                        value="hierarchical"
                        checked={config.wrongAnswerStrategy === 'hierarchical'}
                        onChange={() => onConfigChange({ ...config, wrongAnswerStrategy: 'hierarchical' })}
                      />
                      {' '}Hierarchical
                    </label>
                    <label>
                      <input
                        type="radio"
                        name="wrongAnswerStrategy"
                        value="dynamic"
                        checked={config.wrongAnswerStrategy === 'dynamic'}
                        onChange={() => onConfigChange({ ...config, wrongAnswerStrategy: 'dynamic' })}
                      />
                      {' '}Dynamic (hardest)
                    </label>
                  </div>
                  <div style={{ fontSize: '0.75rem', color: 'var(--text-muted)', marginTop: '4px' }}>
                    <strong>Pool:</strong> Searches cached cards by similarity (instant, good quality)
                    <br />
                    <strong>Hierarchical:</strong> Filters cached cards by exact attributes (instant, harder)
                    <br />
                    <strong>Dynamic:</strong> Queries Scryfall API for maximally similar cards (~1s delay, hardest questions)
                  </div>
                </div>
              )}

              <div style={{ marginBottom: '12px', display: 'flex', alignItems: 'center', gap: '8px' }}>
                <label style={{ fontSize: '0.9rem', color: 'var(--text-muted)', fontWeight: '600', cursor: 'pointer' }}>
                  <input
                    type="checkbox"
                    checked={config.showAllExceptAsked || false}
                    onChange={(e) => {
                      const showAll = e.target.checked;
                      if (showAll) {
                        // Show all fields except the asked one
                        const allFieldsExceptAsked = Object.keys(FIELD_CONFIG)
                          .filter(key => FIELD_CONFIG[key].canShow && key !== config.askField);
                        onConfigChange({ ...config, showAllExceptAsked: true, shownFields: allFieldsExceptAsked });
                      } else {
                        onConfigChange({ ...config, showAllExceptAsked: false });
                      }
                    }}
                  />
                  {' '}Show all fields (except asked)
                </label>
              </div>

              <table className="field-config-table">
                <thead>
                  <tr>
                    <th>Field</th>
                    <th>Show</th>
                    <th>Ask</th>
                    <th>Difficulty</th>
                  </tr>
                </thead>
                <tbody>
                  {Object.values(FIELD_CONFIG).map(field => (
                    <tr key={field.id}>
                      <td>{field.label}</td>
                      <td>
                        <input
                          type="checkbox"
                          checked={config.shownFields.includes(field.id)}
                          onChange={() => handleShowToggle(field.id)}
                          disabled={isFieldDisabled(field.id, 'show')}
                        />
                      </td>
                      <td>
                        <input
                          type="radio"
                          name="askField"
                          checked={config.askField === field.id}
                          onChange={() => handleAskChange(field.id)}
                          disabled={isFieldDisabled(field.id, 'ask')}
                        />
                      </td>
                      <td>
                        <span className={`difficulty-badge difficulty-${field.difficulty}`}>
                          {DIFFICULTY_LABELS[field.difficulty]}
                        </span>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>

              {errors.length > 0 && (
                <div style={{
                  marginTop: '16px',
                  padding: '12px',
                  background: 'var(--wrong-bg)',
                  border: '1px solid var(--wrong)',
                  borderRadius: '8px',
                  fontSize: '0.9rem',
                }}>
                  {errors.map((err, idx) => (
                    <div key={idx} style={{ color: 'var(--wrong)' }}>⚠️ {err}</div>
                  ))}
                </div>
              )}
            </>
          )}
        </div>
      );
    }

    function ScryfallCardDisplay({ card, shownFields, askField }) {
      // Filter out the asked field from what should be shown
      const actualShownFields = shownFields.filter(f => f !== askField);

      // Determine what to show (must be in shownFields AND not the askField)
      const shouldShowName = actualShownFields.includes('cardName');
      const shouldShowMV = actualShownFields.includes('manaValue');
      const shouldShowType = actualShownFields.includes('typeLine');
      const shouldShowText = actualShownFields.includes('oracleText');
      const shouldShowPT = actualShownFields.includes('powerToughness') && card.isCreature;
      const shouldShowArt = actualShownFields.includes('cardArt');

      // Redact card name if asking for name OR if asking for text
      const shouldRedactNameInText = askField === 'cardName' || askField === 'oracleText';

      let displayText = card.oracleText || '';
      if (shouldRedactNameInText && card.name) {
        displayText = redactCardName(displayText, card.name);
      }

      return (
        <div className="scryfall-card-display">
          <div className="scryfall-header">
            <div className={`scryfall-name ${!shouldShowName ? 'redacted' : ''}`}>
              {!shouldShowName ? '[REDACTED]' : card.name}
            </div>
            {shouldShowMV && (
              <div className="scryfall-mana-cost">
                {Math.floor(card.manaValue)}
              </div>
            )}
          </div>

          {shouldShowArt && card.imageUris?.art_crop && (
            <img
              src={card.imageUris.art_crop}
              alt="Card art"
              className="scryfall-art"
            />
          )}

          {shouldShowType && (
            <div className="scryfall-type">{card.typeLine}</div>
          )}

          {shouldShowText && (
            <div className="scryfall-oracle">
              {displayText}
            </div>
          )}

          {shouldShowPT && (
            <div className="scryfall-pt">
              {card.power}/{card.toughness}
            </div>
          )}
        </div>
      );
    }

    function QuestionDisplay({ question, onAnswer, showFeedback, isCorrect, selectedIdx, pointsEarned, streakBonus, onNext, liveShownFields }) {
      const [textAnswer, setTextAnswer] = useState('');

      const handleChoice = (idx) => {
        if (showFeedback) return;
        const choice = question.choices[idx];
        onAnswer(choice === question.correctAnswer, choice);
      };

      const handleTextSubmit = () => {
        if (showFeedback || !textAnswer.trim()) return;
        const correct = textAnswer.trim().toLowerCase() === question.correctAnswer.toLowerCase();
        onAnswer(correct, textAnswer);
      };

      return (
        <div className={`question-container ${showFeedback ? 'feedback-shown' : ''}`}>
          <div className="question-type-badge">
            Custom Question
          </div>

          <div className="question-text">
            {question.questionText}
          </div>

          <ScryfallCardDisplay
            card={question.card}
            shownFields={liveShownFields || question.shownFields}
            askField={question.askField}
          />

          {!showFeedback && question.answerFormat === 'multipleChoice' && (
            <div className={`answer-choices ${question.isCompact ? 'answer-choices-compact' : ''}`}>
              {question.choices.map((choice, idx) => {
                let className = 'answer-btn';
                if (idx === selectedIdx) {
                  className += ' selected';
                }
                // Add class for single character or number
                if (choice && choice.length <= 2 && /^[A-Z0-9]/.test(choice)) {
                  className += ' short-answer';
                }

                // Add image class for card art questions
                if (question.askField === 'cardArt') {
                  className += ' answer-btn-image';
                }

                return (
                  <button
                    key={idx}
                    className={className}
                    onClick={() => handleChoice(idx)}
                  >
                    {question.askField === 'cardArt' ? (
                      <img src={choice} alt={`Option ${idx + 1}`} className="answer-art" />
                    ) : (
                      choice
                    )}
                  </button>
                );
              })}
            </div>
          )}

          {showFeedback && question.answerFormat === 'multipleChoice' && (
            <div className="full-card-reveal-section feedback-inline">
              <div className="feedback-header">
                <a
                  href={`https://scryfall.com/search?q=%21%22${encodeURIComponent(question.card.name)}%22`}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="card-name-link"
                >
                  {question.card.name}
                </a>
              </div>
              <div className={`feedback-result ${isCorrect ? 'correct' : 'wrong'}`}>
                <div className="feedback-icon">
                  {isCorrect ? '✓' : '✗'}
                </div>
                <div className="feedback-text">
                  {isCorrect ? (
                    <div>
                      <strong>Correct!</strong>
                      <div style={{ fontSize: '0.9rem', marginTop: '4px' }}>
                        +{pointsEarned} points (×{streakBonus.toFixed(1)} streak bonus)
                      </div>
                    </div>
                  ) : (
                    <div>
                      <strong>Incorrect</strong>
                      <div style={{ fontSize: '0.9rem', marginTop: '4px' }}>
                        Correct answer: <strong>{question.correctAnswer}</strong>
                      </div>
                    </div>
                  )}
                </div>
              </div>
              {question.card.imageUris?.normal && (
                <div className="full-card-reveal">
                  <img src={question.card.imageUris.normal} alt={question.card.name} />
                </div>
              )}
              <button className="next-btn-large" onClick={onNext} autoFocus>
                Next Question →
              </button>
            </div>
          )}

          {!showFeedback && question.answerFormat === 'textInput' && (
            <div style={{ marginTop: '20px' }}>
              <input
                type="text"
                className="search-input"
                placeholder="Type your answer..."
                value={textAnswer}
                onChange={(e) => setTextAnswer(e.target.value)}
                onKeyDown={(e) => e.key === 'Enter' && handleTextSubmit()}
                style={{ width: '100%', marginBottom: '12px' }}
              />
              <button
                className="search-btn"
                onClick={handleTextSubmit}
                disabled={!textAnswer.trim()}
                style={{ width: '100%' }}
              >
                Submit
              </button>
            </div>
          )}

          {showFeedback && question.answerFormat === 'textInput' && (
            <div className="full-card-reveal-section feedback-inline">
              <div className="feedback-header">
                <a
                  href={`https://scryfall.com/search?q=%21%22${encodeURIComponent(question.card.name)}%22`}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="card-name-link"
                >
                  {question.card.name}
                </a>
              </div>
              <div className={`feedback-result ${isCorrect ? 'correct' : 'wrong'}`}>
                <div className="feedback-icon">
                  {isCorrect ? '✓' : '✗'}
                </div>
                <div className="feedback-text">
                  {isCorrect ? (
                    <div>
                      <strong>Correct!</strong>
                      <div style={{ fontSize: '0.9rem', marginTop: '4px' }}>
                        +{pointsEarned} points (×{streakBonus.toFixed(1)} streak bonus)
                      </div>
                    </div>
                  ) : (
                    <div>
                      <strong>Incorrect</strong>
                      <div style={{ fontSize: '0.9rem', marginTop: '4px' }}>
                        Correct answer: <strong>{question.correctAnswer}</strong>
                      </div>
                    </div>
                  )}
                </div>
              </div>
              {question.card.imageUris?.normal && (
                <div className="full-card-reveal">
                  <img src={question.card.imageUris.normal} alt={question.card.name} />
                </div>
              )}
              <button className="next-btn-large" onClick={onNext} autoFocus>
                Next Question →
              </button>
            </div>
          )}
        </div>
      );
    }

    function HistoryTable({ history, onClear }) {
      if (history.length === 0) return null;

      return (
        <div className="history-section">
          <div className="history-header">
            <div className="history-title">Question History ({history.length})</div>
            <button className="history-clear-btn" onClick={onClear}>
              Clear History
            </button>
          </div>
          <div className="history-table-wrapper">
            <table className="history-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th></th>
                  <th>Card</th>
                  <th>Asked</th>
                  <th>Your Answer</th>
                  <th>Correct Answer</th>
                </tr>
              </thead>
              <tbody>
                {history.slice().reverse().map((entry, idx) => (
                  <tr key={idx} style={{ background: entry.correct ? 'rgba(34,197,94,0.06)' : 'rgba(239,68,68,0.06)' }}>
                    <td>{history.length - idx}</td>
                    <td className={entry.correct ? 'history-correct' : 'history-wrong'}>
                      {entry.correct ? '✓' : '✗'}
                    </td>
                    <td>
                      <a
                        href={`https://scryfall.com/search?q=%21%22${encodeURIComponent(entry.cardName)}%22`}
                        target="_blank"
                        rel="noopener noreferrer"
                        style={{ color: '#6c8aff', textDecoration: 'none' }}
                      >
                        {entry.cardName}
                      </a>
                    </td>
                    <td>{entry.askField || entry.type}</td>
                    <td style={{ maxWidth: '150px', overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{entry.userAnswer}</td>
                    <td>{entry.correct ? '—' : entry.correctAnswer}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      );
    }

    function Feedback({ isCorrect, pointsEarned, streakBonus, correctAnswer, onNext }) {
      return (
        <div className={`feedback ${isCorrect ? 'correct' : 'wrong'}`}>
          <div className="feedback-header">
            {isCorrect ? '✓ Correct!' : '✗ Incorrect'}
          </div>
          <div className="feedback-details">
            {isCorrect ? (
              <>
                <div>+{pointsEarned} points (×{streakBonus.toFixed(1)} streak bonus)</div>
              </>
            ) : (
              <>
                <div>Correct answer: {correctAnswer}</div>
              </>
            )}
          </div>
          <button className="next-btn" onClick={onNext}>
            Next Question →
          </button>
        </div>
      );
    }

    // ===================================================================
    // MAIN APP
    // ===================================================================

    function App() {
      const scryfall = useRef(new ScryfallClient());

      // State
      const [cardPool, setCardPool] = useState(null);
      const [loading, setLoading] = useState(null);
      const [error, setError] = useState(null);
      const [currentQuestion, setCurrentQuestion] = useState(null);
      const [showFeedback, setShowFeedback] = useState(false);
      const [isCorrect, setIsCorrect] = useState(false);
      const [selectedIdx, setSelectedIdx] = useState(null);
      const [pointsEarned, setPointsEarned] = useState(0);
      const [streakBonus, setStreakBonus] = useState(1);
      const [streakPopup, setStreakPopup] = useState(null);
      const [questionGenError, setQuestionGenError] = useState(null);
      const [nextQuestionCache, setNextQuestionCache] = useState(null); // Pre-generated next question

      // Filters
      const [activePreset, setActivePreset] = useState('standard');
      const [cardSource, setCardSource] = useState('scryfall');
      const [searchQuery, setSearchQuery] = useState(PRESET_DEFINITIONS.standard.query);
      const [colorFilter, setColorFilter] = useState('');
      const [rarityFilter, setRarityFilter] = useState('');

      // Custom card list
      const [customListText, setCustomListText] = useState(() =>
        loadStorage('card_quiz_custom_list', '')
      );
      const [customListNotFound, setCustomListNotFound] = useState([]);

      // Config - default all showable fields checked
      const getDefaultShownFields = () => {
        return Object.keys(FIELD_CONFIG).filter(key => FIELD_CONFIG[key].canShow);
      };

      const [quizConfig, setQuizConfig] = useState(() =>
        loadStorage(STORAGE_KEYS.CONFIG, {
          shownFields: getDefaultShownFields(),
          askField: 'cardName',
          answerFormat: 'multipleChoice',
          wrongAnswerStrategy: 'pool', // 'pool', 'hierarchical', or 'dynamic'
        })
      );

      // Score
      const [score, setScore] = useState(() =>
        loadStorage(STORAGE_KEYS.SCORE, {
          points: 0,
          questions: 0,
          correct: 0,
          streak: 0,
          bestStreak: 0,
        })
      );

      const [history, setHistory] = useState(() =>
        loadStorage(STORAGE_KEYS.HISTORY, [])
      );

      const [validationErrors, setValidationErrors] = useState([]);

      // Question history & deduplication
      const [askedQuestions, setAskedQuestions] = useState(new Set()); // Set of "cardName|askField" strings
      const [backgroundFetching, setBackgroundFetching] = useState(false);

      // Question mode: 'single' (one type) or 'multiple' (random from enabled)
      const [questionMode, setQuestionMode] = useState('multiple');

      // Ref for auto-scrolling to quiz container
      const quizContainerRef = useRef(null);

      // Save state
      useEffect(() => { saveStorage(STORAGE_KEYS.SCORE, score); }, [score]);
      useEffect(() => { saveStorage(STORAGE_KEYS.HISTORY, history); }, [history]);
      useEffect(() => { saveStorage(STORAGE_KEYS.CONFIG, quizConfig); }, [quizConfig]);

      // Validate config
      useEffect(() => {
        if (cardPool) {
          const errors = validateQuizConfig(quizConfig, cardPool);
          setValidationErrors(errors);
        } else {
          setValidationErrors([]);
        }
      }, [quizConfig, cardPool]);

      // Initial load
      useEffect(() => {
        loadPreset('standard');
      }, []);

      // Unhighlight preset when search manually modified
      useEffect(() => {
        if (activePreset === 'customList' || Object.keys(PREPOPULATED_LISTS).includes(activePreset)) return;
        const matchingPreset = Object.keys(PRESET_DEFINITIONS).find(
          key => PRESET_DEFINITIONS[key].query === searchQuery
        );
        if (!matchingPreset && activePreset) {
          setActivePreset(null);
        }
      }, [searchQuery]);

      // Auto-search when searchQuery changes (debounced)
      useEffect(() => {
        if (!cardPool) return;
        if (activePreset === 'customList' || Object.keys(PREPOPULATED_LISTS).includes(activePreset)) return;

        const timer = setTimeout(() => {
          handleSearch(searchQuery);
        }, 800);

        return () => clearTimeout(timer);
      }, [searchQuery]);

      // Invalidate cache when config changes that affect question generation
      useEffect(() => {
        setNextQuestionCache(null);
      }, [quizConfig.askField, quizConfig.answerFormat, quizConfig.wrongAnswerStrategy]);

      // Auto-regenerate question only when askField, answerFormat, or pool changes
      // NOTE: shownFields changes should NOT trigger new question (just show/hide fields on same card)
      useEffect(() => {
        if (!cardPool) return;
        if (showFeedback) return;

        nextQuestion();
      }, [cardPool, quizConfig.askField, quizConfig.answerFormat, showFeedback]);

      // When shownFields changes, regenerate question using same card with new field availability
      // This allows toggling "shown" fields to immediately update what the user sees
      useEffect(() => {
        if (!cardPool || !currentQuestion || showFeedback) return;

        // When shownFields change, we should regenerate the question using the same card
        // but now with the updated list of available fields to ask about.
        // This is different from changing askField directly - the user is just toggling
        // which fields are enabled, so we pick a new random enabled field for the same card.
        const validEnabledFields = quizConfig.shownFields.filter(fid => {
          const config = FIELD_CONFIG[fid];
          if (!config || !config.canAsk) return false;
          if (config.requiresApplicability && !config.isApplicable(currentQuestion.card)) return false;
          return true;
        });

        if (validEnabledFields.length === 0) return;

        // Only regenerate if the current question's askField is no longer enabled
        if (!validEnabledFields.includes(currentQuestion.askField)) {
          // Pick a new random enabled field from the same card
          const newAskField = validEnabledFields[Math.floor(Math.random() * validEnabledFields.length)];

          // Regenerate question using the same card but with new field
          const fieldDef = FIELD_CONFIG[newAskField];
          const correctValue = fieldDef.extractValue(currentQuestion.card);
          const correctDisplay = fieldDef.formatDisplay(correctValue);
          const updatedConfig = { ...quizConfig, askField: newAskField };

          // Generate the new question asynchronously
          (async () => {
            let newQuestion = null;
            if (updatedConfig.answerFormat === 'multipleChoice') {
              newQuestion = await generateMultipleChoiceQuestion(
                currentQuestion.card,
                cardPool,
                updatedConfig,
                fieldDef,
                correctDisplay,
                scryfall.current
              );
            } else if (updatedConfig.answerFormat === 'textInput') {
              newQuestion = generateTextInputQuestion(
                currentQuestion.card,
                updatedConfig,
                fieldDef,
                correctDisplay
              );
            }

            if (newQuestion) {
              setCurrentQuestion(newQuestion);
              setShowFeedback(false);
            }
          })();
        }
      }, [quizConfig.shownFields, currentQuestion, showFeedback, cardPool, quizConfig.askField, quizConfig.answerFormat]);

      // Auto-scroll to quiz container when new question appears
      useEffect(() => {
        if (currentQuestion && !showFeedback && quizContainerRef.current) {
          // Use a small delay to allow DOM to update
          setTimeout(() => {
            quizContainerRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }, 100);
        }
      }, [currentQuestion, showFeedback]);

      const loadPreset = async (presetKey) => {
        setLoading(presetKey);
        setError(null);
        setCurrentQuestion(null);
        setShowFeedback(false);
        setNextQuestionCache(null);

        try {
          const cards = await scryfall.current.fetchPresetPool(presetKey);
          setCardPool(cards);
          setActivePreset(presetKey);
          setSearchQuery(PRESET_DEFINITIONS[presetKey].query);
        } catch (err) {
          console.error(err);
          setError(`Failed to load ${presetKey}: ${err.message}`);
        } finally {
          setLoading(null);
        }
      };

      const loadCustomList = async () => {
        const names = customListText
          .split('\n')
          .map(l => l.trim())
          .filter(l => l.length > 0)
          .map(l => {
            // Strip sideboard markers: "SB: 2 Card Name" → "2 Card Name"
            l = l.replace(/^SB:\s*/i, '');
            // Strip quantity prefix: "4 Lightning Bolt" or "4x Lightning Bolt" → "Lightning Bolt"
            l = l.replace(/^\d+x?\s+/i, '');
            // Strip set code and collector number: "Card Name (SET) 123" → "Card Name"
            l = l.replace(/\s*\([A-Z0-9]{2,5}\)\s*\d*\s*$/, '');
            return l.trim();
          })
          .filter(l => l.length > 0);

        if (names.length === 0) return;

        setCurrentQuestion(null);
        setShowFeedback(false);
        setNextQuestionCache(null);

        // Dedupe (case-insensitive)
        const seen = new Set();
        const uniqueNames = names.filter(n => {
          const key = n.toLowerCase();
          if (seen.has(key)) return false;
          seen.add(key);
          return true;
        });

        setLoading('customList');
        setError(null);
        setCustomListNotFound([]);

        try {
          const { found, notFound } = await scryfall.current.fetchByNames(uniqueNames);
          setCustomListNotFound(notFound);

          if (found.length === 0) {
            setError('No cards found. Check the card names and try again.');
            return;
          }

          setCardPool(found);
          setActivePreset('customList');
          saveStorage('card_quiz_custom_list', customListText);
        } catch (err) {
          console.error(err);
          setError(`Failed to load card list: ${err.message}`);
        } finally {
          setLoading(null);
        }
      };

      const loadPrepopulatedList = (listKey) => {
        const list = PREPOPULATED_LISTS[listKey];
        if (!list) return;

        setCurrentQuestion(null);
        setShowFeedback(false);
        setNextQuestionCache(null);
        setError(null);
        setCustomListNotFound([]);

        // Use pre-cached card data if available (instant, no API call)
        if (list.cardData) {
          setCardPool(list.cardData);
          setActivePreset(listKey);
          setCustomListText(list.cardData.map(c => c.name).join('\n'));
          return;
        }

        // Fallback to API fetch for lists without pre-cached data
        (async () => {
          setLoading(listKey);
          try {
            const { found, notFound } = await scryfall.current.fetchByNames(list.cards);
            setCustomListNotFound(notFound);
            if (found.length === 0) {
              setError(`No cards found from ${list.label}`);
              return;
            }
            setCardPool(found);
            setActivePreset(listKey);
            setCustomListText(list.cards.join('\n'));
          } catch (err) {
            console.error(err);
            setError(`Failed to load ${list.label}: ${err.message}`);
          } finally {
            setLoading(null);
          }
        })();
      };

      const handleSourceChange = (source) => {
        setCardSource(source);

        // Clear current state when switching sources
        setCurrentQuestion(null);
        setShowFeedback(false);
        setNextQuestionCache(null);
        setError(null);

        if (source === 'custom') {
          setActivePreset('customList');
        } else if (source === 'prepopulated') {
          // Check if activePreset is already a valid prepopulated list
          if (activePreset && PREPOPULATED_LISTS[activePreset]) {
            // activePreset is valid, reload it
            loadPrepopulatedList(activePreset);
          } else {
            // activePreset is not a prepopulated list (likely a Scryfall preset), load the first one
            const firstList = Object.keys(PREPOPULATED_LISTS)[0];
            if (firstList) {
              loadPrepopulatedList(firstList);
            }
          }
        } else if (source === 'scryfall') {
          // Clear activePreset when switching to scryfall
          setActivePreset(null);
          setCardPool([]);
        }
      };

      const handleSearch = async (query) => {
        if (!query.trim()) return;

        setLoading('search');
        setError(null);

        try {
          const cards = await scryfall.current.fetchByQuery(query, 100);
          setCardPool(cards);
          setAskedQuestions(new Set()); // Reset history when starting new search
        } catch (err) {
          console.error(err);
          setError(`Search failed: ${err.message}`);
        } finally {
          setLoading(null);
        }
      };

      // Handle situation where all available cards have been asked
      const handleNoAvailableCards = (allCards, config) => {
        // If in prepopulated/custom list mode: allow repeats with notification
        if (['customList', 'pauper', 'modern', 'standard'].includes(activePreset)) {
          setStreakPopup({
            type: 'info',
            title: 'List Exhausted',
            message: `You've been asked about all cards with this field. Questions will now repeat.`,
            show: true,
          });

          // Clear history for this askField only
          setAskedQuestions(prev => {
            const newSet = new Set();
            for (const key of prev) {
              if (!key.endsWith(`|${config.askField}`)) {
                newSet.add(key);
              }
            }
            return newSet;
          });

          return pickRandom(allCards);
        }

        // Otherwise just pick any card (shouldn't happen in search mode)
        return pickRandom(allCards);
      };

      // Trigger background fetch when running low on cards in search mode
      const triggerBackgroundFetch = async () => {
        if (!activePreset || backgroundFetching || ['customList', 'pauper', 'modern', 'standard'].includes(activePreset)) {
          return;
        }

        setBackgroundFetching(true);

        try {
          const newCards = await scryfall.current.fetchByQuery(searchQuery, 100);

          // Merge with existing pool (dedupe by name)
          const existingNames = new Set(cardPool.map(c => c.name));
          const uniqueNewCards = newCards.filter(c => !existingNames.has(c.name));

          if (uniqueNewCards.length > 0) {
            setCardPool(prev => [...prev, ...uniqueNewCards]);
          }
        } catch (err) {
          console.error('Background fetch failed:', err);
        } finally {
          setBackgroundFetching(false);
        }
      };

      // Handle field toggle with mode awareness
      const handleFieldToggle = (fieldId) => {
        if (questionMode === 'single') {
          // Single mode: only this field should be checked
          setQuizConfig(prev => ({
            ...prev,
            shownFields: [fieldId]
          }));
        } else {
          // Multiple mode: toggle this field
          setQuizConfig(prev => {
            const newFields = prev.shownFields.includes(fieldId)
              ? prev.shownFields.filter(f => f !== fieldId)
              : [...prev.shownFields, fieldId];

            // Prevent unchecking all fields
            if (newFields.length === 0) return prev;

            return { ...prev, shownFields: newFields };
          });
        }
      };

      // Pre-generate next question in background
      const preGenerateNextQuestion = useCallback(async () => {
        if (!cardPool || validationErrors.length > 0) return;

        try {
          const q = await generateCustomQuestion(cardPool, quizConfig, scryfall.current, askedQuestions, activePreset, handleNoAvailableCards);
          if (q) {
            setNextQuestionCache(q);
          }
        } catch (err) {
          console.error('Failed to pre-generate question:', err);
        }
      }, [cardPool, quizConfig, validationErrors, askedQuestions, activePreset, handleNoAvailableCards]);

      const nextQuestion = useCallback(async () => {
        if (!cardPool) return;

        setQuestionGenError(null);

        // Use cached question if available, but only if it matches current config
        let q = nextQuestionCache;
        if (q && (q.askField !== quizConfig.askField || q.answerFormat !== quizConfig.answerFormat)) {
          q = null; // Cache is stale (config changed since pre-generation)
        }

        // If no valid cache, generate now
        if (!q && validationErrors.length === 0) {
          q = await generateCustomQuestion(cardPool, quizConfig, scryfall.current, askedQuestions, activePreset, handleNoAvailableCards);
        }

        if (!q) {
          setQuestionGenError('Unable to generate question with current settings. Try adjusting filters, answer format, or field selections.');
          setCurrentQuestion(null);
          setNextQuestionCache(null);
          return;
        }

        setCurrentQuestion(q);
        setSelectedIdx(null);
        setShowFeedback(false);
        setIsCorrect(false);
        setPointsEarned(0);
        setStreakBonus(1);

        // Track this question as asked
        setAskedQuestions(prev => new Set([...prev, `${q.card.name}|${q.askField}`]));

        // If running low on available cards and in search mode, trigger background fetch
        const availableCount = cardPool.filter(card => {
          const key = `${card.name}|${q.askField}`;
          return !askedQuestions.has(key);
        }).length;

        if (availableCount < 10 && !['customList', 'pauper', 'modern', 'standard'].includes(activePreset) && !backgroundFetching) {
          triggerBackgroundFetch();
        }

        // Clear cache and start pre-generating next question
        setNextQuestionCache(null);
        preGenerateNextQuestion();
      }, [cardPool, quizConfig, validationErrors, nextQuestionCache, preGenerateNextQuestion, askedQuestions, activePreset, backgroundFetching, triggerBackgroundFetch]);

      const handleAnswer = useCallback((correct, userAnswer) => {
        const streakMult = score.streak >= 10 ? 3 : score.streak >= 5 ? 2 : score.streak >= 3 ? 1.5 : 1;

        let difficultyMult = 1;
        if (currentQuestion?.difficulty !== undefined) {
          difficultyMult = DIFFICULTY_WEIGHTS[currentQuestion.difficulty] || 1;
        }

        const basePoints = correct ? 100 : 0;
        const earned = Math.round(basePoints * streakMult * difficultyMult);
        const newStreak = correct ? score.streak + 1 : 0;
        const bestStreak = Math.max(score.bestStreak, newStreak);

        if (correct && (newStreak === 5 || newStreak === 10 || newStreak === 15 || newStreak === 20 || newStreak === 25)) {
          setStreakPopup(newStreak);
          setTimeout(() => setStreakPopup(null), 900);
        }

        setIsCorrect(correct);
        setPointsEarned(earned);
        setStreakBonus(streakMult);
        setShowFeedback(true);

        // Scroll to card reveal section
        setTimeout(() => {
          const revealSection = document.querySelector('.full-card-reveal-section');
          if (revealSection) {
            revealSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
        }, 100);

        if (currentQuestion.answerFormat === 'multipleChoice') {
          const idx = currentQuestion.choices.findIndex(c => c === userAnswer);
          setSelectedIdx(idx);
        }

        setScore({
          points: score.points + earned,
          questions: score.questions + 1,
          correct: score.correct + (correct ? 1 : 0),
          streak: newStreak,
          bestStreak,
        });

        setHistory(prev => [...prev, {
          type: currentQuestion.type,
          cardName: currentQuestion.card.name,
          askField: FIELD_CONFIG[currentQuestion.askField]?.label || currentQuestion.askField,
          correct,
          userAnswer: userAnswer || '',
          correctAnswer: currentQuestion.correctAnswer,
          timestamp: new Date().toISOString(),
        }]);
      }, [score, currentQuestion]);

      const accuracy = score.questions > 0 ? Math.round((score.correct / score.questions) * 100) : 0;

      return (
        <div className="app-container">
          <div className="header">
            <h1>MTG Card Knowledge Quiz</h1>
            <div className="subtitle">Custom Mode Only — v2.13.5 (2026-02-19)</div>
            <div className="api-badge">Powered by Scryfall API</div>
          </div>

          <div className="score-bar">
            <div className="score-item">
              <div className="score-label">Score</div>
              <div className="score-value">{score.points}</div>
            </div>
            <div className="score-item">
              <div className="score-label">Correct</div>
              <div className="score-value">{score.correct}/{score.questions}</div>
            </div>
            <div className="score-item">
              <div className="score-label">Streak</div>
              <div className="score-value streak">{score.streak}</div>
            </div>
            <div className="score-item">
              <div className="score-label">Accuracy</div>
              <div className="score-value accuracy">{accuracy}%</div>
            </div>
          </div>

          <CardSourceSelector
            cardSource={cardSource}
            onSourceChange={handleSourceChange}
          />

          {cardSource === 'scryfall' && (
            <>
              <div className="source-presets">
                {['standard', 'pioneer', 'modern'].map(key => {
                  const preset = PRESET_DEFINITIONS[key];
                  return (
                    <button
                      key={key}
                      className={`preset-btn ${activePreset === key ? 'active' : ''}`}
                      onClick={() => loadPreset(key)}
                      disabled={loading === key}
                    >
                      {loading === key && <span className="spinner-mini" />}
                      {preset.label}
                    </button>
                  );
                })}
              </div>
              <SearchField
                value={searchQuery}
                onChange={setSearchQuery}
                onSearch={handleSearch}
              />
              <FilterBar
                colorFilter={colorFilter}
                rarityFilter={rarityFilter}
                onColorChange={setColorFilter}
                onRarityChange={setRarityFilter}
              />
            </>
          )}

          {cardSource === 'prepopulated' && (
            <div className="source-lists">
              {Object.entries(PREPOPULATED_LISTS).map(([key, list]) => (
                <button
                  key={key}
                  className={`list-btn ${activePreset === key ? 'active' : ''}`}
                  onClick={() => loadPrepopulatedList(key)}
                  disabled={loading === key}
                >
                  {loading === key && <span className="spinner-mini" />}
                  <span>{list.label}</span>
                  <span className="list-btn-count">({(list.cardData || list.cards).length} cards)</span>
                </button>
              ))}
            </div>
          )}

          {cardSource === 'custom' && (
            <CustomListInput
              value={customListText}
              onChange={setCustomListText}
              onLoad={loadCustomList}
              loading={loading === 'customList'}
              notFound={customListNotFound}
            />
          )}

          {cardPool && (
            <>
              <div className="question-mode-selector">
                <label className="mode-label">Question Mode:</label>
                <label className={`mode-option ${questionMode === 'single' ? 'active' : ''}`}>
                  <input
                    type="radio"
                    name="questionMode"
                    value="single"
                    checked={questionMode === 'single'}
                    onChange={() => setQuestionMode('single')}
                  />
                  <span>Single Type</span>
                </label>
                <label className={`mode-option ${questionMode === 'multiple' ? 'active' : ''}`}>
                  <input
                    type="radio"
                    name="questionMode"
                    value="multiple"
                    checked={questionMode === 'multiple'}
                    onChange={() => setQuestionMode('multiple')}
                  />
                  <span>Multiple Types</span>
                </label>
              </div>

              <ConfigPanel
                config={quizConfig}
                onConfigChange={setQuizConfig}
                cardPool={cardPool}
                questionMode={questionMode}
                onFieldToggle={handleFieldToggle}
              />

              {askedQuestions.size > 0 && (
                <div className="history-controls">
                  <button onClick={() => {
                    setAskedQuestions(new Set());
                    setStreakPopup({
                      type: 'info',
                      title: 'History Reset',
                      message: 'Question history has been cleared.',
                      show: true,
                    });
                  }} className="reset-history-btn">
                    Reset Question History
                  </button>
                  <span className="history-status">
                    {askedQuestions.size} card{askedQuestions.size !== 1 ? 's' : ''} asked
                  </span>
                </div>
              )}
            </>
          )}

          {loading && (
            <div className="loading-container">
              <div className="spinner" />
              <div>Loading cards...</div>
            </div>
          )}

          {error && (
            <div className="error-container">
              <div className="error-title">Error</div>
              <div className="error-message">{error}</div>
            </div>
          )}

          {questionGenError && (
            <div className="error-container">
              <div className="error-title">Cannot Generate Question</div>
              <div className="error-message">{questionGenError}</div>
            </div>
          )}

          {currentQuestion && !loading && (
            <div ref={quizContainerRef}>
              <QuestionDisplay
                question={currentQuestion}
                onAnswer={handleAnswer}
                showFeedback={showFeedback}
                isCorrect={isCorrect}
                selectedIdx={selectedIdx}
                pointsEarned={pointsEarned}
                streakBonus={streakBonus}
                onNext={nextQuestion}
                liveShownFields={quizConfig.shownFields}
              />
            </div>
          )}

          {streakPopup && (
            <div className="streak-popup">
              {streakPopup} STREAK!
            </div>
          )}

          <HistoryTable
            history={history}
            onClear={() => {
              setHistory([]);
              setScore({ points: 0, questions: 0, correct: 0, streak: 0, bestStreak: 0 });
            }}
          />
        </div>
      );
    }

    // ===================================================================
    // RENDER
    // ===================================================================

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>

